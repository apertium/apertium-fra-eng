<?xml version="1.0" encoding="UTF-8"?>

<transfer default="chunk">
  <section-def-cats>
    <def-cat n="nom">
      <cat-item tags="n.*"/>
      <!--Falten els altres np (antroponims) que tenen gen i nbr, revisar regles.-->
      <cat-item tags="np.top"/>
    </def-cat>
    <def-cat n="ant">
      <cat-item tags="np.ant"/>
    </def-cat>
    <def-cat n="t">
      <cat-item lemma="t" tags="n.m.sp"/>
    </def-cat>
    <def-cat n="adj">
      <cat-item tags="adj.*"/>
      <cat-item tags="adj.pos.*"/>
    </def-cat>
    <def-cat n="adjec">
      <cat-item tags="adj.*"/>
      <cat-item tags="adj.pos.*"/>
      <cat-item tags="vblex.pp.*"/>
      <cat-item tags="vbmod.pp.*"/>
      <cat-item tags="vbhaver.pp.*"/>
      <cat-item tags="vbser.pp.*"/>
    </def-cat>
    <def-cat n="det">
      <cat-item tags="det.dem.*"/>
      <cat-item tags="det.ind.*"/>
      <cat-item tags="det.def.*"/>
      <cat-item tags="det.pos.*"/>
      <cat-item tags="det.qnt.*"/>
      <cat-item tags="det.itg.*"/>
      <cat-item tags="det.ord.*"/>
      <cat-item tags="detnt"/>
      <cat-item tags="predet.*"/>
      <!-- <cat-item tags="num.*"/> -->
    </def-cat>
    <def-cat n="detdef">
      <cat-item tags="det.def.*"/>
    </def-cat>
    <def-cat n="majestad">
      <cat-item lemma="sa majesté" tags="n.f.sg"/>
      <cat-item lemma="son altesse" tags="n.f.sg"/>
      <cat-item lemma="son altesse réelle" tags="n.f.sg"/>
    </def-cat>
    <def-cat n="percent">
      <cat-item tags="num.percent"/>
    </def-cat>
    <def-cat n="num">
      <cat-item tags="num.*"/>
      <cat-item tags="num"/>
    </def-cat>
    <def-cat n="prep">
      <cat-item tags="pr"/>
    </def-cat>
    <def-cat n="enprep">
      <cat-item lemma="en" tags="pr"/>
    </def-cat>
    <def-cat n="aprep">
      <cat-item lemma="à" tags="pr"/>
    </def-cat>
    <def-cat n="surprep">
      <cat-item lemma="sur" tags="pr"/>
    </def-cat>
    <def-cat n="rien">
      <cat-item lemma="rien" tags="prn.*"/>
    </def-cat>
    <def-cat n="tout">
      <cat-item lemma="tout" tags="predet.*"/>
      <cat-item lemma="tout" tags="prn"/>
    </def-cat>
    <def-cat n="prnperssubj">
      <cat-item tags="prn.tn.p1.*"/>
      <cat-item tags="prn.tn.p2.*"/>
      <cat-item tags="prn.tn.p3.*"/>
      <cat-item lemma="on" tags="prn.*"/>
    </def-cat>
    <def-cat n="prnsubj">
      <!-- prn no personals que poden ser subjecte-->
      <cat-item lemma="quel" tags="prn.itg.*"/>
      <cat-item lemma="qui" tags="prn.itg.*"/>
      <cat-item lemma="lequel" tags="prn.itg.*"/>
      <!--falta afegir als dicos-->
      <cat-item tags="prn.tn.m.*"/>
      <cat-item tags="prn.tn.f.*"/>
      <cat-item tags="prn.tn.mf.*"/>
      <cat-item tags="prn.tn.nt.*"/>
      <cat-item tags="prn.tn.pos.*"/>
      <cat-item tags="prn.tn.ref.*"/>
    </def-cat>
    <def-cat n="prnitg">
      <cat-item tags="prn.itg.*"/>
    </def-cat>
    <def-cat n="rel">
      <cat-item tags="prn.rel.*"/>
      <cat-item tags="rel.*"/>
    </def-cat>
    <def-cat n="dont">
      <cat-item lemma="dont" tags="rel.*"/>
      <!-- això em sembla una errada...      <cat-item lemma="qui" tags="prn.itg.*"/>
	   <cat-item lemma="lequel" tags="prn.itg.*"/>
	   <cat-item tags="prn.tn.*"/>-->
    </def-cat>
    <def-cat n="prnenc">
      <cat-item tags="prn.enc.*"/>
    </def-cat>
    <def-cat n="prnpro">
      <cat-item tags="prn.pro.*"/>
    </def-cat>
    <def-cat n="verb">
      <!--tots els verbs -->
      <cat-item tags="vblex.*"/>
      <cat-item tags="vbser.*"/>
      <cat-item tags="vbhaver.*"/>
      <cat-item tags="vbmod.*"/>
    </def-cat>
    <def-cat n="aux">
      <!--verbs que fan d'aux seguits de pp-->
      <cat-item tags="vbhaver.*"/>
      <cat-item tags="vbser.*"/>
    </def-cat>
    <def-cat n="imp">
      <cat-item tags="vblex.imp.*"/>
      <cat-item tags="vbser.imp.*"/>
      <cat-item tags="vbhaver.imp.*"/>
      <cat-item tags="vbmod.imp.*"/>
    </def-cat>
    <def-cat n="ger">
      <cat-item tags="vblex.ger"/>
      <cat-item tags="vbser.ger"/>
      <cat-item tags="vbhaver.ger"/>
      <cat-item tags="vbmod.ger"/>
    </def-cat>
    <def-cat n="ppres">
      <cat-item tags="vblex.ppres"/>
      <cat-item tags="vbser.ppres"/>
      <cat-item tags="vbhaver.ppres"/>
      <cat-item tags="vbmod.ppres"/>
    </def-cat>
    <def-cat n="verbm">
      <!--verb modal -->
      <cat-item tags="vbmod.*"/>
    </def-cat>
    <def-cat n="vbser">
      <cat-item tags="vbser.*"/>
    </def-cat>
    <def-cat n="train">
      <cat-item lemma="train" tags="n.*"/>
    </def-cat>
    <def-cat n="verbm_inf_ger">
      <!--verb modal, infinitiu o gerundi -->
      <cat-item tags="vbmod.inf"/>
      <cat-item tags="vbmod.ger"/>
    </def-cat>
    <def-cat n="haver">
      <cat-item tags="vbhaver.*"/>
    </def-cat>
    <def-cat n="caldre">
      <cat-item lemma="caldre" tags="vbmod.*"/>
    </def-cat>
    <def-cat n="aller">
      <cat-item lemma="aller" tags="vblex.*"/>
    </def-cat>
    <def-cat n="venir">
      <cat-item lemma="venir" tags="vblex.*"/>
    </def-cat>
    <def-cat n="continuer">
      <cat-item lemma="continuer" tags="vblex.*"/>
    </def-cat>
    <def-cat n="verbpers">
      <cat-item tags="vblex.cni.*"/>
      <cat-item tags="vblex.fti.*"/>
      <cat-item tags="vblex.ifi.*"/>
      <cat-item tags="vblex.imp.*"/>
      <cat-item tags="vblex.pii.*"/>
      <cat-item tags="vblex.pis.*"/>
      <cat-item tags="vblex.pri.*"/>
      <cat-item tags="vblex.prs.*"/>
      <cat-item tags="vblex.ppres.*"/>
      <cat-item tags="vbser.cni.*"/>
      <cat-item tags="vbser.fti.*"/>
      <cat-item tags="vbser.ifi.*"/>
      <cat-item tags="vbser.imp.*"/>
      <cat-item tags="vbser.pii.*"/>
      <cat-item tags="vbser.pis.*"/>
      <cat-item tags="vbser.pri.*"/>
      <cat-item tags="vbser.prs.*"/>
      <cat-item tags="vbser.ppres.*"/>
      <cat-item tags="vbhaver.cni.*"/>
      <cat-item tags="vbhaver.fti.*"/>
      <cat-item tags="vbhaver.ifi.*"/>
      <cat-item tags="vbhaver.imp.*"/>
      <cat-item tags="vbhaver.pii.*"/>
      <cat-item tags="vbhaver.pis.*"/>
      <cat-item tags="vbhaver.pri.*"/>
      <cat-item tags="vbhaver.prs.*"/>
      <cat-item tags="vbhaver.ppres.*"/>
      <cat-item tags="vbmod.cni.*"/>
      <cat-item tags="vbmod.fti.*"/>
      <cat-item tags="vbmod.ifi.*"/>
      <cat-item tags="vbmod.imp.*"/>
      <cat-item tags="vbmod.pii.*"/>
      <cat-item tags="vbmod.pis.*"/>
      <cat-item tags="vbmod.pri.*"/>
      <cat-item tags="vbmod.prs.*"/>
      <cat-item tags="vbmod.ppres.*"/>
    </def-cat>
    <def-cat n="auxpers">
      <cat-item tags="vbser.cni.*"/>
      <cat-item tags="vbser.fti.*"/>
      <cat-item tags="vbser.ifi.*"/>
      <cat-item tags="vbser.imp.*"/>
      <cat-item tags="vbser.pii.*"/>
      <cat-item tags="vbser.pis.*"/>
      <cat-item tags="vbser.pri.*"/>
      <cat-item tags="vbser.prs.*"/>
      <cat-item tags="vbhaver.cni.*"/>
      <cat-item tags="vbhaver.fti.*"/>
      <cat-item tags="vbhaver.ifi.*"/>
      <cat-item tags="vbhaver.imp.*"/>
      <cat-item tags="vbhaver.pii.*"/>
      <cat-item tags="vbhaver.pis.*"/>
      <cat-item tags="vbhaver.pri.*"/>
      <cat-item tags="vbhaver.prs.*"/>
    </def-cat>
    <def-cat n="auxinf">
      <cat-item tags="vbser.inf"/>
      <cat-item tags="vbhaver.inf"/>
    </def-cat>
    <def-cat n="pp">
      <cat-item tags="vblex.pp.*"/>
      <cat-item tags="vbser.pp.*"/>
      <cat-item tags="vbmod.pp.*"/>
      <cat-item tags="vbhaver.pp.*"/>
      <!--ATENCI? CANVI -->
    </def-cat>
    <def-cat n="inf">
      <cat-item tags="vblex.inf"/>
      <cat-item tags="vblex.pron.inf"/>
      <cat-item tags="vbser.inf"/>
      <cat-item tags="vbhaver.inf"/>
      <cat-item tags="vbmod.inf"/>
    </def-cat>
    <def-cat n="adv_preadv">
      <cat-item tags="adv"/>
      <cat-item tags="preadv"/>
    </def-cat>
    <def-cat n="adv">
      <cat-item tags="adv"/>
    </def-cat>
    <def-cat n="advitg">
      <cat-item tags="adv.itg"/>
    </def-cat>
    <def-cat n="ne">
      <cat-item lemma="ne" tags="adv"/>
    </def-cat>
    <def-cat n="plus">
      <cat-item lemma="plus" tags="adv"/>
    </def-cat>
    <def-cat n="cnjcoo">
      <cat-item tags="cnjcoo"/>
    </def-cat>
    <def-cat n="cnjsub">
      <cat-item tags="cnjsub"/>
    </def-cat>
    <def-cat n="cnjadv">
      <cat-item tags="cnjadv"/>
    </def-cat>
    <def-cat n="per">
      <cat-item lemma="per" tags="pr"/>
    </def-cat>
    <def-cat n="de">
      <cat-item lemma="de" tags="pr"/>
    </def-cat>
    <def-cat n="en">
      <cat-item lemma="en" tags="pr"/>
    </def-cat>
    <def-cat n="sent">
      <cat-item tags="sent"/>
    </def-cat>
    <def-cat n="coma">
      <cat-item tags="cm"/>
    </def-cat>
  </section-def-cats>

  <section-def-attrs>
    <def-attr n="a_nom">
      <attr-item tags="n"/>
      <attr-item tags="n.acr"/>
      <attr-item tags="n.unc"/>
      <attr-item tags="np.top"/>
      <attr-item tags="np.ant"/>
    </def-attr>
    <def-attr n="a_np_acr">
      <attr-item tags="np"/>
      <attr-item tags="acr"/>
    </def-attr>
    <def-attr n="a_adj">
      <attr-item tags="adj"/>
      <attr-item tags="adj.sint"/>
      <attr-item tags="adj.sint.comp"/>
      <attr-item tags="adj.sint.sup"/>
      <attr-item tags="adj.pos"/>
      <attr-item tags="adj.ind"/>
      <attr-item tags="adj.itg"/>
      <attr-item tags="vblex.pp"/>
      <attr-item tags="vbmod.pp"/>
      <attr-item tags="vbhaver.pp"/>
      <attr-item tags="vbser.pp"/>
    </def-attr>
    <def-attr n="a_det">
      <attr-item tags="det.dem"/>
      <attr-item tags="det.ind"/>
      <attr-item tags="det.def"/>
      <attr-item tags="det.pos"/>
      <attr-item tags="det.qnt"/>
      <attr-item tags="det.itg"/>
      <attr-item tags="det.ord"/>
      <attr-item tags="predet"/>
      <attr-item tags="num"/>
    </def-attr>
    <def-attr n="a_num">
      <attr-item tags="num"/>
      <attr-item tags="num.percent"/>
    </def-attr>
    <def-attr n="a_verb">
      <attr-item tags="vblex"/>
      <attr-item tags="vbser"/>
      <attr-item tags="vbhaver"/>
      <attr-item tags="vbmod"/>
      <attr-item tags="vaux"/>
    </def-attr>
    <def-attr n="pron">
      <attr-item tags="pron"/>
    </def-attr>
    <def-attr n="sep">
      <attr-item tags="sep"/>
    </def-attr>
    <def-attr n="a_adv">
      <attr-item tags="adv"/>
      <attr-item tags="preadv"/>
      <attr-item tags="adv.itg"/>
    </def-attr>
    <def-attr n="a_pp">
      <attr-item tags="vblex.pp"/>
      <attr-item tags="vbser.pp"/>
      <attr-item tags="vbmod.pp"/>
      <attr-item tags="vblex.sep.pp"/>
      <attr-item tags="vbser.sep.pp"/>
      <attr-item tags="vbmod.sep.pp"/>
      <attr-item tags="vaux.pp"/>
      <attr-item tags="vbhaver.pp"/>
    </def-attr>
    <def-attr n="a_prn">
      <attr-item tags="prn"/>
    </def-attr>
    <def-attr n="tipus_prn">
      <attr-item tags="subj"/>
      <attr-item tags="pro"/>
      <attr-item tags="pro.ref"/>
      <attr-item tags="rel"/>
      <attr-item tags="rel.nn"/>
      <attr-item tags="rel.aa"/>
      <attr-item tags="rel.adv"/>
      <attr-item tags="rel.adv"/>
      <attr-item tags="obj"/>
      <attr-item tags="tn"/>
      <attr-item tags="tn.ref"/>
      <attr-item tags="itg"/>
      <attr-item tags="pos"/>
    </def-attr>
    <def-attr n="tipoenc_pro">
      <attr-item tags="ref.p3.mf.sp"/>
      <attr-item tags="p1.mf.pl"/>
      <attr-item tags="p1.mf.sg"/>
      <attr-item tags="p2.mf.pl"/>
      <attr-item tags="p2.mf.sg"/>
      <attr-item tags="p2.mf.sp"/>
      <attr-item tags="p3.f.pl"/>
      <attr-item tags="p3.f.sg"/>
      <attr-item tags="p3.mf.pl"/>
      <attr-item tags="p3.mf.sg"/>
      <attr-item tags="p3.m.pl"/>
      <attr-item tags="p3.m.sg"/>
      <attr-item tags="p3.nt"/>
      <attr-item tags="mf.sg"/>
      <attr-item tags="adv"/>
    </def-attr>
    <def-attr n="pers">
      <attr-item tags="p1"/>
      <attr-item tags="p2"/>
      <attr-item tags="p3"/>
    </def-attr>
    <def-attr n="gen">
      <attr-item tags="m"/>
      <attr-item tags="f"/>
      <attr-item tags="mf"/>
      <attr-item tags="GD"/>
      <attr-item tags="nt"/>
    </def-attr>
    <def-attr n="tipus_np">
      <attr-item tags="top"/>
      <attr-item tags="al"/>
      <attr-item tags="ant"/>
    </def-attr>
    <def-attr n="gen_sense_mf">
      <attr-item tags="m"/>
      <attr-item tags="f"/>
      <attr-item tags="GD"/>
      <attr-item tags="nt"/>
    </def-attr>
    <def-attr n="gen_mf">
      <attr-item tags="mf"/>
    </def-attr>
    <def-attr n="nbr">
      <attr-item tags="sg"/>
      <attr-item tags="pl"/>
      <attr-item tags="sp"/>
      <attr-item tags="ND"/>
    </def-attr>
    <def-attr n="nbr_sense_sp">
      <attr-item tags="sg"/>
      <attr-item tags="pl"/>
      <attr-item tags="ND"/>
    </def-attr>
    <def-attr n="nbr_sp">
      <attr-item tags="sp"/>
    </def-attr>
    <def-attr n="temps">
      <attr-item tags="cni"/>
      <attr-item tags="fti"/>
      <attr-item tags="ifi"/>
      <attr-item tags="imp"/>
      <attr-item tags="pii"/>
      <attr-item tags="pis"/>
      <attr-item tags="pri"/>
      <attr-item tags="pres"/>
      <attr-item tags="prs"/>
      <attr-item tags="pp"/>
      <attr-item tags="ppres"/>
      <attr-item tags="ger"/>
      <attr-item tags="inf"/>
    </def-attr>
    <def-attr n="neg">
      <attr-item tags="NEG"/>
    </def-attr>
  </section-def-attrs>

  <section-def-vars>
    <def-var n="tipusprep"/>
    <def-var n="tipusverb"/>
    <def-var n="tipusnom"/>
    <def-var n="numero"/>
    <def-var n="persona"/>
    <def-var n="genero"/>
    <def-var n="concDet"/>
    <def-var n="concAdj"/>
    <def-var n="concPrimero"/>
    <def-var n="concSegundo"/>
    <def-var n="concTercero"/>
    <def-var n="interrogativa"/>
    <def-var n="exclamativa"/>
    <def-var n="caseFirstWord"/>
    <def-var n="lema"/>
    <def-var n="EOS"/>
    <def-var n="paraula1"/>
    <def-var n="SVnegatiu"/>
    <def-var n="auxiliar"/>
    <def-var n="adv_adjectiu"/>
    <def-var n="verbfinal"/>
    <def-var n="temps_chunk"/>
    <def-var n="pers_chunk"/>
    <def-var n="nbr_chunk"/>
    <def-var n="lema_SV"/>
    <def-var n="haverhi_pp"/>
  </section-def-vars>

  <section-def-lists>
    <def-list n="ntop">
      <list-item v="maison"/>
      <list-item v="monde"/>
      <list-item v="rue"/>
      <list-item v="zona"/>
      <list-item v="école"/>
      <list-item v="prison"/>
      <list-item v="habitation"/>
      <list-item v="chambre"/>
      <list-item v="salle"/>
      <list-item v="salon"/>
      <list-item v="mairie"/>
      <list-item v="université"/>
      <list-item v="hôpital"/>
      <list-item v="hôtel"/>
    </def-list>
    <def-list n="part_sing">
      <list-item v="eau"/>
      <list-item v="beurre"/>
      <list-item v="limonade"/>
      <list-item v="vin"/>
      <list-item v="bière"/>
      <list-item v="viande"/>
      <list-item v="pain"/>
    </def-list>
    <def-list n="v_amb_a">
      <list-item v="soumettre"/>
      <list-item v="aller"/>
    </def-list>
    <def-list n="v_no_part">
      <list-item v="aller"/>
      <list-item v="partir"/>
      <list-item v="arriver"/>
      <list-item v="venir"/>
      <list-item v="passer"/>
      <list-item v="sortir"/>
    </def-list>
    <def-list n="vbcop">
      <list-item v="sembler"/>
    </def-list>
    <def-list n="v_amb_en">
      <list-item v="entrer"/>
      <list-item v="fêter"/>
      <list-item v="célébrer"/>
      <list-item v="vivre"/>
      <list-item v="habiter"/>
      <list-item v="mourir"/>
      <list-item v="naître"/>
      <list-item v="être"/>
    </def-list>
    <def-list n="vbambser">
      <list-item v="aller"/>
      <list-item v="passer"/>
      <list-item v="impliquer"/>
      <list-item v="arriver"/>
      <list-item v="décéder"/>
      <list-item v="entrer"/>
      <list-item v="mourir"/>
      <list-item v="naître"/>
      <list-item v="partir"/>
      <list-item v="repartir"/>
      <list-item v="rester"/>
      <list-item v="tomber"/>
      <list-item v="retomber"/>
      <list-item v="venir"/>
      <list-item v="revenir"/>
      <list-item v="devenir"/>
      <list-item v="être"/>
      <list-item v="abaisser"/>
      <list-item v="baisser"/>
      <list-item v="apparaître"/>
      <list-item v="descendre"/>
      <list-item v="monter"/>
      <list-item v="sortir"/>
      <list-item v="passer"/>
      <list-item v="imposer"/>
      <list-item v="limiter"/>
      <list-item v="relier"/>
      <list-item v="efforcer"/>
      <list-item v="composer"/>
      <list-item v="impliquer"/>
    </def-list>
    <def-list n="mois">
      <list-item v="janvier"/>
      <list-item v="février"/>
      <list-item v="mars"/>
      <list-item v="avril"/>
      <list-item v="mai"/>
      <list-item v="juin"/>
      <list-item v="juillet"/>
      <list-item v="août"/>
      <list-item v="septembre"/>
      <list-item v="octobre"/>
      <list-item v="novembre"/>
      <list-item v="décembre"/>
    </def-list>
    <def-list n="en_majuscules">
      <list-item v="Monday"/>
      <list-item v="Tuesday"/>
      <list-item v="Wednesday"/>
      <list-item v="Thursday"/>
      <list-item v="Friday"/>
      <list-item v="Saturday"/>
      <list-item v="Sunday"/>
    </def-list>
  </section-def-lists>

  <section-def-macros>
    <def-macro n="f_lexicadj" npar="1">
      <choose>
        <when>
          <test>
            <and>
              <equal caseless="yes">
                <clip pos="1" side="sl" part="lem"/>
                <lit v="bon"/>
              </equal>
              <equal>
                <clip pos="1" side="tl" part="gen"/>
                <lit-tag v="m"/>
              </equal>
              <equal>
                <clip pos="1" side="tl" part="nbr"/>
                <lit-tag v="sg"/>
              </equal>
            </and>
          </test>
          <let>
            <clip pos="1" side="tl" part="lem"/>
            <lit v="good"/>
          </let>
        </when>
      </choose>
      <choose>
        <when>
          <test>
            <and>
              <equal caseless="yes">
                <clip pos="1" side="sl" part="lem"/>
                <lit v="grand"/>
              </equal>
              <equal>
                <clip pos="1" side="tl" part="nbr"/>
                <lit-tag v="sg"/>
              </equal>
            </and>
          </test>
          <let>
            <clip pos="1" side="tl" part="lem"/>
            <lit v="big"/>
          </let>
        </when>
      </choose>
      <choose>
        <when>
          <test>
            <and>
              <equal caseless="yes">
                <clip pos="1" side="sl" part="lem"/>
                <lit v="premier"/>
              </equal>
              <equal>
                <clip pos="1" side="tl" part="gen"/>
                <lit-tag v="m"/>
              </equal>
              <equal>
                <clip pos="1" side="tl" part="nbr"/>
                <lit-tag v="sg"/>
              </equal>
            </and>
          </test>
          <let>
            <clip pos="1" side="tl" part="lem"/>
            <lit v="first"/>
          </let>
        </when>
      </choose>
      <choose>
        <when>
          <test>
            <and>
              <equal caseless="yes">
                <clip pos="1" side="sl" part="lem"/>
                <lit v="mauvais"/>
              </equal>
              <equal>
                <clip pos="1" side="tl" part="gen"/>
                <lit-tag v="m"/>
              </equal>
            </and>
          </test>
          <let>
            <clip pos="1" side="tl" part="lem"/>
            <lit v="bad"/>
          </let>
        </when>
      </choose>
      <choose>
        <when>
          <test>
            <and>
              <equal caseless="yes">
                <clip pos="1" side="sl" part="lem"/>
                <lit v="troisième"/>
              </equal>
              <equal>
                <clip pos="1" side="tl" part="nbr"/>
                <lit-tag v="sg"/>
              </equal>
            </and>
          </test>
          <let>
            <clip pos="1" side="tl" part="lem"/>
            <lit v="third"/>
          </let>
        </when>
      </choose>
    </def-macro>
    <!-- FIXME: check when this is called -->
    <def-macro n="verb_ref" npar="2">
      <!-- aquesta macro canvia el significat de certs verbs reflexius-->
      <choose>
	<!--si el prn és ref...-->
        <when>
          <test>
            <or>
              <and>
                <equal>
                  <clip pos="1" side="sl" part="tipoenc_pro"/>
                  <lit-tag v="ref.p3.mf.sp"/>
                </equal>
                <equal>
                  <clip pos="2" side="sl" part="pers"/>
                  <lit-tag v="p3"/>
                </equal>
              </and>
              <and>
                <equal>
                  <clip pos="1" side="sl" part="pers"/>
                  <lit-tag v="p2"/>
                </equal>
                <equal>
                  <clip pos="2" side="sl" part="pers"/>
                  <lit-tag v="p2"/>
                </equal>
                <equal>
                  <clip pos="1" side="sl" part="nbr"/>
                  <clip pos="2" side="sl" part="nbr"/>
                </equal>
              </and>
              <and>
                <equal>
                  <clip pos="1" side="sl" part="pers"/>
                  <lit-tag v="p1"/>
                </equal>
                <equal>
                  <clip pos="2" side="sl" part="pers"/>
                  <lit-tag v="p1"/>
                </equal>
                <equal>
                  <clip pos="1" side="sl" part="nbr"/>
                  <clip pos="2" side="sl" part="nbr"/>
                </equal>
              </and>
            </or>
          </test>
          <choose>
	    <!-- canvia aquests verbs-->
            <when>
              <test>
                <equal caseless="yes">
                  <clip pos="2" side="sl" part="lem"/>
                  <lit v="refuser"/>
                </equal>
              </test>
              <let>
                <clip pos="2" side="tl" part="lem"/>
                <lit v="deny"/>
              </let>
            </when>
            <when>
              <test>
                <equal caseless="yes">
                  <clip pos="2" side="sl" part="lem"/>
                  <lit v="demander"/>
                </equal>
              </test>
              <let>
                <clip pos="2" side="tl" part="lem"/>
                <lit v="ask"/>
              </let>
            </when>
          </choose>
        </when>
      </choose>
    </def-macro>
    <def-macro n="comprova_auxiliar" npar="2">
      <choose>
        <when>
          <test>
            <equal>
              <clip pos="1" side="tl" part="lem"/>
              <lit v="ser"/>
            </equal>
          </test>
          <choose>
            <when>
              <test>
                <in caseless="yes">
                  <clip pos="2" side="sl" part="lem"/>
                  <list n="vbambser"/>
                </in>
              </test>
              <let>
                <clip pos="1" side="tl" part="lem"/>
                <lit v="have"/>
              </let>
              <let>
                <clip pos="1" side="tl" part="a_verb"/>
                <lit-tag v="vbhaver"/>
              </let>
              <let>
                <clip pos="2" side="tl" part="gen"/>
                <lit-tag v="m"/>
              </let>
              <let>
                <clip pos="2" side="tl" part="nbr"/>
                <lit-tag v="sg"/>
              </let>
            </when>
            <otherwise>
              <let>
                <clip pos="1" side="tl" part="lem"/>
                <lit v="be"/>
              </let>
              <let>
                <clip pos="1" side="tl" part="a_verb"/>
                <lit-tag v="vbser"/>
              </let>
            </otherwise>
          </choose>
        </when>
        <otherwise>
          <let>
            <clip pos="1" side="tl" part="lem"/>
            <lit v="have"/>
          </let>
          <let>
            <clip pos="1" side="tl" part="a_verb"/>
            <lit-tag v="vbhaver"/>
          </let>
          <let>
            <clip pos="2" side="tl" part="gen"/>
            <lit-tag v="m"/>
          </let>
          <let>
            <clip pos="2" side="tl" part="nbr"/>
            <lit-tag v="sg"/>
          </let>
        </otherwise>
      </choose>
    </def-macro>
    <def-macro n="comprova_auxiliar_ref" npar="3">
      <!--aquesta macro troba l'aux correcte en cast tenint en compte que si el verb és ref i porta l'aux "être" en cast ha de ser "haber". de passada, mira també si cal canviar el lema del verb (com la macro "verb_ref")-->
      <choose>
        <when>
	  <!--en cas que l'auxiliar sigui "ser":-->
          <test>
            <equal>
              <clip pos="1" side="tl" part="lem"/>
              <lit v="ser"/>
            </equal>
          </test>
          <choose>
            <when>
	      <!--si és un verb que va amb "être" fes que l'aux sigui "haber"-->
              <test>
                <in caseless="yes">
                  <clip pos="2" side="sl" part="lem"/>
                  <list n="vbambser"/>
                </in>
              </test>
              <let>
                <clip pos="1" side="tl" part="lem"/>
                <lit v="have"/>
              </let>
              <let>
                <clip pos="1" side="tl" part="a_verb"/>
                <lit-tag v="vbhaver"/>
              </let>
              <let>
                <clip pos="2" side="tl" part="gen"/>
                <lit-tag v="m"/>
              </let>
              <let>
                <clip pos="2" side="tl" part="nbr"/>
                <lit-tag v="sg"/>
              </let>
            </when>
            <otherwise>
              <choose>
		<!--si és ref...-->
                <when>
                  <test>
                    <or>
                      <and>
                        <equal>
                          <clip pos="3" side="sl" part="tipoenc_pro"/>
                          <lit-tag v="ref.p3.mf.sp"/>
                        </equal>
                        <equal>
                          <clip pos="1" side="sl" part="pers"/>
                          <lit-tag v="p3"/>
                        </equal>
                      </and>
                      <and>
                        <equal>
                          <clip pos="3" side="sl" part="pers"/>
                          <lit-tag v="p2"/>
                        </equal>
                        <equal>
                          <clip pos="1" side="sl" part="pers"/>
                          <lit-tag v="p2"/>
                        </equal>
                        <equal>
                          <clip pos="1" side="sl" part="nbr"/>
                          <clip pos="3" side="sl" part="nbr"/>
                        </equal>
                      </and>
                      <and>
                        <equal>
                          <clip pos="3" side="sl" part="pers"/>
                          <lit-tag v="p1"/>
                        </equal>
                        <equal>
                          <clip pos="1" side="sl" part="pers"/>
                          <lit-tag v="p1"/>
                        </equal>
                        <equal>
                          <clip pos="3" side="sl" part="nbr"/>
                          <clip pos="1" side="sl" part="nbr"/>
                        </equal>
                      </and>
                    </or>
                  </test>
                  <let>
		    <!--... fes que l'aux sigui "haber"-->
                    <clip pos="1" side="tl" part="lem"/>
                    <lit v="have"/>
                  </let>
                  <let>
                    <clip pos="1" side="tl" part="a_verb"/>
                    <lit-tag v="vbhaver"/>
                  </let>
                  <let>
                    <clip pos="2" side="tl" part="gen"/>
                    <lit-tag v="m"/>
                  </let>
                  <let>
                    <clip pos="2" side="tl" part="nbr"/>
                    <lit-tag v="sg"/>
                  </let>
                  <choose>
		    <!-- i canvia aquests verbs-->
                    <when>
                      <test>
                        <equal caseless="yes">
                          <clip pos="2" side="sl" part="lem"/>
                          <lit v="refuser"/>
                        </equal>
                      </test>
                      <let>
                        <clip pos="2" side="tl" part="lem"/>
                        <lit v="deny"/>
                      </let>
                    </when>
                    <when>
                      <test>
                        <equal caseless="yes">
                          <clip pos="2" side="sl" part="lem"/>
                          <lit v="demander"/>
                        </equal>
                      </test>
                      <let>
                        <clip pos="2" side="tl" part="lem"/>
                        <lit v="ask"/>
                      </let>
                    </when>
                  </choose>
                </when>
                <otherwise>
		  <!--si no és cap dels casos anteriors, acceptem que és passiva, i deixem el verb "ser"-->
                  <let>
                    <clip pos="1" side="tl" part="lem"/>
                    <lit v="be"/>
                  </let>
                  <let>
                    <clip pos="1" side="tl" part="a_verb"/>
                    <lit-tag v="vbser"/>
                  </let>
                </otherwise>
              </choose>
            </otherwise>
          </choose>
        </when>
        <otherwise>
	  <!--si l'orig és "avoir" deixem "haber" en cast-->
          <let>
            <clip pos="1" side="tl" part="lem"/>
            <lit v="have"/>
          </let>
          <let>
            <clip pos="1" side="tl" part="a_verb"/>
            <lit-tag v="vbhaver"/>
          </let>
          <let>
            <clip pos="2" side="tl" part="gen"/>
            <lit-tag v="m"/>
          </let>
          <let>
            <clip pos="2" side="tl" part="nbr"/>
            <lit-tag v="sg"/>
          </let>
        </otherwise>
      </choose>
    </def-macro>
    <def-macro n="f_prep" npar="1">
      <choose>
        <when>
          <test>
            <equal>
              <clip pos="1" side="sl" part="lem"/>
              <lit v="à"/>
            </equal>
          </test>
          <let>
            <var n="tipusprep"/>
            <lit-tag v="at"/>
          </let>
        </when>
        <otherwise>
          <choose>
            <when>
              <test>
                <equal>
                  <clip pos="1" side="sl" part="lem"/>
                  <lit v="en"/>
                </equal>
              </test>
              <let>
                <var n="tipusprep"/>
                <lit-tag v="in"/>
              </let>
            </when>
            <otherwise>
              <choose>
                <when>
                  <test>
                    <equal>
                      <clip pos="1" side="sl" part="lem"/>
                      <lit v="de"/>
                    </equal>
                  </test>
                  <let>
                    <var n="tipusprep"/>
                    <lit-tag v="of"/>
                  </let>
                </when>
                <otherwise>
                  <let>
                    <var n="tipusprep"/>
                    <lit-tag v=""/>
                  </let>
                </otherwise>
              </choose>
            </otherwise>
          </choose>
        </otherwise>
      </choose>
    </def-macro>
    <def-macro n="f_ppres" npar="1">
      <choose>
        <when>
          <test>
            <equal>
              <clip pos="1" side="sl" part="temps"/>
              <lit-tag v="ppres"/>
            </equal>
          </test>
          <let>
            <clip pos="1" side="tl" part="temps"/>
            <lit-tag v="pri"/>
          </let>
          <out>
            <chunk name="cnjsub">
              <tags>
                <tag>
                  <lit-tag v="cnjsub"/>
                </tag>
              </tags>
              <lu>
                <lit v="que"/>
                <lit-tag v="cnjsub"/>
              </lu>
            </chunk>
            <b/>
          </out>
        </when>
	<!--      <otherwise>
             <choose>
             <when>
             <test>
             <or>
             <equal>
             <clip pos="1" side="sl" part="temps"/>
             <lit-tag v="inf"/>
             </equal>
             <equal>
             <clip pos="1" side="sl" part="temps"/>
             <lit-tag v="ger"/>
             </equal>
             </or>
             </test>
             <let>
             <var n="numero"/>
             <lit-tag v="NN"/>
             </let>
             <let>
             <var n="persona"/>
             <lit-tag v="NP"/>
             </let>
             </when>
             <otherwise>
             <choose>
             <when>
             <test>
             <equal>
             <clip pos="1" side="sl" part="temps"/>
             <lit-tag v="pp"/>
             </equal>
             </test>
             <let>
             <var n="numero"/>
             <clip pos="1" side="tl" part="nbr"/>
             </let>
             <let>
             <var n="persona"/>
             <lit-tag v="NP"/>
             </let>
             </when>
             <otherwise>
             <let>
             <var n="numero"/>
             <clip pos="1" side="tl" part="nbr"/>
             </let>
             <let>
             <var n="persona"/>
             <clip pos="1" side="tl" part="pers"/>
             </let>
             </otherwise>
             </choose>
             </otherwise>
             </choose>
             </otherwise>-->
      </choose>
    </def-macro>
    <def-macro n="tipus_verb" npar="1">
      <choose>
        <when>
          <test>
            <in caseless="yes">
              <clip pos="1" side="sl" part="lem"/>
              <list n="v_amb_a"/>
            </in>
          </test>
          <let>
            <var n="tipusverb"/>
            <lit-tag v="vba"/>
          </let>
        </when>
        <otherwise>
          <choose>
            <when>
              <test>
                <in caseless="yes">
                  <clip pos="1" side="sl" part="lem"/>
                  <list n="v_amb_en"/>
                </in>
              </test>
              <let>
                <var n="tipusverb"/>
                <lit-tag v="vben"/>
              </let>
            </when>
            <otherwise>
              <choose>
                <when>
                  <test>
                    <in caseless="yes">
                      <clip pos="1" side="sl" part="lem"/>
                      <list n="v_no_part"/>
                    </in>
                  </test>
                  <let>
                    <var n="tipusverb"/>
                    <lit-tag v="nopart"/>
                  </let>
                </when>
                <otherwise>
                  <let>
                    <var n="tipusverb"/>
                    <lit-tag v="nodef"/>
                  </let>
                </otherwise>
              </choose>
            </otherwise>
          </choose>
        </otherwise>
      </choose>
      <!--      <choose>
           <when>
           <test>
           <in caseless="yes">
           <clip pos="1" side="sl" part="lem"/>
           <list n="vbcop"/>
           </in>
           </test>
           <let>
           <clip pos="1" side="sl" part="a_verb"/>
           <lit-tag v="vbcop"/>
           </let>
           </when>
	   </choose>-->
    </def-macro>

    <def-macro n="tipus_nom" npar="1">
      <choose>
        <when>
          <test>
            <or>
              <in caseless="yes">
                <clip pos="1" side="sl" part="lem"/>
                <list n="ntop"/>
              </in>
              <equal>
                <clip pos="1" side="sl" part="tipus_np"/>
                <lit-tag v="top"/>
              </equal>
            </or>
          </test>
          <let>
            <var n="tipusnom"/>
            <lit-tag v="top"/>
          </let>
        </when>
        <when>
          <test>
            <in caseless="yes">
              <clip pos="1" side="sl" part="lem"/>
              <list n="part_sing"/>
            </in>
          </test>
          <let>
            <var n="tipusnom"/>
            <lit-tag v="part"/>
          </let>
        </when>
      </choose>
    </def-macro>

    <def-macro n="firstWord" npar="1"><!--nova versió 8-febr-08, comprovar si va bé. Si va bé, posar-la també en en-ca -->
      <choose>
	<when>
	  <test>
	    <equal> 
	      <var n="EOS"/>
	      <lit v="true"/>
	    </equal> 
	  </test>
	  <choose>
	    <when>
	      <test>
		<and>
		  <equal>
		    <clip pos="1" side="sl" part="a_np_acr"/>
		    <lit v=""/>
		  </equal>
		  <not>
		    <in>
		      <clip pos="1" side="tl" part="lem"/>
		      <list n="en_majuscules"/>
		    </in>
		  </not> 	      
		</and>
	      </test>
	      <modify-case>
		<clip pos="1" side="tl" part="lem"/>
		<lit v="aa"/>
	      </modify-case>
	    </when>
	  </choose>
	  <let>
	    <var n="caseFirstWord"/>
	    <lit v="Aa"/>
	  </let>
	</when>
	<otherwise> 
	  <let>
	    <var n="caseFirstWord"/>
	    <lit v="aa"/>
	  </let>
	</otherwise>
      </choose>
      <!--	</when>
	  <otherwise>
	  <let>
	  <var n="caseFirstWord"/>
	  <lit v="aa"/>
	  </let>
	  </otherwise>
	  </choose>-->
      <let>
	<var n="EOS"/>
	<lit v="false"/>
      </let>
    </def-macro>

    <def-macro n="f_bcond" npar="2">
      <!--Per mirar si el blanc cont?o no format. Cal posar aquesta funci?en les regles en qu?desaparegui alguna paraula, per tal de decidir si el blanc de la paraula eliminada s'ha d'eliminar o conservar. Si cont?format cal conservar-la, si no en cont?cal eliminar-la perqu?no apareguin dos espais seguits. -->
      <choose>
        <when>
          <test>
            <not>
              <equal>
                <b pos="1"/>
                <lit v=" "/>
              </equal>
            </not>
          </test>
          <out>
            <b pos="1"/>
          </out>
        </when>
      </choose>
    </def-macro>
    <def-macro n="f_concord1" npar="1">
      <choose>
        <!--To determine value of variables of gender and
            number and propagate to other rules.  Variables are
            not used again in this rule -->
        <when>
          <test>
            <equal>
              <clip pos="1" side="sl" part="gen"/>
              <lit-tag v="m"/>
            </equal>
          </test>
          <let>
            <var n="genero"/>
            <lit-tag v="m"/>
          </let>
        </when>
        <when>
          <test>
            <equal>
              <clip pos="1" side="sl" part="gen"/>
              <lit-tag v="f"/>
            </equal>
          </test>
          <let>
            <var n="genero"/>
            <lit-tag v="f"/>
          </let>
        </when>
        <when>
          <test>
            <equal>
              <clip pos="1" side="sl" part="gen"/>
              <lit-tag v="mf"/>
            </equal>
          </test>
          <let>
            <var n="genero"/>
            <lit-tag v="mf"/>
          </let>
        </when>
      </choose>
      <choose>
        <when>
          <test>
            <equal>
              <clip pos="1" side="tl" part="nbr"/>
              <lit-tag v="sg"/>
            </equal>
          </test>
          <let>
            <var n="numero"/>
            <lit-tag v="sg"/>
          </let>
        </when>
        <when>
          <test>
            <equal>
              <clip pos="1" side="tl" part="nbr"/>
              <lit-tag v="pl"/>
            </equal>
          </test>
          <let>
            <var n="numero"/>
            <lit-tag v="pl"/>
          </let>
        </when>
      </choose>
      <choose>
        <when>
          <test>
	    <!-- If word has GD or ND, we try to assign the
		 gender or number of the previous rule. If there is no
		 value for the gender or number variable from previous
		 rules, gender will be masculine and number singular.-->
            <equal>
              <clip pos="1" side="sl" part="gen"/>
              <lit-tag v="GD"/>
            </equal>
          </test>
          <choose>
            <when>
              <test>
                <equal>
                  <var n="genero"/>
                  <lit-tag v="f"/>
                </equal>
              </test>
              <let>
                <clip pos="1" side="sl" part="gen"/>
                <lit-tag v="f"/>
              </let>
            </when>
            <otherwise>
              <let>
                <clip pos="1" side="sl" part="gen"/>
                <lit-tag v="m"/>
              </let>
              <let>
                <var n="genero"/>
                <lit-tag v="m"/>
              </let>
            </otherwise>
          </choose>
        </when>
      </choose>
      <choose>
        <when>
          <test>
            <equal>
              <clip pos="1" side="tl" part="nbr"/>
              <lit-tag v="ND"/>
            </equal>
          </test>
          <choose>
            <when>
              <test>
                <equal>
                  <var n="numero"/>
                  <lit-tag v="pl"/>
                </equal>
              </test>
              <let>
                <clip pos="1" side="tl" part="nbr"/>
                <lit-tag v="pl"/>
              </let>
            </when>
            <otherwise>
              <let>
                <clip pos="1" side="tl" part="nbr"/>
                <lit-tag v="sg"/>
              </let>
              <let>
                <var n="numero"/>
                <lit-tag v="sg"/>
              </let>
            </otherwise>
          </choose>
        </when>
      </choose>
    </def-macro>
    <def-macro n="f_concord2" npar="2">
      <!--element 1= principal (nom). Element 2 = secundari (adj/det) 
          En anglès els noms poden ser sg, pl o ND (mai sp en els diccs actuals)-->
      <choose>
        <when>
          <test>
            <equal>
              <clip pos="1" side="tl" part="nbr"/>
              <lit-tag v="ND"/>
            </equal>
          </test>
          <choose>
            <when>
              <test>
                <or>
                  <equal>
                    <clip pos="2" side="tl" part="nbr"/>
                    <lit-tag v="sg"/>
                  </equal>
                  <equal>
                    <clip pos="2" side="tl" part="nbr"/>
                    <lit-tag v="pl"/>
                  </equal>
                </or>
              </test>
              <let>
                <clip pos="1" side="tl" part="nbr"/>
                <clip pos="2" side="tl" part="nbr"/>
              </let>
            </when>
            <when>
	      <!--'tres dijous' -->
              <test>
                <equal>
                  <clip pos="2" side="tl" part="a_num"/>
                  <lit-tag v="num"/>
                </equal>
              </test>
              <let>
                <clip pos="1" side="tl" part="nbr"/>
                <lit-tag v="pl"/>
              </let>
            </when>
          </choose>
        </when>
      </choose>
    </def-macro>
    <def-macro n="f_concord3" npar="3">
      <!--element 1= principal (nom). Element 2 i 3 = secundari (adj/det) 
          En anglès els noms poden ser sg, pl o ND (mai sp en els diccs actuals)-->
      <choose>
        <when>
          <test>
            <equal>
              <clip pos="1" side="tl" part="nbr"/>
              <lit-tag v="ND"/>
            </equal>
          </test>
          <choose>
            <when>
              <test>
                <or>
                  <equal>
                    <clip pos="2" side="tl" part="nbr"/>
                    <lit-tag v="sg"/>
                  </equal>
                  <equal>
                    <clip pos="2" side="tl" part="nbr"/>
                    <lit-tag v="pl"/>
                  </equal>
                </or>
              </test>
              <let>
                <clip pos="1" side="tl" part="nbr"/>
                <clip pos="2" side="tl" part="nbr"/>
              </let>
            </when>
            <when>
	      <!--'tres dijous' -->
              <test>
                <equal>
                  <clip pos="2" side="tl" part="a_num"/>
                  <lit-tag v="num"/>
                </equal>
              </test>
              <let>
                <clip pos="1" side="tl" part="nbr"/>
                <lit-tag v="pl"/>
              </let>
            </when>
            <when>
              <test>
                <or>
                  <equal>
                    <clip pos="3" side="tl" part="nbr"/>
                    <lit-tag v="sg"/>
                  </equal>
                  <equal>
                    <clip pos="3" side="tl" part="nbr"/>
                    <lit-tag v="pl"/>
                  </equal>
                </or>
              </test>
              <let>
                <clip pos="1" side="tl" part="nbr"/>
                <clip pos="3" side="tl" part="nbr"/>
              </let>
            </when>
            <when>
	      <!--'tres dijous' -->
              <test>
                <equal>
                  <clip pos="3" side="tl" part="a_num"/>
                  <lit-tag v="num"/>
                </equal>
              </test>
              <let>
                <clip pos="1" side="tl" part="nbr"/>
                <lit-tag v="pl"/>
              </let>
            </when>
          </choose>
        </when>
      </choose>
    </def-macro>
    <def-macro n="f_concord4" npar="4">
      <!--element 1= principal (nom). Element 2 i 3 = secundari (adj/det) 
          En anglès els noms poden ser sg, pl o ND (mai sp en els diccs actuals)-->
      <choose>
        <when>
          <test>
            <equal>
              <clip pos="1" side="tl" part="nbr"/>
              <lit-tag v="ND"/>
            </equal>
          </test>
          <choose>
            <when>
              <test>
                <or>
                  <equal>
                    <clip pos="2" side="tl" part="nbr"/>
                    <lit-tag v="sg"/>
                  </equal>
                  <equal>
                    <clip pos="2" side="tl" part="nbr"/>
                    <lit-tag v="pl"/>
                  </equal>
                </or>
              </test>
              <let>
                <clip pos="1" side="tl" part="nbr"/>
                <clip pos="2" side="tl" part="nbr"/>
              </let>
            </when>
            <when>
	      <!--'tres dijous' -->
              <test>
                <equal>
                  <clip pos="2" side="tl" part="a_num"/>
                  <lit-tag v="num"/>
                </equal>
              </test>
              <let>
                <clip pos="1" side="tl" part="nbr"/>
                <lit-tag v="pl"/>
              </let>
            </when>
            <when>
              <test>
                <or>
                  <equal>
                    <clip pos="3" side="tl" part="nbr"/>
                    <lit-tag v="sg"/>
                  </equal>
                  <equal>
                    <clip pos="3" side="tl" part="nbr"/>
                    <lit-tag v="pl"/>
                  </equal>
                </or>
              </test>
              <let>
                <clip pos="1" side="tl" part="nbr"/>
                <clip pos="3" side="tl" part="nbr"/>
              </let>
            </when>
            <when>
	      <!--'tres dijous' -->
              <test>
                <equal>
                  <clip pos="3" side="tl" part="a_num"/>
                  <lit-tag v="num"/>
                </equal>
              </test>
              <let>
                <clip pos="1" side="tl" part="nbr"/>
                <lit-tag v="pl"/>
              </let>
            </when>
            <when>
              <test>
                <or>
                  <equal>
                    <clip pos="4" side="tl" part="nbr"/>
                    <lit-tag v="sg"/>
                  </equal>
                  <equal>
                    <clip pos="4" side="tl" part="nbr"/>
                    <lit-tag v="pl"/>
                  </equal>
                </or>
              </test>
              <let>
                <clip pos="1" side="tl" part="nbr"/>
                <clip pos="4" side="tl" part="nbr"/>
              </let>
            </when>
            <when>
	      <!--'tres dijous' -->
              <test>
                <equal>
                  <clip pos="4" side="tl" part="a_num"/>
                  <lit-tag v="num"/>
                </equal>
              </test>
              <let>
                <clip pos="1" side="tl" part="nbr"/>
                <lit-tag v="pl"/>
              </let>
            </when>
          </choose>
        </when>
      </choose>
    </def-macro>
    <def-macro n="adv_adj" npar="2"><!-- (per a fer el comparatiu si cal: 'més fosc' = darker; i també per a canviar 'well' per 'very' davant adjectius )" -->
      <choose>
        <when>
          <test>
            <and>
              <equal caseless="yes">
                <clip pos="1" side="sl" part="lem"/>
                <lit v="plus"/>
              </equal>
              <equal>
                <clip pos="2" side="tl" part="a_adj"/>
                <lit-tag v="adj.sint"/>
              </equal>
            </and>
          </test>
          <let>
            <var n="adv_adjectiu"/>
            <concat>
              <clip pos="2" side="tl" part="lem"/>
              <clip pos="2" side="tl" part="a_adj"/>
              <lit-tag v="comp"/>
            </concat>
          </let>
        </when>
        <when>
          <test>
            <and>
              <equal caseless="yes">
                <clip pos="1" side="sl" part="lem"/>
                <lit v="beaucoup plus"/>
              </equal>
              <equal>
                <clip pos="2" side="tl" part="a_adj"/>
                <lit-tag v="adj.sint"/>
              </equal>
            </and>
          </test>
          <let>
            <clip pos="1" side="tl" part="lem"/>
            <lit v="much"/>
          </let>
          <let>
            <var n="adv_adjectiu"/>
            <concat>
              <clip pos="1" side="tl" part="whole"/>
              <lit v="$ ^"/>
              <clip pos="2" side="tl" part="lem"/>
              <clip pos="2" side="tl" part="a_adj"/>
              <lit-tag v="comp"/>
            </concat>
          </let>
        </when>
        <when>
          <test>
            <and>
              <equal caseless="yes">
                <clip pos="1" side="sl" part="lem"/>
                <lit v="bien"/>
              </equal>
              <not>
                <equal>
                  <clip pos="2" side="sl" part="a_adj"/>
                  <lit-tag v="vblex.pp"/>
                </equal>
              </not>
            </and>
          </test>
          <let>
            <var n="adv_adjectiu"/>
            <concat>
              <lit v="very"/>
              <lit-tag v="preadv"/>
              <lit v="$ ^"/>
              <clip pos="2" side="tl" part="lem"/>
              <clip pos="2" side="tl" part="a_adj"/>
            </concat>
          </let>
        </when>
        <otherwise>
          <let>
            <var n="adv_adjectiu"/>
            <concat>
              <clip pos="1" side="tl" part="whole"/>
              <lit v="$ ^"/>
              <clip pos="2" side="tl" part="lem"/>
              <clip pos="2" side="tl" part="a_adj"/>
            </concat>
          </let>
        </otherwise>
      </choose>
    </def-macro>

    <def-macro n="det_adv_adj" npar="3"><!-- (per a fer el comparatiu i superlatiu si cal: 'més fosc' = 'darker'; 'el més fosc' = 'the darkest')" -->
      <choose>
        <when>
          <test>
            <and>
              <equal caseless="yes">
                <clip pos="2" side="sl" part="lem"/>
                <lit v="plus"/>
              </equal>
              <equal>
                <clip pos="3" side="tl" part="a_adj"/>
                <lit-tag v="adj.sint"/>
              </equal>
            </and>
          </test>
          <choose>
            <when>
              <test>
                <equal>
                  <clip pos="1" side="sl" part="a_det"/>
                  <lit-tag v="det.def"/>
                </equal>
              </test>
              <let>
                <var n="adv_adjectiu"/>
                <concat>
                  <clip pos="3" side="tl" part="lem"/>
                  <clip pos="3" side="tl" part="a_adj"/>
                  <lit-tag v="sup"/>
                </concat>
              </let>
            </when>
            <otherwise>
              <let>
                <var n="adv_adjectiu"/>
                <concat>
                  <clip pos="3" side="tl" part="lem"/>
                  <clip pos="3" side="tl" part="a_adj"/>
                  <lit-tag v="comp"/>
                </concat>
              </let>
            </otherwise>
          </choose>
        </when>

        <when>
          <test>
            <and>
              <equal caseless="yes">
                <clip pos="2" side="sl" part="lem"/>
                <lit v="beaucoup plus"/>
              </equal>
              <equal>
                <clip pos="3" side="tl" part="a_adj"/>
                <lit-tag v="adj.sint"/>
              </equal>
            </and>
          </test>
          <let>
            <clip pos="2" side="tl" part="lem"/>
            <lit v="much"/>
          </let>
          <let>
            <var n="adv_adjectiu"/>
            <concat>
              <clip pos="2" side="tl" part="whole"/>
              <lit v="$ ^"/>
              <clip pos="3" side="tl" part="lem"/>
              <clip pos="3" side="tl" part="a_adj"/>
              <lit-tag v="comp"/>
            </concat>
          </let>
        </when>
        <when>
          <test>
            <and>
              <equal caseless="yes">
                <clip pos="2" side="sl" part="lem"/>
                <lit v="plus"/>
              </equal>
              <equal>
                <clip pos="1" side="sl" part="a_det"/>
                <lit-tag v="det.def"/>
              </equal>
            </and>
          </test>
          <let>
            <clip pos="2" side="tl" part="lem"/>
            <lit v="most"/>
          </let>
          <let>
            <var n="adv_adjectiu"/>
            <concat>
              <clip pos="2" side="tl" part="whole"/>
              <lit v="$ ^"/>
              <clip pos="3" side="tl" part="lem"/>
              <clip pos="3" side="tl" part="a_adj"/>
            </concat>
          </let>
        </when>
        <when>
          <test>
            <and>
              <equal caseless="yes">
                <clip pos="2" side="sl" part="lem"/>
                <lit v="bien"/>
              </equal>
              <not>
                <equal>
                  <clip pos="3" side="sl" part="a_adj"/>
                  <lit-tag v="vblex.pp"/>
                </equal>
              </not>
            </and>
          </test>
          <let>
            <var n="adv_adjectiu"/>
            <concat>
              <lit v="very"/>
              <lit-tag v="preadv"/>
              <lit v="$ ^"/>
              <clip pos="3" side="tl" part="lem"/>
              <clip pos="3" side="tl" part="a_adj"/>
            </concat>
          </let>
        </when>
        <otherwise>
          <let>
            <var n="adv_adjectiu"/>
            <concat>
              <clip pos="2" side="tl" part="whole"/>
              <lit v="$ ^"/>
              <clip pos="3" side="tl" part="lem"/>
              <clip pos="3" side="tl" part="a_adj"/>
            </concat>
          </let>
        </otherwise>
      </choose>
    </def-macro>


    <def-macro n="el_millor_pitjor" npar="2"><!-- per a crear forma superlativa quan lema és superlatiu i l'article és definit o poss -->
      <choose>
        <when>
          <test>
            <and>
              <or>
                <equal>
                  <clip pos="1" side="tl" part="a_det"/>
                  <lit-tag v="det.def"/>
                </equal>
                <equal>
                  <clip pos="1" side="tl" part="a_det"/>
                  <lit-tag v="det.pos"/>
                </equal>
              </or>
              <or>
                <equal>
                  <clip pos="2" side="sl" part="lem"/>
                  <lit v="meilleur"/>
                </equal>
                <equal>
                  <clip pos="2" side="sl" part="lem"/>
                  <lit v="pire"/>
                </equal>
              </or>
            </and>
          </test>
          <let>
            <clip pos="2" side="tl" part="a_adj"/>
            <lit-tag v="adj.sint.sup"/>
          </let>
        </when>
      </choose>
    </def-macro>

    <def-macro n="conj_verb1" npar="1"><!--conjuga un verb -->

      <choose>
        <when>
          <test><!--Si és verb 'ser' p1 o p3 en present o passat (o subjuntiu) té una conjugació pròpia en anglès. Inclou 'ser' i 'estar', tots dos són 'vbser' en anglès (to be) -->
            <and>
              <equal>
                <clip pos="1" side="tl" part="a_verb"/>
                <lit-tag v="vbser"/>
              </equal>
              <or>
                <equal>
                  <clip pos="1" side="sl" part="temps"/>
                  <lit-tag v="ifi"/>
                </equal>
                <equal>
                  <clip pos="1" side="sl" part="temps"/>
                  <lit-tag v="pii"/>
                </equal>
                <equal>
                  <clip pos="1" side="sl" part="temps"/>
                  <lit-tag v="pis"/>
                </equal>
                <equal>
                  <clip pos="1" side="sl" part="temps"/>
                  <lit-tag v="fts"/>
                </equal>
                <equal>
                  <clip pos="1" side="sl" part="temps"/>
                  <lit-tag v="prs"/>
                </equal>
              </or>
              <or>
                <equal>
                  <clip pos="1" side="sl" part="pers"/>
                  <lit-tag v="p1"/>
                </equal>
                <equal>
                  <clip pos="1" side="sl" part="pers"/>
                  <lit-tag v="p3"/>
                </equal>
              </or>
              <equal>
                <clip pos="1" side="sl" part="nbr"/>
                <lit-tag v="sg"/>
              </equal>
            </and>
          </test>
          <let>
            <clip pos="1" side="tl" part="temps"/>
            <lit-tag v="past"/>
          </let>
          <let>
            <var n="temps_chunk"/>
            <lit-tag v="past"/>
          </let>
          <let>
            <var n="lema_SV"/>
            <lit v="verbcj"/>
          </let>
          <let>
            <var n="verbfinal"/>
            <concat>
              <clip pos="1" side="tl" part="lemh"/>
              <clip pos="1" side="tl" part="a_verb"/>
              <clip pos="1" side="tl" part="sep"/>
              <clip pos="1" side="tl" part="temps"/>
              <clip pos="1" side="tl" part="pers"/>
              <clip pos="1" side="tl" part="nbr"/>
            </concat>
          </let>
        </when>
        <when>
          <test>
            <and>
              <equal>
                <clip pos="1" side="tl" part="a_verb"/>
                <lit-tag v="vbser"/>
              </equal>
              <equal>
                <clip pos="1" side="sl" part="temps"/>
                <lit-tag v="pri"/>
              </equal>
              <or>
                <equal>
                  <clip pos="1" side="sl" part="pers"/>
                  <lit-tag v="p1"/>
                </equal>
                <equal>
                  <clip pos="1" side="sl" part="pers"/>
                  <lit-tag v="p3"/>
                </equal>
              </or>
              <equal>
                <clip pos="1" side="sl" part="nbr"/>
                <lit-tag v="sg"/>
              </equal>
            </and>
          </test>
          <let>
            <var n="temps_chunk"/>
            <clip pos="1" side="tl" part="temps"/>
          </let>
          <let>
            <var n="lema_SV"/>
            <lit v="verbcj"/>
          </let>
          <let>
            <var n="verbfinal"/>
            <concat>
              <clip pos="1" side="tl" part="lemh"/>
              <clip pos="1" side="tl" part="a_verb"/>
              <clip pos="1" side="tl" part="sep"/>
              <clip pos="1" side="tl" part="temps"/>
              <clip pos="1" side="tl" part="pers"/>
              <clip pos="1" side="tl" part="nbr"/>
            </concat>
          </let>
        </when>

        <when>
          <test><!--La resta de verbs tenen també prs i nbr per a p3 sg, excepte auxiliars (can). -->
            <and>
              <equal>
                <clip pos="1" side="sl" part="temps"/>
                <lit-tag v="pri"/>
              </equal>
              <equal>
                <clip pos="1" side="sl" part="pers"/>
                <lit-tag v="p3"/>
              </equal>
              <equal>
                <clip pos="1" side="sl" part="nbr"/>
                <lit-tag v="sg"/>
              </equal>
              <not>
                <equal caseless="yes">
                  <clip pos="1" side="sl" part="lem"/>
                  <lit v="pouvoir"/>
                </equal>
              </not>
            </and>
          </test>

          <let>
            <var n="lema_SV"/>
            <lit v="verbcj"/>
          </let>
          <let>
            <var n="temps_chunk"/>
            <clip pos="1" side="tl" part="temps"/>
          </let>
          <let>
            <var n="verbfinal"/>
            <concat>
              <clip pos="1" side="tl" part="lemh"/>
              <clip pos="1" side="tl" part="a_verb"/>
              <clip pos="1" side="tl" part="sep"/>
              <clip pos="1" side="tl" part="temps"/>
              <clip pos="1" side="tl" part="pers"/>
              <clip pos="1" side="tl" part="nbr"/>
            </concat>
          </let>

        </when>
        <otherwise><!--la resta de formes verbals no tenen pers i nbr en anglès -->
          <choose>
            <when>
              <test>
                <and>
                  <equal>
                    <clip pos="1" side="sl" part="temps"/>
                    <lit-tag v="cni"/>
                  </equal>
                  <not>
                    <equal caseless="yes">
                      <clip pos="1" side="sl" part="lem"/>
                      <lit v="pouvoir"/>
                    </equal>
                  </not>
                </and>
              </test>
              <let>
                <var n="temps_chunk"/>
                <clip pos="1" side="sl" part="temps"/>
              </let>
              <let>
                <clip pos="1" side="tl" part="temps"/>
                <lit-tag v="inf"/>
              </let>
              <let>
                <var n="lema_SV"/>
                <lit v="aux_verb"/>
              </let>
              <let>
                <var n="verbfinal"/>
                <concat>
                  <lit v="would"/>
                  <lit-tag v="vaux.inf"/>
                  <lit v="$ ^"/>
                  <clip pos="1" side="tl" part="lemh"/>
                  <clip pos="1" side="tl" part="a_verb"/>
                  <clip pos="1" side="tl" part="sep"/>
                  <clip pos="1" side="tl" part="temps"/>
                </concat>
              </let>


            </when>
            <when>
              <test>
                <and>
                  <equal>
                    <clip pos="1" side="sl" part="temps"/>
                    <lit-tag v="cni"/>
                  </equal>
                  <equal caseless="yes">
                    <clip pos="1" side="sl" part="lem"/>
                    <lit v="pouvoir"/>
                  </equal>
                </and>
              </test>
              <let>
                <clip pos="1" side="tl" part="temps"/>
                <lit-tag v="past"/>
              </let>
              <let>
                <var n="temps_chunk"/>
                <clip pos="1" side="sl" part="temps"/>
              </let>
              <let>
                <var n="lema_SV"/>
                <lit v="verbcj"/>
              </let>
              <let>
                <var n="verbfinal"/>
                <concat>
                  <clip pos="1" side="tl" part="lemh"/>
                  <clip pos="1" side="tl" part="a_verb"/>
                  <clip pos="1" side="tl" part="sep"/>
                  <clip pos="1" side="tl" part="temps"/>
                </concat>
              </let>
            </when>

            <when>
              <test>
                <equal>
                  <clip pos="1" side="sl" part="temps"/>
                  <lit-tag v="fti"/>
                </equal>
              </test>
              <let>
                <clip pos="1" side="tl" part="temps"/>
                <lit-tag v="inf"/>
              </let>
              <let>
                <var n="temps_chunk"/>
                <clip pos="1" side="sl" part="temps"/>
              </let>
              <let>
                <var n="lema_SV"/>
                <lit v="aux_verb"/>
              </let>
              <choose>
                <when>
                  <test>
                    <equal caseless="yes">
                      <clip pos="1" side="sl" part="lem"/>
                      <lit v="pouvoir"/>
                    </equal>
                  </test>
                  <let>
                    <clip pos="1" side="tl" part="lem"/>
                    <get-case-from pos="1">
                      <lit v="be able to"/>
                    </get-case-from>
                  </let>
                  <let>
                    <clip pos="1" side="tl" part="a_verb"/>
                    <lit-tag v="vbmod"/>
                  </let>
                </when>
              </choose>
              <let>
                <var n="verbfinal"/>
                <concat>
                  <lit v="will"/>
                  <lit-tag v="vaux.inf"/>
                  <lit v="$ ^"/>
                  <clip pos="1" side="tl" part="lemh"/>
                  <clip pos="1" side="tl" part="a_verb"/>
                  <clip pos="1" side="tl" part="sep"/>
                  <clip pos="1" side="tl" part="temps"/>
                </concat>
              </let>

            </when>

            <when>
              <test>
                <or>
                  <equal>
                    <clip pos="1" side="sl" part="temps"/>
                    <lit-tag v="pri"/><!--dic -->
                  </equal>
                  <equal>
                    <clip pos="1" side="sl" part="temps"/>
                    <lit-tag v="prs"/><!--digui -->
                  </equal>
                  <equal>
                    <clip pos="1" side="sl" part="temps"/>
                    <lit-tag v="imp"/>
                  </equal>
                </or>
              </test>
              <let>
                <clip pos="1" side="tl" part="temps"/>
                <lit-tag v="pres"/>
              </let>

              <let>
                <var n="temps_chunk"/>
                <clip pos="1" side="sl" part="temps"/>
              </let>
              <let>
                <var n="lema_SV"/>
                <lit v="verbcj"/>
              </let>

              <let>
                <var n="verbfinal"/>
                <concat>
                  <clip pos="1" side="tl" part="lemh"/>
                  <clip pos="1" side="tl" part="a_verb"/>
                  <clip pos="1" side="tl" part="sep"/>
                  <clip pos="1" side="tl" part="temps"/>
                </concat>
              </let>
            </when>
            <when>
              <test>
                <or>
                  <equal>
                    <clip pos="1" side="sl" part="temps"/>
                    <lit-tag v="ifi"/><!--digué -->
                  </equal>
                  <equal>
                    <clip pos="1" side="sl" part="temps"/>
                    <lit-tag v="pii"/><!--deia -->
                  </equal>
                  <equal>
                    <clip pos="1" side="sl" part="temps"/>
                    <lit-tag v="pis"/><!--digués -->
                  </equal>
                  <equal>
                    <clip pos="1" side="sl" part="temps"/>
                    <lit-tag v="fts"/><!--dijere -->
                  </equal>
                </or>
              </test>
              <let>
                <clip pos="1" side="tl" part="temps"/>
                <lit-tag v="past"/>
              </let>
              <let>
                <var n="temps_chunk"/>
                <clip pos="1" side="sl" part="temps"/>
              </let>
              <let>
                <var n="lema_SV"/>
                <lit v="verbcj"/>
              </let>
              <let>
                <var n="verbfinal"/>
                <concat>
                  <clip pos="1" side="tl" part="lemh"/>
                  <clip pos="1" side="tl" part="a_verb"/>
                  <clip pos="1" side="tl" part="sep"/>
                  <clip pos="1" side="tl" part="temps"/>
                </concat>
              </let>
            </when>
            <otherwise><!--les formes no personals (inf i ger) -->

              <let>
                <var n="temps_chunk"/>
                <clip pos="1" side="sl" part="temps"/>
              </let>
              <let>
                <var n="verbfinal"/>
                <concat>
                  <clip pos="1" side="tl" part="lemh"/>
                  <clip pos="1" side="tl" part="a_verb"/>
                  <clip pos="1" side="tl" part="sep"/>
                  <clip pos="1" side="tl" part="temps"/>
                </concat>
              </let>
            </otherwise>
          </choose>
        </otherwise>
      </choose>
    </def-macro>


    <def-macro n="conj_haverhi_pp" npar="1"><!--conjuga el verb haver-hi quan va seguit de pp -->
      <let>
	<var n="pers_chunk"/>
	<clip pos="1" side="sl" part="pers"/>
      </let>
      <choose>
	<when>
	  <test>
            <or>
              <equal>
		<clip pos="1" side="sl" part="temps"/>
		<lit-tag v="pri"/>
              </equal>
              <equal>
		<clip pos="1" side="sl" part="temps"/>
		<lit-tag v="prs"/>
              </equal>
              <equal>
		<clip pos="1" side="sl" part="temps"/>
		<lit-tag v="imp"/>
              </equal>
            </or>
	  </test>
	  <let>
            <clip pos="1" side="tl" part="temps"/>
            <lit-tag v="pri"/>
	  </let>
	  <let>
            <var n="temps_chunk"/>
            <clip pos="1" side="tl" part="temps"/>
	  </let>
	  <let>
            <var n="nbr_chunk"/>
            <lit-tag v="ND"/>
	  </let>
	  <let>
            <var n="lema_SV"/>
            <lit v="haverhi_pp"/>
	  </let>
	  <let>
            <var n="verbfinal"/>
            <concat>
              <clip pos="1" side="tl" part="lemh"/>
              <clip pos="1" side="tl" part="a_verb"/>
              <clip pos="1" side="tl" part="temps"/>
              <clip pos="1" side="tl" part="pers"/>
              <lit-tag v="5"/>
            </concat>
	  </let>
	</when>
	<when>
	  <test>
            <or>
              <equal>
		<clip pos="1" side="sl" part="temps"/>
		<lit-tag v="ifi"/>
              </equal>
              <equal>
		<clip pos="1" side="sl" part="temps"/>
		<lit-tag v="pii"/>
              </equal>
              <equal>
		<clip pos="1" side="sl" part="temps"/>
		<lit-tag v="pis"/>
              </equal>
              <equal>
		<clip pos="1" side="sl" part="temps"/>
		<lit-tag v="fts"/>
              </equal>
            </or>
	  </test>
	  <let>
            <clip pos="1" side="tl" part="temps"/>
            <lit-tag v="past"/>
	  </let>

	  <let>
            <var n="temps_chunk"/>
            <clip pos="1" side="tl" part="temps"/>
	  </let>
	  <let>
            <var n="nbr_chunk"/>
            <clip pos="1" side="sl" part="nbr"/>
	  </let>
	  <let>
            <var n="lema_SV"/>
            <lit v="haverhi_pp"/>
	  </let>
	  <let>
            <var n="verbfinal"/>
            <concat>
              <clip pos="1" side="tl" part="lemh"/>
              <clip pos="1" side="tl" part="a_verb"/>
              <clip pos="1" side="tl" part="temps"/>
            </concat>
	  </let>
	</when>
	<when>
	  <test>
            <equal>
              <clip pos="1" side="sl" part="temps"/>
              <lit-tag v="cni"/>
            </equal>

	  </test>

	  <let>
            <var n="temps_chunk"/>
            <clip pos="1" side="sl" part="temps"/>
	  </let>
	  <let>
            <clip pos="1" side="tl" part="temps"/>
            <lit-tag v="inf"/>
	  </let>
	  <let>
            <var n="nbr_chunk"/>
            <clip pos="1" side="sl" part="nbr"/>
	  </let>
	  <let>
            <var n="lema_SV"/>
            <lit v="aux_haverhi_pp"/>
	  </let>
	  <let>
            <var n="verbfinal"/>
            <concat>
              <lit v="would"/>
              <lit-tag v="vaux.inf"/>
              <lit v="$ ^"/>
              <clip pos="1" side="tl" part="lemh"/>
              <clip pos="1" side="tl" part="a_verb"/>
              <clip pos="1" side="tl" part="temps"/>
            </concat>
	  </let>
	</when>
	<when>
	  <test>
            <equal>
              <clip pos="1" side="sl" part="temps"/>
              <lit-tag v="fti"/>
            </equal>
	  </test>
	  <let>
            <var n="temps_chunk"/>
            <clip pos="1" side="sl" part="temps"/>
	  </let>
	  <let>
            <var n="nbr_chunk"/>
            <clip pos="1" side="sl" part="nbr"/>
	  </let>
	  <let>
            <clip pos="1" side="tl" part="temps"/>
            <lit-tag v="inf"/>
	  </let>
	  <let>
            <var n="lema_SV"/>
            <lit v="aux_haverhi_pp"/>
	  </let>
	  <let>
            <var n="verbfinal"/>
            <concat>
              <lit v="will"/>
              <lit-tag v="vaux.inf"/>
              <lit v="$ ^"/>
              <clip pos="1" side="tl" part="lemh"/>
              <clip pos="1" side="tl" part="a_verb"/>
              <clip pos="1" side="tl" part="temps"/>
            </concat>
	  </let>
	</when>
      </choose>
    </def-macro>


    <def-macro n="conj_haverhi" npar="1"><!--conjuga el verb haver-hi -->
      <let>
	<var n="pers_chunk"/>
	<clip pos="1" side="sl" part="pers"/>
      </let>
      <choose>
	<when>
	  <test>
            <or>
              <equal>
		<clip pos="1" side="sl" part="temps"/>
		<lit-tag v="pri"/>
              </equal>
              <equal>
		<clip pos="1" side="sl" part="temps"/>
		<lit-tag v="prs"/>
              </equal>
              <equal>
		<clip pos="1" side="sl" part="temps"/>
		<lit-tag v="imp"/>
              </equal>
            </or>
	  </test>
	  <let>
            <clip pos="1" side="tl" part="temps"/>
            <lit-tag v="pri"/>
	  </let>
	  <let>
            <var n="temps_chunk"/>
            <clip pos="1" side="tl" part="temps"/>
	  </let>
	  <let>
            <var n="nbr_chunk"/>
            <lit-tag v="ND"/>
	  </let>
	  <let>
            <var n="lema_SV"/>
            <lit v="haverhi"/>
	  </let>
	  <let>
            <var n="verbfinal"/>
            <concat>
              <clip pos="1" side="tl" part="lemh"/>
              <clip pos="1" side="tl" part="a_verb"/>
              <clip pos="1" side="tl" part="temps"/>
              <clip pos="1" side="tl" part="pers"/>
              <lit-tag v="5"/>
            </concat>
	  </let>
	</when>
	<when>
	  <test>
            <or>
              <equal>
		<clip pos="1" side="sl" part="temps"/>
		<lit-tag v="ifi"/>
              </equal>
              <equal>
		<clip pos="1" side="sl" part="temps"/>
		<lit-tag v="pii"/>
              </equal>
              <equal>
		<clip pos="1" side="sl" part="temps"/>
		<lit-tag v="pis"/>
              </equal>
              <equal>
		<clip pos="1" side="sl" part="temps"/>
		<lit-tag v="fts"/>
              </equal>
            </or>
	  </test>
	  <let>
            <clip pos="1" side="tl" part="temps"/>
            <lit-tag v="past"/>
	  </let>

	  <let>
            <var n="temps_chunk"/>
            <clip pos="1" side="tl" part="temps"/>
	  </let>
	  <let>
            <var n="nbr_chunk"/>
            <lit-tag v="ND"/>
	  </let>
	  <let>
            <var n="lema_SV"/>
            <lit v="haverhi"/>
	  </let>
	  <let>
            <var n="verbfinal"/>
            <concat>
              <clip pos="1" side="tl" part="lemh"/>
              <clip pos="1" side="tl" part="a_verb"/>
              <clip pos="1" side="tl" part="temps"/>
              <clip pos="1" side="tl" part="pers"/>
              <lit-tag v="5"/>
            </concat>
	  </let>
	</when>
	<when>
	  <test>
            <equal>
              <clip pos="1" side="sl" part="temps"/>
              <lit-tag v="cni"/>
            </equal>


	  </test>

	  <let>
            <var n="temps_chunk"/>
            <clip pos="1" side="sl" part="temps"/>
	  </let>
	  <let>
            <clip pos="1" side="tl" part="temps"/>
            <lit-tag v="inf"/>
	  </let>
	  <let>
            <var n="nbr_chunk"/>
            <clip pos="1" side="sl" part="nbr"/>
	  </let>
	  <let>
            <var n="lema_SV"/>
            <lit v="aux_haverhi"/>
	  </let>
	  <let>
            <var n="verbfinal"/>
            <concat>
              <lit v="would"/>
              <lit-tag v="vaux.inf"/>
              <lit v="$ ^"/>
              <clip pos="1" side="tl" part="lemh"/>
              <clip pos="1" side="tl" part="a_verb"/>
              <clip pos="1" side="tl" part="temps"/>
            </concat>
	  </let>
	</when>
	<when>
	  <test>
            <equal>
              <clip pos="1" side="sl" part="temps"/>
              <lit-tag v="fti"/>
            </equal>
	  </test>
	  <let>
            <var n="temps_chunk"/>
            <clip pos="1" side="sl" part="temps"/>
	  </let>
	  <let>
            <var n="nbr_chunk"/>
            <clip pos="1" side="sl" part="nbr"/>
	  </let>
	  <let>
            <clip pos="1" side="tl" part="temps"/>
            <lit-tag v="inf"/>
	  </let>
	  <let>
            <var n="lema_SV"/>
            <lit v="aux_haverhi"/>
	  </let>
	  <let>
            <var n="verbfinal"/>
            <concat>
              <lit v="will"/>
              <lit-tag v="vaux.inf"/>
              <lit v="$ ^"/>
              <clip pos="1" side="tl" part="lemh"/>
              <clip pos="1" side="tl" part="a_verb"/>
              <clip pos="1" side="tl" part="temps"/>
            </concat>
	  </let>
	</when>
      </choose>
    </def-macro>
  </section-def-macros>

  <section-rules>
    <!--*************************************** REGLES DE SN ******************************************** -->
    <rule comment="REGLA: NOM (per a col·locar la cua en les multiparaules amb g">
      <pattern>
        <pattern-item n="nom"/>
      </pattern>
      <action>
        <call-macro n="firstWord">
          <with-param pos="1"/>
        </call-macro>
        <call-macro n="tipus_nom">
          <with-param pos="1"/>
        </call-macro>
        <out>
          <chunk name="nom" case="caseFirstWord">
            <tags>
              <tag><lit-tag v="SN"/></tag>
              <tag><clip pos="1" side="sl" part="gen"/></tag>
	      <!--es manté per finalitats informatives -->
              <tag><clip pos="1" side="tl" part="nbr"/></tag>
              <tag><var n="tipusnom"/></tag>
            </tags>
            <lu>
              <clip pos="1" side="tl" part="lemh"/>
              <clip pos="1" side="tl" part="a_nom"/>
              <clip pos="1" side="tl" part="nbr" link-to="3"/>
              <clip pos="1" side="tl" part="lemq"/>
            </lu>
          </chunk>
        </out>
      </action>
    </rule>
    <rule comment="REGLA: ANTROPÒNIM">
      <pattern>
        <pattern-item n="ant"/>
      </pattern>
      <action>
        <call-macro n="firstWord">
          <with-param pos="1"/>
        </call-macro>
        <out>
          <chunk name="ant" case="caseFirstWord">
            <tags>
              <tag><lit-tag v="SN"/></tag>
              <tag><clip pos="1" side="tl" part="gen"/></tag>
              <tag><clip pos="1" side="tl" part="nbr"/></tag>
            </tags>
            <lu>
              <clip pos="1" side="tl" part="whole"/>
            </lu>
          </chunk>
        </out>
      </action>
    </rule>
    <rule comment="REGLA: DET NOM">
      <pattern>
        <pattern-item n="det"/>
        <pattern-item n="nom"/>
      </pattern>
      <action>
        <call-macro n="tipus_nom">
          <with-param pos="2"/>
        </call-macro>
        <call-macro n="firstWord">
          <with-param pos="1"/>
        </call-macro>
        <choose>
	  <!-- la france->francia -->
          <when>
            <test>
              <or>
                <equal>
                  <clip pos="2" side="tl" part="a_nom"/>
                  <lit-tag v="np.top"/>
                </equal>
                <equal>
                  <clip pos="2" side="tl" part="a_nom"/>
                  <lit-tag v="np.top"/>
                </equal>
              </or>
            </test>
            <call-macro n="f_concord1">
              <with-param pos="2"/>
            </call-macro>
            <call-macro n="tipus_nom">
              <with-param pos="3"/>
            </call-macro>
            <out>
              <chunk name="nom" case="caseFirstWord">
                <tags>
                  <tag><lit-tag v="SN"/></tag>
                  <tag><clip pos="1" side="sl" part="gen"/></tag>
                  <tag><clip pos="1" side="tl" part="nbr"/></tag>
                  <tag><var n="tipusnom"/></tag>
                </tags>
                <lu>
                  <clip pos="2" side="tl" part="lem"/>
                  <clip pos="2" side="tl" part="tags"/>
                </lu>
              </chunk>
            </out>
            <call-macro n="f_bcond">
              <with-param pos="1"/>
              <with-param pos="2"/>
            </call-macro>
          </when>
          <otherwise>
            <call-macro n="f_concord2">
              <with-param pos="2"/>
              <with-param pos="1"/>
            </call-macro>
            <out>
              <chunk name="det_nom" case="caseFirstWord">
                <tags>
                  <tag><lit-tag v="SN"/></tag>
                  <tag><clip pos="2" side="sl" part="gen"/></tag>
                  <tag><clip pos="2" side="tl" part="nbr"/></tag>
                </tags>
                <lu>
                  <clip pos="1" side="tl" part="lem"/>
                  <clip pos="1" side="tl" part="a_det"/>
                  <clip pos="1" side="tl" part="nbr" link-to="3"/>
                </lu>
                <b pos="1"/>
                <lu>
                  <clip pos="2" side="tl" part="lemh"/>
                  <clip pos="2" side="tl" part="a_nom"/>
                  <clip pos="2" side="tl" part="nbr" link-to="3"/>
                  <clip pos="2" side="tl" part="lemq"/>
                </lu>
              </chunk>
            </out>
          </otherwise>
        </choose>
        <let>
          <var n="caseFirstWord"/>
          <lit v="aa"/>
        </let>
      </action>
    </rule>
    <rule comment="REGLA: PREDET DET NOM">
      <pattern>
        <pattern-item n="det"/>
        <pattern-item n="det"/>
        <pattern-item n="nom"/>
      </pattern>
      <action>
        <call-macro n="firstWord">
          <with-param pos="1"/>
        </call-macro>
        <call-macro n="f_concord3">
          <with-param pos="3"/>
          <with-param pos="1"/>
          <with-param pos="2"/>
        </call-macro>
        <call-macro n="tipus_nom">
          <with-param pos="3"/>
        </call-macro>
        <out>
          <chunk name="predet_det_nom" case="caseFirstWord">
            <tags>
              <tag><lit-tag v="SN"/></tag>
              <tag><clip pos="3" side="sl" part="gen"/></tag>
              <tag><clip pos="3" side="tl" part="nbr"/></tag>
              <tag><var n="tipusnom"/></tag>
            </tags>
            <lu>
              <clip pos="1" side="tl" part="lemh"/>
              <clip pos="1" side="tl" part="a_det"/>
              <clip pos="1" side="tl" part="nbr_sense_sp" link-to="3"/>
              <clip pos="1" side="tl" part="nbr_sp"/>
            </lu>
            <b pos="1"/>
            <lu>
              <clip pos="2" side="tl" part="lemh"/>
              <clip pos="2" side="tl" part="a_det"/>
              <clip pos="2" side="tl" part="nbr_sense_sp" link-to="3"/>
              <clip pos="2" side="tl" part="nbr_sp"/>
            </lu>
            <b pos="2"/>
            <lu>
              <clip pos="3" side="tl" part="lemh"/>
              <clip pos="3" side="tl" part="a_nom"/>
              <clip pos="3" side="tl" part="nbr_sense_sp" link-to="3"/>
              <clip pos="3" side="tl" part="nbr_sp"/>
              <clip pos="3" side="tl" part="lemq"/>
            </lu>
          </chunk>
        </out>
        <let>
          <var n="caseFirstWord"/>
          <lit v="aa"/>
        </let>
      </action>
    </rule>
    <rule comment="REGLA: DET NUM">
      <pattern>
        <pattern-item n="det"/>
        <pattern-item n="num"/>
      </pattern>
      <action>
        <call-macro n="firstWord">
          <with-param pos="1"/>
        </call-macro>
        <call-macro n="f_concord2">
          <with-param pos="2"/>
          <with-param pos="1"/>
        </call-macro>
        <out>
          <chunk name="det_num" case="caseFirstWord">
            <tags>
              <tag><lit-tag v="SN"/></tag>
              <tag><clip pos="2" side="sl" part="gen"/></tag>
              <tag><clip pos="2" side="tl" part="nbr"/></tag>
            </tags>
            <lu>
              <clip pos="1" side="tl" part="lemh"/>
              <clip pos="1" side="tl" part="a_det"/>
              <clip pos="1" side="tl" part="nbr_sense_sp" link-to="3"/>
              <clip pos="1" side="tl" part="nbr_sp"/>
            </lu>
            <b pos="1"/>
            <lu>
              <clip pos="2" side="tl" part="lem"/>
              <clip pos="2" side="tl" part="a_num"/>
              <clip pos="2" side="tl" part="nbr_sense_sp" link-to="3"/>
              <clip pos="2" side="tl" part="nbr_sp"/>
            </lu>
          </chunk>
        </out>
        <let>
          <var n="caseFirstWord"/>
          <lit v="aa"/>
        </let>
      </action>
    </rule>
    <rule comment="REGLA: NUM NOM">
      <pattern>
        <pattern-item n="num"/>
        <pattern-item n="nom"/>
      </pattern>
      <action>
        <call-macro n="firstWord">
          <with-param pos="1"/>
        </call-macro>
        <call-macro n="f_concord2">
          <with-param pos="2"/>
          <with-param pos="1"/>
        </call-macro>
        <call-macro n="tipus_nom">
          <with-param pos="2"/>
        </call-macro>
        <out>
          <chunk name="num_nom" case="caseFirstWord">
            <tags>
              <tag><lit-tag v="SN"/></tag>
              <tag><clip pos="2" side="sl" part="gen"/></tag>
              <tag><clip pos="2" side="tl" part="nbr"/></tag>
              <tag><var n="tipusnom"/></tag>
            </tags>
            <lu>
              <clip pos="1" side="tl" part="lem"/>
              <clip pos="1" side="tl" part="tags"/>
            </lu>
            <b pos="1"/>
            <lu>
              <clip pos="2" side="tl" part="lemh"/>
              <clip pos="2" side="tl" part="a_nom"/>
              <clip pos="2" side="tl" part="nbr" link-to="3"/>
              <clip pos="2" side="tl" part="lemq"/>
            </lu>
          </chunk>
        </out>
      </action>
    </rule>
    <rule comment="REGLA: NOM ADJ">
      <pattern>
        <pattern-item n="nom"/>
        <pattern-item n="adjec"/>
      </pattern>
      <action>
        <call-macro n="f_concord2">
          <with-param pos="1"/>
          <with-param pos="2"/>
        </call-macro>
        <call-macro n="firstWord">
          <with-param pos="1"/>
        </call-macro>
        <call-macro n="tipus_nom">
          <with-param pos="1"/>
        </call-macro>
        <out>
          <chunk name="nom_adj" case="caseFirstWord">
            <tags>
              <tag><lit-tag v="SN"/></tag>
              <tag><clip pos="1" side="sl" part="gen"/></tag>
              <tag><clip pos="1" side="tl" part="nbr"/></tag>
              <tag><var n="tipusnom"/></tag>
            </tags>
            <lu>
              <clip pos="2" side="tl" part="lem"/>
              <clip pos="2" side="tl" part="a_adj"/>
            </lu>
            <b pos="1"/>
            <lu>
              <clip pos="1" side="tl" part="lemh"/>
              <clip pos="1" side="tl" part="a_nom"/>
              <clip pos="1" side="tl" part="nbr" link-to="3"/>
              <clip pos="1" side="tl" part="lemq"/>
            </lu>
          </chunk>
        </out>
      </action>
    </rule>
    <rule comment="REGLA: ADJ NOM">
      <pattern>
        <pattern-item n="adjec"/>
        <pattern-item n="nom"/>
      </pattern>
      <action>
        <call-macro n="firstWord">
          <with-param pos="1"/>
        </call-macro>
        <call-macro n="f_lexicadj">
          <with-param pos="1"/>
        </call-macro>
        <call-macro n="f_concord2">
          <with-param pos="2"/>
          <with-param pos="1"/>
        </call-macro>
        <call-macro n="tipus_nom">
          <with-param pos="2"/>
        </call-macro>
        <out>
          <chunk name="adj_nom" case="caseFirstWord">
            <tags>
              <tag><lit-tag v="SN"/></tag>
              <tag><clip pos="2" side="sl" part="gen"/></tag>
              <tag><clip pos="2" side="tl" part="nbr"/></tag>
              <tag><var n="tipusnom"/></tag>
            </tags>
            <lu>
              <clip pos="1" side="tl" part="lemh"/>
              <clip pos="1" side="tl" part="a_adj"/>
              <clip pos="1" side="tl" part="lemq"/>
            </lu>
            <b pos="1"/>
            <lu>
              <clip pos="2" side="tl" part="lemh"/>
              <clip pos="2" side="tl" part="a_nom"/>
              <clip pos="2" side="tl" part="nbr_sense_sp" link-to="3"/>
              <clip pos="2" side="tl" part="nbr_sp"/>
              <clip pos="2" side="tl" part="lemq"/>
            </lu>
          </chunk>
        </out>
        <let>
          <var n="caseFirstWord"/>
          <lit v="aa"/>
        </let>
      </action>
    </rule>
    <rule comment="REGLA: DET ADV ADJ NOM">
      <pattern>
        <pattern-item n="det"/>
        <pattern-item n="adv_preadv"/>
        <pattern-item n="adjec"/>
        <pattern-item n="nom"/>
      </pattern>
      <action>
        <call-macro n="firstWord">
          <with-param pos="1"/>
        </call-macro>
	<!--    <call-macro n="f_lexicadj">
	     <with-param pos="2"/>
	     </call-macro>  
	     <call-macro n="f_lexicadj">
	     <with-param pos="3"/>
	     </call-macro>   -->
        <call-macro n="det_adv_adj">
          <with-param pos="1"/>
          <with-param pos="2"/>
          <with-param pos="3"/>
        </call-macro>
        <call-macro n="f_concord3">
          <with-param pos="1"/>
          <with-param pos="2"/>
          <with-param pos="3"/>
        </call-macro>
        <call-macro n="tipus_nom">
          <with-param pos="4"/>
        </call-macro>
        <out>
          <chunk name="det_adv_adj_nom" case="caseFirstWord">
            <tags>
              <tag><lit-tag v="SN"/></tag>
              <tag><clip pos="4" side="sl" part="gen"/></tag>
              <tag><clip pos="4" side="tl" part="nbr"/></tag>
              <tag><var n="tipusnom"/></tag>
            </tags>
            <lu>
              <clip pos="1" side="tl" part="lem"/>
              <clip pos="1" side="tl" part="a_det"/>
              <clip pos="1" side="tl" part="nbr"/>
            </lu>
            <b pos="1"/>
            <lu>
              <var n="adv_adjectiu"/>
            </lu>
            <b pos="2"/>
            <lu>
              <clip pos="4" side="tl" part="lemh"/>
              <clip pos="4" side="tl" part="a_nom"/>
              <clip pos="4" side="tl" part="nbr"/>
              <clip pos="4" side="tl" part="lemq"/>
            </lu>
          </chunk>
        </out>
        <let>
          <var n="caseFirstWord"/>
          <lit v="aa"/>
        </let>
      </action>
    </rule>
    <rule comment="DET NUMERAL NOM NUM (le 23 mai 1797 -&gt; 23 may 1979">
      <pattern>
        <pattern-item n="det"/>
        <pattern-item n="num"/>
        <pattern-item n="nom"/>
        <pattern-item n="num"/>
      </pattern>
      <action>
        <call-macro n="firstWord">
          <with-param pos="1"/>
        </call-macro>
        <call-macro n="f_concord4">
          <with-param pos="3"/>
          <with-param pos="1"/>
          <with-param pos="2"/>
          <with-param pos="4"/>
        </call-macro>
        <call-macro n="tipus_nom">
          <with-param pos="3"/>
        </call-macro>
        <out>
          <chunk name="num_nom_num" case="caseFirstWord">
            <tags>
              <tag><lit-tag v="SN"/></tag>
              <tag><clip pos="2" side="sl" part="gen"/></tag>
              <tag><clip pos="3" side="sl" part="nbr"/></tag>
              <tag><var n="tipusnom"/></tag>
            </tags>
            <lu>
              <clip pos="2" side="tl" part="lem"/>
              <clip pos="2" side="tl" part="a_num"/>
              <clip pos="2" side="tl" part="nbr_sense_sp" link-to="2"/>
              <clip pos="2" side="tl" part="nbr_sp"/>
            </lu>
            <b pos="1"/>
            <lu>
              <clip pos="3" side="tl" part="lemh"/>
              <clip pos="3" side="tl" part="a_nom"/>
              <clip pos="3" side="tl" part="nbr_sense_sp" link-to="2"/>
              <clip pos="3" side="tl" part="nbr_sp"/>
              <clip pos="3" side="tl" part="lemq"/>
            </lu>
            <b pos="2"/>
            <lu>
              <clip pos="4" side="tl" part="lem"/>
              <clip pos="4" side="tl" part="a_num"/>
              <clip pos="4" side="tl" part="nbr_sense_sp" link-to="3"/>
              <clip pos="4" side="tl" part="nbr_sp"/>
            </lu>
          </chunk>
        </out>
        <let>
          <var n="caseFirstWord"/>
          <lit v="aa"/>
        </let>
      </action>
    </rule>
    <rule comment="DET NUMERAL NOM">
      <pattern>
        <pattern-item n="det"/>
        <pattern-item n="num"/>
        <pattern-item n="nom"/>
      </pattern>
      <action>
        <call-macro n="firstWord">
          <with-param pos="1"/>
        </call-macro>
        <call-macro n="f_concord3">
          <with-param pos="3"/>
          <with-param pos="1"/>
          <with-param pos="2"/>
        </call-macro>
        <call-macro n="tipus_nom">
          <with-param pos="3"/>
        </call-macro>
        <choose>
          <when>
            <test>
              <in caseless="yes">
                <clip pos="3" side="sl" part="lem"/>
                <list n="mois"/>
              </in>
            </test>
            <out>
              <chunk name="num_prep_nom" case="caseFirstWord">
                <tags>
                  <tag><lit-tag v="SN"/></tag>
                  <tag><clip pos="2" side="sl" part="gen"/></tag>
                  <tag><clip pos="2" side="tl" part="nbr"/></tag>
                  <tag><var n="tipusnom"/></tag>
                </tags>
                <lu>
                  <clip pos="2" side="tl" part="whole"/>
                </lu>
                <b pos="1"/>
                <lu>
                  <lit v="of"/>
                  <lit-tag v="pr"/>
                </lu>
                <b/>
                <lu>
                  <clip pos="3" side="tl" part="whole"/>
                </lu>
                <b pos="2"/>
              </chunk>
            </out>
          </when>
          <otherwise>
            <call-macro n="f_concord3">
              <with-param pos="3"/>
              <with-param pos="1"/>
              <with-param pos="2"/>
            </call-macro>
            <out>
              <chunk name="det_num_nom" case="caseFirstWord">
                <tags>
                  <tag><lit-tag v="SN"/></tag>
                  <tag><clip pos="3" side="sl" part="gen"/></tag>
                  <tag><clip pos="3" side="tl" part="nbr"/></tag>
                  <tag><var n="tipusnom"/></tag>
                </tags>
                <lu>
                  <clip pos="1" side="tl" part="lem"/>
                  <clip pos="1" side="tl" part="a_det"/>
                  <clip pos="1" side="tl" part="nbr_sense_sp" link-to="3"/>
                  <clip pos="1" side="tl" part="nbr_sp"/>
                </lu>
                <b pos="1"/>
                <lu>
                  <clip pos="2" side="tl" part="lem"/>
                  <clip pos="2" side="tl" part="a_num"/>
                  <clip pos="2" side="tl" part="nbr"/>
                </lu>
                <b pos="2"/>
                <lu>
                  <clip pos="3" side="tl" part="lemh"/>
                  <clip pos="3" side="tl" part="a_nom"/>
                  <clip pos="3" side="tl" part="nbr_sense_sp" link-to="3"/>
                  <clip pos="3" side="tl" part="nbr_sp"/>
                  <clip pos="3" side="tl" part="lemq"/>
                </lu>
              </chunk>
            </out>
          </otherwise>
        </choose>
        <let>
          <var n="caseFirstWord"/>
          <lit v="aa"/>
        </let>
      </action>
    </rule>
    <rule comment="REGLA: num nom sur num: 3 maisons sur 5 - 3 of 5 houses">
      <pattern>
        <pattern-item n="num"/>
        <pattern-item n="nom"/>
        <pattern-item n="surprep"/>
        <pattern-item n="num"/>
      </pattern>
      <action>
        <call-macro n="firstWord">
          <with-param pos="1"/>
        </call-macro>
        <call-macro n="f_concord3">
          <with-param pos="2"/>
          <with-param pos="1"/>
          <with-param pos="4"/>
        </call-macro>
        <call-macro n="tipus_nom">
          <with-param pos="2"/>
        </call-macro>
        <out>
          <chunk name="num_of_num_nom" case="caseFirstWord">
            <tags>
              <tag><lit-tag v="SN"/></tag>
              <tag><clip pos="2" side="sl" part="gen"/></tag>
              <tag><clip pos="2" side="tl" part="nbr"/></tag>
              <tag><var n="tipusnom"/></tag>
            </tags>
            <lu>
              <clip pos="1" side="tl" part="lem"/>
              <clip pos="1" side="tl" part="a_num"/>
              <clip pos="1" side="tl" part="nbr_sense_sp" link-to="3"/>
              <clip pos="1" side="tl" part="nbr_sp"/>
            </lu>
            <b pos="1"/>
            <lu>
              <lit v="of"/>
              <lit-tag v="pr"/>
            </lu>
            <b pos="2"/>
            <lu>
              <clip pos="4" side="tl" part="lem"/>
              <clip pos="4" side="tl" part="a_num"/>
              <clip pos="4" side="tl" part="nbr_sense_sp" link-to="3"/>
              <clip pos="4" side="tl" part="nbr_sp"/>
            </lu>
            <b pos="3"/>
            <lu>
              <clip pos="2" side="tl" part="lemh"/>
              <clip pos="2" side="tl" part="a_nom"/>
              <clip pos="2" side="tl" part="nbr_sense_sp" link-to="3"/>
              <clip pos="2" side="tl" part="nbr_sp"/>
              <clip pos="2" side="tl" part="lemq"/>
            </lu>
          </chunk>
        </out>
        <let>
          <var n="caseFirstWord"/>
          <lit v="aa"/>
        </let>
      </action>
    </rule>
    <rule comment="REGLA: num adj sur num">
      <pattern>
        <pattern-item n="num"/>
        <pattern-item n="adjec"/>
        <pattern-item n="surprep"/>
        <pattern-item n="num"/>
      </pattern>
      <action>
        <call-macro n="firstWord">
          <with-param pos="1"/>
        </call-macro>
        <call-macro n="f_concord3">
          <with-param pos="2"/>
          <with-param pos="1"/>
          <with-param pos="4"/>
        </call-macro>
        <out>
          <chunk name="num_of_num_adj" case="caseFirstWord">
            <tags>
              <tag><lit-tag v="SN"/></tag>
              <tag><clip pos="4" side="sl" part="gen"/></tag>
              <tag><clip pos="4" side="sl" part="nbr"/></tag>
              <tag><var n="tipusnom"/></tag>
            </tags>
            <lu>
              <clip pos="1" side="tl" part="lem"/>
              <clip pos="1" side="tl" part="a_num"/>
              <clip pos="1" side="tl" part="nbr_sense_sp" link-to="3"/>
              <clip pos="1" side="tl" part="nbr_sp"/>
            </lu>
            <b pos="1"/>
            <lu>
              <lit v="of"/>
              <lit-tag v="pr"/>
            </lu>
            <b pos="2"/>
            <lu>
              <clip pos="4" side="tl" part="lem"/>
              <clip pos="4" side="tl" part="a_num"/>
              <clip pos="4" side="tl" part="nbr_sense_sp" link-to="3"/>
              <clip pos="4" side="tl" part="nbr_sp"/>
            </lu>
            <b pos="3"/>
            <lu>
              <clip pos="2" side="tl" part="lemh"/>
              <clip pos="2" side="tl" part="a_adj"/>
              <clip pos="2" side="tl" part="lemq"/>
            </lu>
          </chunk>
        </out>
        <let>
          <var n="caseFirstWord"/>
          <lit v="aa"/>
        </let>
      </action>
    </rule>
    <rule comment="REGLA: DET NUM NOM SUR NUM">
      <pattern>
        <pattern-item n="det"/>
        <pattern-item n="num"/>
        <pattern-item n="nom"/>
        <pattern-item n="surprep"/>
        <pattern-item n="num"/>
      </pattern>
      <action>
        <call-macro n="firstWord">
          <with-param pos="1"/>
        </call-macro>
        <call-macro n="f_concord4">
          <with-param pos="3"/>
          <with-param pos="1"/>
          <with-param pos="2"/>
          <with-param pos="5"/>
        </call-macro>
        <call-macro n="tipus_nom">
          <with-param pos="3"/>
        </call-macro>
        <out>
          <chunk name="det_num_of_num_nom" case="caseFirstWord">
            <tags>
              <tag><lit-tag v="SN"/></tag>
              <tag><clip pos="3" side="sl" part="gen"/></tag>
              <tag><clip pos="3" side="tl" part="nbr"/></tag>
              <tag><var n="tipusnom"/></tag>
            </tags>
            <lu>
              <clip pos="1" side="tl" part="lem"/>
              <clip pos="1" side="tl" part="a_det"/>
              <clip pos="1" side="tl" part="nbr_sense_sp" link-to="3"/>
              <clip pos="1" side="tl" part="nbr_sp"/>
            </lu>
            <b pos="1"/>
            <lu>
              <clip pos="2" side="tl" part="lem"/>
              <clip pos="2" side="tl" part="a_num"/>
              <clip pos="2" side="tl" part="nbr_sense_sp" link-to="3"/>
              <clip pos="2" side="tl" part="nbr_sp"/>
            </lu>
            <b pos="2"/>
            <lu>
              <lit v="of"/>
              <lit-tag v="pr"/>
            </lu>
            <b pos="3"/>
            <lu>
              <clip pos="5" side="tl" part="lem"/>
              <clip pos="5" side="tl" part="a_num"/>
              <clip pos="5" side="tl" part="nbr_sense_sp" link-to="3"/>
              <clip pos="5" side="tl" part="nbr_sp"/>
            </lu>
            <b pos="3"/>
            <lu>
              <clip pos="3" side="tl" part="lemh"/>
              <clip pos="3" side="tl" part="a_nom"/>
              <clip pos="3" side="tl" part="nbr_sense_sp" link-to="3"/>
              <clip pos="3" side="tl" part="nbr_sp"/>
              <clip pos="3" side="tl" part="lemq"/>
            </lu>
          </chunk>
        </out>
        <let>
          <var n="caseFirstWord"/>
          <lit v="aa"/>
        </let>
      </action>
    </rule>
    <rule comment="REGLA: DET NUM AJD SUR NUM">
      <pattern>
        <pattern-item n="det"/>
        <pattern-item n="num"/>
        <pattern-item n="adjec"/>
        <pattern-item n="surprep"/>
        <pattern-item n="num"/>
      </pattern>
      <action>
        <call-macro n="firstWord">
          <with-param pos="1"/>
        </call-macro>
        <call-macro n="f_concord4">
          <with-param pos="3"/>
          <with-param pos="1"/>
          <with-param pos="2"/>
          <with-param pos="5"/>
        </call-macro>
        <call-macro n="tipus_nom">
          <with-param pos="3"/>
        </call-macro>
        <out>
          <chunk name="det_num_of_num_adj" case="caseFirstWord">
            <tags>
              <tag><lit-tag v="SN"/></tag>
              <tag><clip pos="3" side="sl" part="gen"/></tag>
              <tag><clip pos="3" side="sl" part="nbr"/></tag>
              <tag><var n="tipusnom"/></tag>
            </tags>
            <lu>
              <clip pos="1" side="tl" part="lem"/>
              <clip pos="1" side="tl" part="a_det"/>
              <clip pos="1" side="tl" part="nbr_sense_sp" link-to="3"/>
              <clip pos="1" side="tl" part="nbr_sp"/>
            </lu>
            <b pos="1"/>
            <lu>
              <clip pos="2" side="tl" part="lem"/>
              <clip pos="2" side="tl" part="a_num"/>
              <clip pos="2" side="tl" part="nbr_sense_sp" link-to="3"/>
              <clip pos="2" side="tl" part="nbr_sp"/>
            </lu>
            <b pos="2"/>
            <lu>
              <lit v="of"/>
              <lit-tag v="pr"/>
            </lu>
            <b pos="3"/>
            <lu>
              <clip pos="5" side="tl" part="lem"/>
              <clip pos="5" side="tl" part="a_num"/>
              <clip pos="5" side="tl" part="nbr_sense_sp" link-to="3"/>
              <clip pos="5" side="tl" part="nbr_sp"/>
            </lu>
            <b pos="3"/>
            <lu>
              <clip pos="3" side="tl" part="lemh"/>
              <clip pos="3" side="tl" part="a_adj"/>
              <clip pos="3" side="tl" part="lemq"/>
            </lu>
          </chunk>
        </out>
        <let>
          <var n="caseFirstWord"/>
          <lit v="aa"/>
        </let>
      </action>
    </rule>
    <rule comment="REGLA: NOM ADJ ADJ">
      <pattern>
        <pattern-item n="nom"/>
        <pattern-item n="adjec"/>
        <pattern-item n="adjec"/>
      </pattern>
      <action>
        <call-macro n="f_concord3">
          <with-param pos="1"/>
          <with-param pos="2"/>
          <with-param pos="3"/>
        </call-macro>
        <call-macro n="tipus_nom">
          <with-param pos="1"/>
        </call-macro>
        <call-macro n="firstWord">
          <with-param pos="1"/>
        </call-macro>
        <out>
          <chunk name="adj_adj_nom" case="caseFirstWord">
            <tags>
              <tag><lit-tag v="SN"/></tag>
              <tag><clip pos="1" side="sl" part="gen"/></tag>
              <tag><clip pos="1" side="tl" part="nbr"/></tag>
              <tag><var n="tipusnom"/></tag>
            </tags>
            <lu>
              <clip pos="3" side="tl" part="lemh"/>
              <clip pos="3" side="tl" part="a_nom"/>
              <clip pos="3" side="tl" part="nbr_sense_sp" link-to="3"/>
              <clip pos="3" side="tl" part="nbr_sp"/>
              <clip pos="3" side="tl" part="lemq"/>
            </lu>
            <b pos="1"/>
            <lu>
              <clip pos="2" side="tl" part="lemh"/>
              <clip pos="2" side="tl" part="a_adj"/>
              <clip pos="2" side="tl" part="lemq"/>
            </lu>
            <b pos="2"/>
            <lu>
              <clip pos="1" side="tl" part="lemh"/>
              <clip pos="1" side="tl" part="a_adj"/>
              <clip pos="1" side="tl" part="lemq"/>
            </lu>
          </chunk>
        </out>
        <let>
          <var n="caseFirstWord"/>
          <lit v="aa"/>
        </let>
      </action>
    </rule>
    <rule comment="REGLA: DET NOM ADJ">
      <pattern>
        <pattern-item n="det"/>
        <pattern-item n="nom"/>
        <pattern-item n="adjec"/>
      </pattern>
      <action>
        <call-macro n="f_concord3">
          <with-param pos="2"/>
          <with-param pos="3"/>
          <with-param pos="1"/>
        </call-macro>
        <call-macro n="tipus_nom">
          <with-param pos="2"/>
        </call-macro>
        <call-macro n="firstWord">
          <with-param pos="1"/>
        </call-macro>
        <out>
          <chunk name="det_adj_nom" case="caseFirstWord">
            <tags>
              <tag><lit-tag v="SN"/></tag>
              <tag><clip pos="3" side="sl" part="gen"/></tag>
              <tag><clip pos="3" side="tl" part="nbr"/></tag>
              <tag><var n="tipusnom"/></tag>
            </tags>
            <lu>
              <clip pos="1" side="tl" part="lem"/>
              <clip pos="1" side="tl" part="a_det"/>
              <clip pos="1" side="tl" part="nbr_sense_sp" link-to="3"/>
              <clip pos="1" side="tl" part="nbr_sp"/>
            </lu>
            <b pos="1"/>
            <lu>
              <clip pos="3" side="tl" part="lemh"/>
              <clip pos="3" side="tl" part="a_adj"/>
              <clip pos="3" side="tl" part="lemq"/>
            </lu>
            <b pos="2"/>
            <lu>
              <clip pos="2" side="tl" part="lemh"/>
              <clip pos="2" side="tl" part="a_nom"/>
              <clip pos="2" side="tl" part="nbr_sense_sp" link-to="3"/>
              <clip pos="2" side="tl" part="nbr_sp"/>
              <clip pos="2" side="tl" part="lemq"/>
            </lu>
          </chunk>
        </out>
        <let>
          <var n="caseFirstWord"/>
          <lit v="aa"/>
        </let>
      </action>
    </rule>
    <rule comment="REGLA: DET ADJ">
      <pattern>
        <pattern-item n="det"/>
        <pattern-item n="adjec"/>
      </pattern>
      <action>
        <call-macro n="f_concord2">
          <with-param pos="2"/>
          <with-param pos="1"/>
        </call-macro>
        <call-macro n="firstWord">
          <with-param pos="1"/>
        </call-macro>
        <out>
          <chunk name="det_adj" case="caseFirstWord">
            <tags>
              <tag><lit-tag v="SN"/></tag>
              <tag><clip pos="2" side="sl" part="gen"/></tag>
              <tag><clip pos="2" side="tl" part="nbr"/></tag>
            </tags>
            <lu>
              <clip pos="1" side="tl" part="lem"/>
              <clip pos="1" side="tl" part="a_det"/>
              <clip pos="1" side="tl" part="nbr_sense_sp" link-to="3"/>
              <clip pos="1" side="tl" part="nbr_sp"/>
            </lu>
            <b pos="1"/>
            <lu>
              <clip pos="2" side="tl" part="whole"/>
            </lu>
          </chunk>
        </out>
        <let>
          <var n="caseFirstWord"/>
          <lit v="aa"/>
        </let>
      </action>
    </rule>
    <rule comment="REGLA: DET ADJ NOM">
      <pattern>
        <pattern-item n="det"/>
        <pattern-item n="adjec"/>
        <pattern-item n="nom"/>
      </pattern>
      <action>
        <call-macro n="firstWord">
          <with-param pos="1"/>
        </call-macro>
        <call-macro n="f_lexicadj">
          <with-param pos="2"/>
        </call-macro>
        <call-macro n="f_concord3">
          <with-param pos="3"/>
          <with-param pos="2"/>
          <with-param pos="1"/>
        </call-macro>
        <call-macro n="tipus_nom">
          <with-param pos="3"/>
        </call-macro>
        <out>
          <chunk name="det_adj_nom" case="caseFirstWord">
            <tags>
              <tag><lit-tag v="SN"/></tag>
              <tag><clip pos="3" side="sl" part="gen"/></tag>
              <tag><clip pos="3" side="tl" part="nbr"/></tag>
              <tag><var n="tipusnom"/></tag>
            </tags>
            <lu>
              <clip pos="1" side="tl" part="lem"/>
              <clip pos="1" side="tl" part="a_det"/>
              <clip pos="1" side="tl" part="nbr_sense_sp" link-to="3"/>
              <clip pos="1" side="tl" part="nbr_sp"/>
            </lu>
            <b pos="1"/>
            <lu>
              <clip pos="2" side="tl" part="lemh"/>
              <clip pos="2" side="tl" part="a_adj"/>
              <clip pos="2" side="tl" part="lemq"/>
            </lu>
            <b pos="2"/>
            <lu>
              <clip pos="3" side="tl" part="lemh"/>
              <clip pos="3" side="tl" part="a_nom"/>
              <clip pos="3" side="tl" part="nbr_sense_sp" link-to="3"/>
              <clip pos="3" side="tl" part="nbr_sp"/>
              <clip pos="3" side="tl" part="lemq"/>
            </lu>
          </chunk>
        </out>
        <let>
          <var n="caseFirstWord"/>
          <lit v="aa"/>
        </let>
      </action>
    </rule>
    <rule comment="REGLA: DET ADJ cnj   ADJ NOM">
      <pattern>
        <pattern-item n="det"/>
        <pattern-item n="adjec"/>
        <pattern-item n="cnjcoo"/>
        <pattern-item n="adjec"/>
        <pattern-item n="nom"/>
      </pattern>
      <action>
        <call-macro n="firstWord">
          <with-param pos="1"/>
        </call-macro>
	<!--    <call-macro n="f_lexicadj">
	     <with-param pos="4"/>
	     </call-macro>  -->
        <call-macro n="f_concord4">
          <with-param pos="5"/>
          <with-param pos="2"/>
          <with-param pos="4"/>
          <with-param pos="1"/>
        </call-macro>
        <call-macro n="tipus_nom">
          <with-param pos="5"/>
        </call-macro>
        <out>
          <chunk name="det_adj_cnjcoo_adj_nom" case="caseFirstWord">
            <tags>
              <tag><lit-tag v="SN"/></tag>
              <tag><clip pos="5" side="sl" part="gen"/></tag>
              <tag><clip pos="5" side="tl" part="nbr"/></tag>
              <tag><var n="tipusnom"/></tag>
            </tags>
            <lu>
              <clip pos="1" side="tl" part="lem"/>
              <clip pos="1" side="tl" part="a_det"/>
              <clip pos="1" side="tl" part="nbr_sense_sp" link-to="3"/>
              <clip pos="1" side="tl" part="nbr_sp"/>
            </lu>
            <b pos="1"/>
            <lu>
              <clip pos="2" side="tl" part="lemh"/>
              <clip pos="2" side="tl" part="a_adj"/>
              <clip pos="2" side="tl" part="lemq"/>
            </lu>
            <b pos="2"/>
            <lu>
              <clip pos="3" side="tl" part="whole"/>
            </lu>
            <b pos="3"/>
            <lu>
              <clip pos="4" side="tl" part="lemh"/>
              <clip pos="4" side="tl" part="a_adj"/>
              <clip pos="4" side="tl" part="lemq"/>
            </lu>
            <b pos="4"/>
            <lu>
              <clip pos="5" side="tl" part="lemh"/>
              <clip pos="5" side="tl" part="a_nom"/>
              <clip pos="5" side="tl" part="nbr_sense_sp" link-to="3"/>
              <clip pos="5" side="tl" part="nbr_sp"/>
              <clip pos="5" side="tl" part="lemq"/>
            </lu>
          </chunk>
        </out>
        <let>
          <var n="caseFirstWord"/>
          <lit v="aa"/>
        </let>
      </action>
    </rule>
    <rule comment="REGLA: NUM ADV ADJ NOM">
      <pattern>
        <pattern-item n="num"/>
        <pattern-item n="adv"/>
        <pattern-item n="adjec"/>
        <pattern-item n="nom"/>
      </pattern>
      <action>
        <call-macro n="firstWord">
          <with-param pos="1"/>
        </call-macro>
        <call-macro n="adv_adj">
          <with-param pos="2"/>
          <with-param pos="3"/>
        </call-macro>
	<!--    <call-macro n="f_lexicadj">
	     <with-param pos="3"/>
	     </call-macro>   -->
        <call-macro n="f_concord3">
          <with-param pos="4"/>
          <with-param pos="3"/>
          <with-param pos="1"/>
        </call-macro>
        <call-macro n="tipus_nom">
          <with-param pos="4"/>
        </call-macro>
        <out>
          <chunk name="num_adv_adj_nom" case="caseFirstWord">
            <tags>
              <tag><lit-tag v="SN"/></tag>
              <tag><clip pos="4" side="sl" part="gen"/></tag>
              <tag><clip pos="4" side="tl" part="nbr"/></tag>
              <tag><var n="tipusnom"/></tag>
            </tags>
            <lu>
              <clip pos="1" side="tl" part="lem"/>
              <clip pos="1" side="tl" part="a_num"/>
              <clip pos="1" side="tl" part="nbr_sense_sp" link-to="3"/>
              <clip pos="1" side="tl" part="nbr_sp"/>
            </lu>
            <b pos="1"/>
            <lu>
              <var n="adv_adjectiu"/>
            </lu>
            <b pos="2"/>
            <lu>
              <clip pos="4" side="tl" part="lemh"/>
              <clip pos="4" side="tl" part="a_nom"/>
              <clip pos="4" side="tl" part="nbr_sense_sp" link-to="3"/>
              <clip pos="4" side="tl" part="nbr_sp"/>
              <clip pos="4" side="tl" part="lemq"/>
            </lu>
          </chunk>
        </out>
        <let>
          <var n="caseFirstWord"/>
          <lit v="aa"/>
        </let>
      </action>
    </rule>
    <rule comment="REGLA: NUM ADJ NOM">
      <pattern>
        <pattern-item n="num"/>
        <pattern-item n="adjec"/>
        <pattern-item n="nom"/>
      </pattern>
      <action>
        <call-macro n="firstWord">
          <with-param pos="1"/>
        </call-macro>
        <call-macro n="f_lexicadj">
          <with-param pos="2"/>
        </call-macro>
        <call-macro n="f_concord3">
          <with-param pos="3"/>
          <with-param pos="2"/>
          <with-param pos="1"/>
        </call-macro>
        <call-macro n="tipus_nom">
          <with-param pos="3"/>
        </call-macro>
        <out>
          <chunk name="num_adj_nom" case="caseFirstWord">
            <tags>
              <tag>
                <lit-tag v="SN"/>
              </tag>
              <tag><clip pos="3" side="sl" part="gen"/></tag>
              <tag><clip pos="3" side="tl" part="nbr"/></tag>
              <tag><var n="tipusnom"/></tag>
            </tags>
            <lu>
              <clip pos="1" side="tl" part="lem"/>
              <clip pos="1" side="tl" part="a_num"/>
              <clip pos="1" side="tl" part="nbr_sense_sp" link-to="3"/>
              <clip pos="1" side="tl" part="nbr_sp"/>
            </lu>
            <b pos="1"/>
            <lu>
              <clip pos="2" side="tl" part="lemh"/>
              <clip pos="2" side="tl" part="a_adj"/>
              <clip pos="2" side="tl" part="lemq"/>
            </lu>
            <b pos="2"/>
            <lu>
              <clip pos="3" side="tl" part="lemh"/>
              <clip pos="3" side="tl" part="a_nom"/>
              <clip pos="3" side="tl" part="nbr_sense_sp" link-to="3"/>
              <clip pos="3" side="tl" part="nbr_sp"/>
              <clip pos="3" side="tl" part="lemq"/>
            </lu>
          </chunk>
        </out>
        <let>
          <var n="caseFirstWord"/>
          <lit v="aa"/>
        </let>
      </action>
    </rule>
    <rule comment="REGLA: NUM ADJ cnj   ADJ NOM">
      <pattern>
        <pattern-item n="num"/>
        <pattern-item n="adjec"/>
        <pattern-item n="cnjcoo"/>
        <pattern-item n="adjec"/>
        <pattern-item n="nom"/>
      </pattern>
      <action>
        <call-macro n="f_concord4">
          <with-param pos="5"/>
          <with-param pos="2"/>
          <with-param pos="4"/>
          <with-param pos="1"/>
        </call-macro>
	<!--    <call-macro n="f_lexicadj">
	     <with-param pos="4"/>
	     </call-macro>  -->
        <call-macro n="tipus_nom">
          <with-param pos="5"/>
        </call-macro>
        <call-macro n="firstWord">
          <with-param pos="1"/>
        </call-macro>
        <out>
          <chunk name="num_adj_cnjcoo_adj_nom" case="caseFirstWord">
            <tags>
              <tag><lit-tag v="SN"/></tag>
              <tag><clip pos="1" side="sl" part="gen"/></tag>
              <tag><clip pos="1" side="tl" part="nbr"/></tag>
              <tag><var n="tipusnom"/></tag>
            </tags>
            <lu>
              <clip pos="1" side="tl" part="lem"/>
              <clip pos="1" side="tl" part="a_num"/>
              <clip pos="1" side="tl" part="nbr_sense_sp" link-to="3"/>
              <clip pos="1" side="tl" part="nbr_sp"/>
            </lu>
            <b pos="1"/>
            <lu>
              <clip pos="2" side="tl" part="lemh"/>
              <clip pos="2" side="tl" part="a_adj"/>
              <clip pos="2" side="tl" part="lemq"/>
            </lu>
            <b pos="2"/>
            <lu>
              <clip pos="3" side="tl" part="whole"/>
            </lu>
            <b pos="3"/>
            <lu>
              <clip pos="4" side="tl" part="lemh"/>
              <clip pos="4" side="tl" part="a_adj"/>
              <clip pos="4" side="tl" part="lemq"/>
            </lu>
            <b pos="4"/>
            <lu>
              <clip pos="5" side="tl" part="lemh"/>
              <clip pos="5" side="tl" part="a_nom"/>
              <clip pos="5" side="tl" part="nbr_sense_sp" link-to="3"/>
              <clip pos="5" side="tl" part="nbr_sp"/>
              <clip pos="5" side="tl" part="lemq"/>
            </lu>
          </chunk>
        </out>
        <let>
          <var n="caseFirstWord"/>
          <lit v="aa"/>
        </let>
      </action>
    </rule>
    <rule comment="REGLA: NUM NOM ADJ">
      <pattern>
        <pattern-item n="num"/>
        <pattern-item n="nom"/>
        <pattern-item n="adjec"/>
      </pattern>
      <action>
        <call-macro n="f_concord3">
          <with-param pos="2"/>
          <with-param pos="3"/>
          <with-param pos="1"/>
        </call-macro>
        <call-macro n="tipus_nom">
          <with-param pos="2"/>
        </call-macro>
        <call-macro n="firstWord">
          <with-param pos="1"/>
        </call-macro>
        <out>
          <chunk name="num_adj_nom" case="caseFirstWord">
            <tags>
              <tag><lit-tag v="SN"/></tag>
              <tag><clip pos="1" side="sl" part="gen"/></tag>
              <tag><clip pos="1" side="tl" part="nbr"/></tag>
              <tag><var n="tipusnom"/></tag>
            </tags>
            <lu>
              <clip pos="1" side="tl" part="lem"/>
              <clip pos="1" side="tl" part="a_num"/>
              <clip pos="1" side="tl" part="nbr_sense_sp" link-to="3"/>
              <clip pos="1" side="tl" part="nbr_sp"/>
            </lu>
            <b pos="1"/>
            <lu>
              <clip pos="3" side="tl" part="lemh"/>
              <clip pos="3" side="tl" part="a_nom"/>
              <clip pos="3" side="tl" part="nbr_sense_sp" link-to="3"/>
              <clip pos="3" side="tl" part="nbr_sp"/>
              <clip pos="3" side="tl" part="lemq"/>
            </lu>
            <b pos="2"/>
            <lu>
              <clip pos="2" side="tl" part="lemh"/>
              <clip pos="2" side="tl" part="a_adj"/>
              <clip pos="2" side="tl" part="lemq"/>
            </lu>
          </chunk>
        </out>
        <let>
          <var n="caseFirstWord"/>
          <lit v="aa"/>
        </let>
      </action>
    </rule>
    <rule comment="REGLA: DET NOM ADV ADJ">
      <pattern>
        <pattern-item n="det"/>
        <pattern-item n="nom"/>
        <pattern-item n="adv_preadv"/>
        <pattern-item n="adjec"/>
      </pattern>
      <action>
        <call-macro n="f_concord3">
          <with-param pos="2"/>
          <with-param pos="4"/>
          <with-param pos="1"/>
        </call-macro>
        <call-macro n="tipus_nom">
          <with-param pos="2"/>
        </call-macro>
        <call-macro n="firstWord">
          <with-param pos="1"/>
        </call-macro>
        <out>
          <chunk name="det_nom_adv_adj" case="caseFirstWord">
            <tags>
              <tag><lit-tag v="SN"/></tag>
              <tag><clip pos="2" side="sl" part="gen"/></tag>
              <tag><clip pos="2" side="tl" part="nbr"/></tag>
              <tag><var n="tipusnom"/></tag>
            </tags>
            <lu>
              <clip pos="1" side="tl" part="lem"/>
              <clip pos="1" side="tl" part="a_det"/>
              <clip pos="1" side="tl" part="nbr_sense_sp" link-to="3"/>
              <clip pos="1" side="tl" part="nbr_sp"/>
            </lu>
            <b pos="1"/>
            <lu>
              <clip pos="3" side="tl" part="whole"/>
            </lu>
            <b pos="2"/>
            <lu>
              <clip pos="4" side="tl" part="lemh"/>
              <clip pos="4" side="tl" part="a_adj"/>
              <clip pos="4" side="tl" part="lemq"/>
            </lu>
            <b pos="3"/>
            <lu>
              <clip pos="2" side="tl" part="lemh"/>
              <clip pos="2" side="tl" part="a_nom"/>
              <clip pos="2" side="tl" part="nbr_sense_sp" link-to="3"/>
              <clip pos="2" side="tl" part="nbr_sp"/>
              <clip pos="2" side="tl" part="lemq"/>
            </lu>
          </chunk>
        </out>
        <let>
          <var n="caseFirstWord"/>
          <lit v="aa"/>
        </let>
      </action>
    </rule>
    <!-- hmm... have to do synthetic adj checking here... -->
    <rule comment="REGLA: DET NOM DET ADV ADJ (la fille la plus jolie : the nicest girl)">
      <pattern>
        <pattern-item n="det"/>
        <pattern-item n="nom"/>
        <pattern-item n="det"/>
        <pattern-item n="adv_preadv"/>
        <pattern-item n="adjec"/>
      </pattern>
      <action>
        <call-macro n="firstWord">
          <with-param pos="1"/>
        </call-macro>
        <call-macro n="f_concord3">
          <with-param pos="2"/>
          <with-param pos="5"/>
          <with-param pos="1"/>
        </call-macro>
        <call-macro n="tipus_nom">
          <with-param pos="2"/>
        </call-macro>
        <call-macro n="det_adv_adj">
          <with-param pos="3"/>
          <with-param pos="4"/>
          <with-param pos="5"/>
        </call-macro>
        <out>
          <chunk name="det_nom_det_adv_adj" case="caseFirstWord">
            <tags>
              <tag><lit-tag v="SN"/></tag>
              <tag><var n="genero"/></tag>
              <tag><var n="numero"/></tag>
              <tag><var n="tipusnom"/></tag>
            </tags>
            <lu>
              <clip pos="1" side="tl" part="lem"/>
              <clip pos="1" side="tl" part="a_det"/>
              <clip pos="1" side="tl" part="nbr_sense_sp" link-to="3"/>
              <clip pos="1" side="tl" part="nbr_sp"/>
            </lu>
            <b pos="1"/>
            <lu>
              <clip pos="2" side="tl" part="lemh"/>
              <clip pos="2" side="tl" part="a_nom"/>
              <clip pos="2" side="tl" part="nbr_sense_sp" link-to="3"/>
              <clip pos="2" side="tl" part="nbr_sp"/>
              <clip pos="2" side="tl" part="lemq"/>
            </lu>
            <b pos="2"/>
            <lu>
              <clip pos="4" side="tl" part="whole"/>
            </lu>
            <b pos="3"/>
            <lu>
              <clip pos="5" side="tl" part="lemh"/>
              <clip pos="5" side="tl" part="a_adj"/>
              <clip pos="5" side="tl" part="lemq"/>
            </lu>
          </chunk>
        </out>
        <call-macro n="f_bcond">
          <with-param pos="4"/>
          <with-param pos="5"/>
        </call-macro>
        <let>
          <var n="caseFirstWord"/>
          <lit v="aa"/>
        </let>
      </action>
    </rule>
    <rule comment="REGLA: NUM NOM ADV ADJ">
      <pattern>
        <pattern-item n="num"/>
        <pattern-item n="nom"/>
        <pattern-item n="adv_preadv"/>
        <pattern-item n="adjec"/>
      </pattern>
      <action>
        <call-macro n="firstWord">
          <with-param pos="1"/>
        </call-macro>
        <call-macro n="f_concord3">
          <with-param pos="2"/>
          <with-param pos="4"/>
          <with-param pos="1"/>
        </call-macro>
        <call-macro n="tipus_nom">
          <with-param pos="2"/>
        </call-macro>
        <out>
          <chunk name="num_nom_adv_adj" case="caseFirstWord">
            <tags>
              <tag><lit-tag v="SN"/></tag>
              <tag><var n="genero"/></tag>
              <tag><var n="numero"/></tag>
              <tag><var n="tipusnom"/></tag>
            </tags>
            <lu>
              <clip pos="1" side="tl" part="lemh"/>
              <clip pos="1" side="tl" part="a_num"/>
              <clip pos="1" side="tl" part="nbr_sense_sp" link-to="3"/>
              <clip pos="1" side="tl" part="nbr_sp"/>
            </lu>
            <b pos="1"/>
            <lu>
              <clip pos="2" side="tl" part="whole"/>
            </lu>
            <b pos="2"/>
            <lu>
              <clip pos="3" side="tl" part="lemh"/>
              <clip pos="3" side="tl" part="a_adj"/>
              <clip pos="3" side="tl" part="lemq"/>
            </lu>
            <b pos="3"/>
            <lu>
              <clip pos="4" side="tl" part="lemh"/>
              <clip pos="4" side="tl" part="a_nom"/>
              <clip pos="4" side="tl" part="nbr_sense_sp" link-to="3"/>
              <clip pos="4" side="tl" part="nbr_sp"/>
              <clip pos="4" side="tl" part="lemq"/>
            </lu>
          </chunk>
        </out>
        <let>
          <var n="caseFirstWord"/>
          <lit v="aa"/>
        </let>
      </action>
    </rule>
    <rule comment="REGLA: NOM ADJ cnjcoo ADJ">
      <pattern>
        <pattern-item n="nom"/>
        <pattern-item n="adjec"/>
        <pattern-item n="cnjcoo"/>
        <pattern-item n="adjec"/>
      </pattern>
      <action>
        <call-macro n="f_concord3">
          <with-param pos="1"/>
          <with-param pos="2"/>
          <with-param pos="4"/>
        </call-macro>
        <call-macro n="tipus_nom">
          <with-param pos="1"/>
        </call-macro>
        <call-macro n="firstWord">
          <with-param pos="1"/>
        </call-macro>
        <out>
          <chunk name="nom_adj_cnjcoo_adj" case="caseFirstWord">
            <tags>
              <tag><lit-tag v="SN"/></tag>
              <tag><var n="genero"/></tag>
              <tag><var n="numero"/></tag>
              <tag><var n="tipusnom"/></tag>
            </tags>
            <lu>
              <clip pos="2" side="tl" part="lemh"/>
              <clip pos="2" side="tl" part="a_adj"/>
              <clip pos="2" side="tl" part="lemq"/>
            </lu>
            <b pos="1"/>
            <lu>
              <clip pos="3" side="tl" part="whole"/>
            </lu>
            <b pos="2"/>
            <lu>
              <clip pos="4" side="tl" part="lemh"/>
              <clip pos="4" side="tl" part="a_adj"/>
              <clip pos="4" side="tl" part="lemq"/>
            </lu>
            <b pos="3"/>
            <lu>
              <clip pos="1" side="tl" part="lemh"/>
              <clip pos="1" side="tl" part="a_nom"/>
              <clip pos="1" side="tl" part="nbr_sense_sp" link-to="3"/>
              <clip pos="1" side="tl" part="nbr_sp"/>
              <clip pos="1" side="tl" part="lemq"/>
            </lu>
          </chunk>
        </out>
        <let>
          <var n="caseFirstWord"/>
          <lit v="aa"/>
        </let>
      </action>
    </rule>
    <rule comment="REGLA: DET NOM ADJ cnjcoo ADJ">
      <pattern>
        <pattern-item n="det"/>
        <pattern-item n="nom"/>
        <pattern-item n="adjec"/>
        <pattern-item n="cnjcoo"/>
        <pattern-item n="adjec"/>
      </pattern>
      <action>
        <call-macro n="f_concord4">
          <with-param pos="2"/>
          <with-param pos="1"/>
          <with-param pos="3"/>
          <with-param pos="5"/>
        </call-macro>
        <call-macro n="tipus_nom">
          <with-param pos="2"/>
        </call-macro>
        <call-macro n="firstWord">
          <with-param pos="1"/>
        </call-macro>
        <out>
          <chunk name="det_nom_adj_cnjcoo_adj" case="caseFirstWord">
            <tags>
              <tag><lit-tag v="SN"/></tag>
              <tag><var n="genero"/></tag>
              <tag><var n="numero"/></tag>
              <tag><var n="tipusnom"/></tag>
            </tags>
            <lu>
              <clip pos="1" side="tl" part="lem"/>
              <clip pos="1" side="tl" part="a_det"/>
              <clip pos="1" side="tl" part="nbr_sense_sp" link-to="3"/>
              <clip pos="1" side="tl" part="nbr_sp"/>
            </lu>
            <b pos="1"/>
            <lu>
              <clip pos="3" side="tl" part="lemh"/>
              <clip pos="3" side="tl" part="a_adj"/>
              <clip pos="3" side="tl" part="lemq"/>
            </lu>
            <b pos="2"/>
            <lu>
              <clip pos="4" side="tl" part="whole"/>
            </lu>
            <b pos="3"/>
            <lu>
              <clip pos="5" side="tl" part="lemh"/>
              <clip pos="5" side="tl" part="a_adj"/>
              <clip pos="5" side="tl" part="lemq"/>
            </lu>
            <b pos="4"/>
            <lu>
              <clip pos="2" side="tl" part="lemh"/>
              <clip pos="2" side="tl" part="a_nom"/>
              <clip pos="2" side="tl" part="nbr_sense_sp" link-to="3"/>
              <clip pos="2" side="tl" part="nbr_sp"/>
              <clip pos="2" side="tl" part="lemq"/>
            </lu>
          </chunk>
        </out>
        <let>
          <var n="caseFirstWord"/>
          <lit v="aa"/>
        </let>
      </action>
    </rule>
    <rule comment="REGLA: ADJECTIU (quan no acompanya res o va amb desconeguda)">
      <pattern>
        <pattern-item n="adjec"/>
      </pattern>
      <action>
        <call-macro n="firstWord">
          <with-param pos="1"/>
        </call-macro>
        <out>
          <chunk name="adj" case="caseFirstWord">
            <tags>
              <tag><lit-tag v="SA"/></tag>
              <tag><clip pos="1" side="sl" part="gen"/></tag>
              <tag><clip pos="1" side="sl" part="nbr"/></tag>
            </tags>
            <lu>
              <clip pos="1" side="tl" part="lemh"/>
              <clip pos="1" side="tl" part="a_adj"/>
              <clip pos="1" side="tl" part="lemq"/>
            </lu>
          </chunk>
        </out>
        <let>
          <var n="caseFirstWord"/>
          <lit v="aa"/>
        </let>
      </action>
    </rule>
    <rule comment="REGLA: DET(quan no acompanya res o va amb desconeguda)">
      <pattern>
        <pattern-item n="det"/>
      </pattern>
      <action>
        <call-macro n="f_concord1">
          <with-param pos="1"/>
        </call-macro>
        <call-macro n="firstWord">
          <with-param pos="1"/>
        </call-macro>
        <out>
          <chunk name="det" case="caseFirstWord">
            <tags>
              <tag><lit-tag v="DET"/></tag>
              <tag><clip pos="1" side="sl" part="gen"/></tag>
              <tag><clip pos="1" side="sl" part="nbr"/></tag>
	    </tags>
            <lu>
              <clip pos="1" side="tl" part="lem"/>
              <clip pos="1" side="tl" part="a_det"/>
              <clip pos="1" side="tl" part="nbr_sense_sp" link-to="3"/>
              <clip pos="1" side="tl" part="nbr_sp"/>
            </lu>
          </chunk>
        </out>
        <let>
          <var n="caseFirstWord"/>
          <lit v="aa"/>
        </let>
      </action>
    </rule>
    <!-- *************************************** REGLES DE SV *********************************************** -->
    <rule comment="REGLA: VERB">
      <pattern>
        <pattern-item n="verbpers"/>
      </pattern>
      <action>
	<!--        <call-macro n="tipus_verb">
             <with-param pos="1"/>
             </call-macro> -->
        <call-macro n="conj_verb1">
          <with-param pos="1"/>
        </call-macro>
	<!--        <call-macro n="f_ppres">
             <with-param pos="1"/>
             </call-macro> -->
        <call-macro n="firstWord">
          <with-param pos="1"/>
        </call-macro>
	<out>
	  <chunk namefrom="lema_SV" case="caseFirstWord">
	    <tags>
	      <tag><lit-tag v="SV"/></tag>
	      <tag><clip pos="1" side="tl" part="a_verb"/></tag>
	      <tag><var n="temps_chunk"/></tag>
	      <tag><clip pos="1" side="tl" part="pers"/></tag>
	      <tag><clip pos="1" side="tl" part="nbr"/></tag>
	    </tags>
	    <lu>
	      <var n="verbfinal"/> 
	      <clip pos="1" side="tl" part="lemq"/> 
	    </lu>
	  </chunk>
        </out>
        <let>
          <var n="caseFirstWord"/>
          <lit v="aa"/>
        </let>
      </action>
    </rule>
    <rule comment="REGLA: ne VERB plus  (n'est plus... -&gt; is not any more...)">
      <pattern>
        <pattern-item n="ne"/>
        <pattern-item n="verbpers"/>
        <pattern-item n="plus"/>
      </pattern>
      <action>
        <call-macro n="tipus_verb">
          <with-param pos="2"/>
        </call-macro>
        <call-macro n="f_ppres">
          <with-param pos="2"/>
        </call-macro>
        <call-macro n="firstWord">
          <with-param pos="1"/>
        </call-macro>
        <out>
          <chunk name="verb">
            <tags>
              <tag><lit-tag v="SV"/></tag>
              <tag><clip pos="2" side="tl" part="a_verb"/></tag>
              <tag><clip pos="2" side="tl" part="temps"/></tag>
              <tag><clip pos="2" side="tl" part="pers"/></tag>
              <tag><clip pos="2" side="tl" part="nbr"/></tag>
              <tag><var n="tipusverb"/></tag>
            </tags>
            <lu>
              <clip pos="2" side="tl" part="lemh"/>
              <clip pos="2" side="tl" part="a_verb"/>
              <clip pos="2" side="tl" part="temps" link-to="3"/>
              <clip pos="2" side="tl" part="pers" link-to="4"/>
              <clip pos="2" side="tl" part="nbr" link-to="5"/>
              <clip pos="2" side="tl" part="lemq"/>
            </lu>
          </chunk>
          <b pos="1"/>
          <chunk name="adv">
            <tags>
              <tag><clip pos="1" side="tl" part="a_adv"/></tag>
            </tags>
            <lu>
              <lit v="not"/>
              <lit-tag v="adv"/>
            </lu>
          </chunk>
          <b pos="2"/>
          <chunk name="adv">
            <tags>
              <tag><clip pos="1" side="tl" part="a_adv"/></tag>
            </tags>
            <lu>
              <lit v="any more"/>
              <lit-tag v="adv"/>
            </lu>
          </chunk>
        </out>
        <let>
          <var n="caseFirstWord"/>
          <lit v="aa"/>
        </let>
      </action>
    </rule>
    <rule comment="REGLA: ne VERB plus que (n'est plus que... -&gt; is not more than...)">
      <pattern>
        <pattern-item n="ne"/>
        <pattern-item n="verbpers"/>
        <pattern-item n="plus"/>
        <pattern-item n="rel"/>
      </pattern>
      <action>
        <call-macro n="tipus_verb">
          <with-param pos="2"/>
        </call-macro>
        <call-macro n="f_ppres">
          <with-param pos="2"/>
        </call-macro>
        <call-macro n="firstWord">
          <with-param pos="1"/>
        </call-macro>
        <call-macro n="f_concord1">
          <with-param pos="4"/>
        </call-macro>
        <out>
          <chunk name="verb">
            <tags>
              <tag><lit-tag v="SV"/></tag>
              <tag><clip pos="2" side="tl" part="a_verb"/></tag>
              <tag><clip pos="2" side="tl" part="temps"/></tag>
              <tag><clip pos="2" side="tl" part="pers"/></tag>
              <tag><clip pos="2" side="tl" part="nbr"/></tag>
              <tag><var n="tipusverb"/></tag>
            </tags>
            <lu>
              <clip pos="2" side="tl" part="lemh"/>
              <clip pos="2" side="tl" part="a_verb"/>
              <clip pos="2" side="tl" part="temps" link-to="3"/>
              <clip pos="2" side="tl" part="pers" link-to="4"/>
              <clip pos="2" side="tl" part="nbr" link-to="5"/>
              <clip pos="2" side="tl" part="lemq"/>
            </lu>
          </chunk>
          <b pos="1"/>
          <chunk name="adv">
            <tags>
              <tag><clip pos="1" side="tl" part="a_adv"/></tag>
            </tags>
            <lu>
              <lit v="not"/>
              <lit-tag v="adv"/>
            </lu>
          </chunk>
          <b pos="2"/>
          <chunk name="adv">
            <tags>
              <tag><clip pos="1" side="tl" part="a_adv"/></tag>
            </tags>
            <lu>
              <lit v="more"/>
              <lit-tag v="adv"/>
            </lu>
          </chunk>
          <b pos="3"/>
          <chunk name="rel" case="caseFirstWord">
            <tags>
              <tag>
                <lit-tag v="SN"/>
              </tag>
              <tag><clip pos="4" side="tl" part="tipus_prn"/></tag>
              <tag><clip pos="4" side="sl" part="gen"/></tag>
              <tag><clip pos="4" side="sl" part="nbr"/></tag>
            </tags>
            <lu>
              <clip pos="4" side="tl" part="lem"/>
              <clip pos="4" side="tl" part="a_prn"/>
              <clip pos="4" side="tl" part="tipus_prn"/>
              <clip pos="4" side="tl" part="gen"/>
              <clip pos="4" side="tl" part="nbr"/>
            </lu>
          </chunk>
        </out>
        <let>
          <var n="caseFirstWord"/>
          <lit v="aa"/>
        </let>
      </action>
    </rule>
    <rule comment="REGLA: INF">
      <pattern>
        <pattern-item n="inf"/>
      </pattern>
      <action>
        <call-macro n="tipus_verb">
          <with-param pos="1"/>
        </call-macro>
        <call-macro n="firstWord">
          <with-param pos="1"/>
        </call-macro>
        <out>
          <chunk name="inf" case="caseFirstWord">
            <tags>
              <tag><lit-tag v="SV"/></tag>
              <tag><clip pos="1" side="tl" part="a_verb"/></tag>
              <tag><clip pos="1" side="tl" part="temps"/></tag>
              <tag><var n="tipusverb"/></tag>
            </tags>
            <lu>
              <clip pos="1" side="tl" part="lemh"/>
              <clip pos="1" side="tl" part="a_verb"/>
              <clip pos="1" side="tl" part="temps"/>
              <clip pos="1" side="tl" part="pers"/>
              <clip pos="1" side="tl" part="nbr"/>
              <clip pos="1" side="tl" part="lemq"/>
            </lu>
          </chunk>
        </out>
        <let>
          <var n="caseFirstWord"/>
          <lit v="aa"/>
        </let>
      </action>
    </rule>
    <rule comment="REGLA: ger">
      <pattern>
        <pattern-item n="ger"/>
      </pattern>
      <action>
        <call-macro n="tipus_verb">
          <with-param pos="1"/>
        </call-macro>
        <call-macro n="firstWord">
          <with-param pos="1"/>
        </call-macro>
        <out>
          <chunk name="ger" case="caseFirstWord">
            <tags>
              <tag>
                <lit-tag v="ger"/>
              </tag>
              <tag>
                <clip pos="1" side="tl" part="a_verb"/>
              </tag>
              <tag>
                <clip pos="1" side="tl" part="temps"/>
              </tag>
              <tag>
                <var n="tipusverb"/>
              </tag>
            </tags>
            <lu>
              <clip pos="1" side="tl" part="lemh"/>
              <clip pos="1" side="tl" part="a_verb"/>
              <clip pos="1" side="tl" part="temps"/>
              <clip pos="1" side="tl" part="pers"/>
              <clip pos="1" side="tl" part="nbr"/>
              <clip pos="1" side="tl" part="lemq"/>
            </lu>
          </chunk>
        </out>
        <let>
          <var n="caseFirstWord"/>
          <lit v="aa"/>
        </let>
      </action>
    </rule>
    <!--
	<rule comment="REGLA: ppres">
	<pattern>
	<pattern-item n="ppres"/>
	</pattern>
	<action>
	<out>
	<chunk name="que_verb">
        <tags>
        <tag><lit-tag v="SV"/></tag>
        <tag><lit-tag v="pri"/></tag>
        <tag><lit-tag v="p3"/></tag>
        <tag><lit-tag v="ND"/></tag>
        </tags>
        <lu>
        <lit v="que"/> 
        <lit-tag v="cnjsub"/>
        </lu>
        <b/>
        <lu>
        <clip pos="1" side="tl" part="lemh"/> 
        <clip pos="1" side="tl" part="a_verb"/>
        <lit-tag v="2"/>
        <lit-tag v="3"/>
        %%<clip pos="1" side="tl" part="pers"/>
        <clip pos="1" side="tl" part="lemq"/> 
        </lu>
	</chunk>
	</out>
	<let>
	<var n="caseFirstWord"/>
	<lit v="aa"/>
	</let>
	</action>
	</rule>
	<rule comment="REGLA: prnpro ppres">
	<pattern>
	<pattern-item n="prnpro"/>
	<pattern-item n="ppres"/>
	</pattern>
	<action>
	<out>
	<chunk name="que_pro_verb">
        <tags>
        <tag><lit-tag v="SV"/></tag>
        <tag><lit-tag v="pri"/></tag>
        <tag><lit-tag v="p3"/></tag>
        <tag><lit-tag v="ND"/></tag>

</tags>
<lu>
<lit v="que"/> 
<lit-tag v="cnjsub"/>
</lu>
<b/>
<lu>
<clip pos="1" side="tl" part="lem"/> 
<lit-tag v="prn.obj"/>
<clip pos="1" side="tl" part="tipoenc_pro"/>
</lu>
<b pos="1"/>
<lu>
<clip pos="2" side="tl" part="lemh"/> 
<clip pos="2" side="tl" part="a_verb"/>
<lit-tag v="2"/>
<lit-tag v="3"/>
%%<clip pos="1" side="tl" part="pers"/>
<clip pos="2" side="tl" part="lemq"/> 
</lu>
</chunk>
</out>
<let>
<var n="caseFirstWord"/>
<lit v="aa"/>
</let>
</action>
</rule>-->
    <rule comment="REGLA: ALLER INF">
      <pattern>
        <pattern-item n="aller"/>
        <pattern-item n="inf"/>
      </pattern>
      <action>
        <call-macro n="f_ppres">
          <with-param pos="1"/>
        </call-macro>
        <call-macro n="tipus_verb">
          <with-param pos="2"/>
        </call-macro>
        <call-macro n="firstWord">
          <with-param pos="1"/>
        </call-macro>
        <out>
          <chunk name="aller_inf" case="caseFirstWord">
            <tags>
              <tag><lit-tag v="SV"/></tag>
              <tag><clip pos="1" side="tl" part="a_verb"/></tag>
              <tag><clip pos="1" side="tl" part="temps"/></tag>
              <tag><clip pos="1" side="tl" part="pers"/></tag>
              <tag><clip pos="1" side="tl" part="nbr"/></tag>
              <tag><var n="tipusverb"/></tag>
            </tags>
            <lu>
              <clip pos="1" side="tl" part="lemh"/>
              <clip pos="1" side="tl" part="a_verb"/>
              <clip pos="1" side="tl" part="temps"/>
              <clip pos="1" side="tl" part="pers"/>
              <clip pos="1" side="tl" part="nbr" link-to="5"/>
              <clip pos="1" side="tl" part="lemq"/>
            </lu>
            <b pos="1"/>
            <lu>
              <lit v="to"/>
              <lit-tag v="pr"/>
            </lu>
            <b/>
            <lu>
              <clip pos="2" side="tl" part="lemh"/>
              <clip pos="2" side="tl" part="a_verb"/>
              <clip pos="2" side="tl" part="temps"/>
              <clip pos="2" side="tl" part="pers"/>
              <clip pos="2" side="tl" part="nbr"/>
              <clip pos="2" side="tl" part="lemq"/>
            </lu>
          </chunk>
        </out>
        <let>
          <var n="caseFirstWord"/>
          <lit v="aa"/>
        </let>
      </action>
    </rule>
    <rule comment="REGLA: ALLER-prnperssubj INF">
      <pattern>
        <pattern-item n="aller"/>
        <pattern-item n="prnperssubj"/>
        <pattern-item n="inf"/>
      </pattern>
      <action>
        <call-macro n="f_ppres">
          <with-param pos="1"/>
        </call-macro>
        <call-macro n="tipus_verb">
          <with-param pos="3"/>
        </call-macro>
        <call-macro n="firstWord">
          <with-param pos="1"/>
        </call-macro>
        <choose>
          <when>
            <test>
              <equal>
                <clip pos="2" side="sl" part="lem"/>
                <lit v="on"/>
              </equal>
            </test>
            <out>
              <chunk name="pro_go_to_inf" case="caseFirstWord">
                <tags>
                  <tag><lit-tag v="SV"/></tag>
                  <tag><clip pos="1" side="tl" part="a_verb"/></tag>
                  <tag><clip pos="1" side="tl" part="temps"/></tag>
                  <tag><clip pos="1" side="tl" part="pers"/></tag>
                  <tag><clip pos="1" side="tl" part="nbr"/></tag>
                  <tag><var n="tipusverb"/></tag>
                </tags>
                <lu>
                  <get-case-from pos="1">
                    <clip pos="2" side="tl" part="lem"/>
                  </get-case-from>
                  <lit-tag v="prn.obj"/>
                  <clip pos="2" side="tl" part="tipoenc_pro"/>
                </lu>
                <b/>
                <lu>
                  <get-case-from pos="2">
                    <clip pos="1" side="tl" part="lemh"/>
                  </get-case-from>
                  <clip pos="1" side="tl" part="a_verb"/>
                  <clip pos="1" side="tl" part="temps"/>
                  <clip pos="1" side="tl" part="pers"/>
                  <clip pos="1" side="tl" part="nbr" link-to="5"/>
                  <clip pos="1" side="tl" part="lemq"/>
                </lu>
                <b/>
                <lu>
                  <lit v="to"/>
                  <lit-tag v="pr"/>
                </lu>
                <b pos="2"/>
                <lu>
                  <clip pos="3" side="tl" part="lemh"/>
                  <clip pos="3" side="tl" part="a_verb"/>
                  <clip pos="3" side="tl" part="temps"/>
                  <clip pos="3" side="tl" part="pers"/>
                  <clip pos="3" side="tl" part="nbr"/>
                  <clip pos="3" side="tl" part="lemq"/>
                </lu>
              </chunk>
            </out>
          </when>
          <otherwise>
            <out>
              <chunk name="go_to_inf" case="caseFirstWord">
                <tags>
                  <tag><lit-tag v="SV"/></tag>
                  <tag><clip pos="1" side="tl" part="a_verb"/></tag>
                  <tag><clip pos="1" side="tl" part="temps"/></tag>
                  <tag><clip pos="1" side="tl" part="pers"/></tag>
                  <tag><clip pos="1" side="tl" part="nbr"/></tag>
                  <tag><var n="tipusverb"/></tag>
                </tags>
                <lu>
                  <clip pos="1" side="tl" part="lemh"/>
                  <clip pos="1" side="tl" part="a_verb"/>
                  <clip pos="1" side="tl" part="temps"/>
                  <clip pos="1" side="tl" part="pers"/>
                  <clip pos="1" side="tl" part="nbr" link-to="5"/>
                  <clip pos="1" side="tl" part="lemq"/>
                </lu>
                <b/>
                <lu>
                  <lit v="to"/>
                  <lit-tag v="pr"/>
                </lu>
                <b pos="2"/>
                <lu>
                  <clip pos="3" side="tl" part="lemh"/>
                  <clip pos="3" side="tl" part="a_verb"/>
                  <clip pos="3" side="tl" part="temps"/>
                  <clip pos="3" side="tl" part="pers"/>
                  <clip pos="3" side="tl" part="nbr"/>
                  <clip pos="3" side="tl" part="lemq"/>
                </lu>
              </chunk>
            </out>
          </otherwise>
        </choose>
        <let>
          <var n="caseFirstWord"/>
          <lit v="aa"/>
        </let>
      </action>
    </rule>
    <rule comment="aller adv inf -&gt; adv go to inf">
      <pattern>
        <pattern-item n="aller"/>
        <pattern-item n="adv"/>
        <pattern-item n="inf"/>
      </pattern>
      <action>
        <call-macro n="tipus_verb">
          <with-param pos="3"/>
        </call-macro>
        <call-macro n="f_ppres">
          <with-param pos="1"/>
        </call-macro>
        <call-macro n="firstWord">
          <with-param pos="1"/>
        </call-macro>
        <choose>
          <when>
            <test>
              <equal caseless="yes">
                <clip pos="2" side="sl" part="lem"/>
                <lit v="pas"/>
              </equal>
            </test>
            <out>
              <chunk name="go_to_inf" case="caseFirstWord">
                <tags>
                  <tag><lit-tag v="SV"/></tag>
                  <tag><clip pos="1" side="tl" part="a_verb"/></tag>
                  <tag><clip pos="1" side="tl" part="temps"/></tag>
                  <tag><clip pos="1" side="tl" part="pers"/></tag>
                  <tag><clip pos="1" side="tl" part="nbr"/></tag>
                  <tag><var n="tipusverb"/></tag>
                </tags>
                <lu>
                  <clip pos="1" side="tl" part="lem"/>
                  <clip pos="1" side="tl" part="a_verb"/>
                  <clip pos="1" side="tl" part="temps"/>
                  <clip pos="1" side="tl" part="pers"/>
                  <clip pos="1" side="tl" part="nbr" link-to="5"/>
                  <clip pos="1" side="tl" part="lemq"/>
                </lu>
                <b pos="1"/>
                <lu>
                  <lit v="to"/>
                  <lit-tag v="pr"/>
                </lu>
                <b pos="2"/>
                <lu>
                  <clip pos="3" side="tl" part="lemh"/>
                  <clip pos="3" side="tl" part="a_verb"/>
                  <clip pos="3" side="tl" part="temps"/>
                  <clip pos="3" side="tl" part="lemq"/>
                </lu>
              </chunk>
            </out>
          </when>
          <otherwise>
            <out>
              <chunk name="go_to_inf" case="caseFirstWord">
                <tags>
                  <tag><lit-tag v="SV"/></tag>
                  <tag><clip pos="1" side="tl" part="a_verb"/></tag>
                  <tag><clip pos="1" side="tl" part="temps"/></tag>
                  <tag><clip pos="1" side="tl" part="pers"/></tag>
                  <tag><clip pos="1" side="tl" part="nbr"/></tag>
                  <tag><var n="tipusverb"/></tag>
                </tags>
                <lu>
                  <clip pos="1" side="tl" part="lem"/>
                  <clip pos="1" side="tl" part="a_verb"/>
                  <clip pos="1" side="tl" part="temps"/>
                  <clip pos="1" side="tl" part="pers"/>
                  <clip pos="1" side="tl" part="nbr" link-to="5"/>
                </lu>
                <b/>
                <lu>
                  <lit v="to"/>
                  <lit-tag v="pr"/>
                </lu>
                <b pos="2"/>
                <lu>
                  <clip pos="3" side="tl" part="lemh"/>
                  <clip pos="3" side="tl" part="a_verb"/>
                  <clip pos="3" side="tl" part="temps"/>
                  <clip pos="3" side="tl" part="lemq"/>
                </lu>
              </chunk>
              <b pos="1"/>
              <chunk name="adv">
                <tags>
                  <tag>
                    <clip pos="2" side="tl" part="a_adv"/>
                  </tag>
                  <tag>
                    <clip pos="2" side="tl" part="neg"/>
                  </tag>
                </tags>
                <lu>
                  <clip pos="2" side="tl" part="lem"/>
                  <clip pos="2" side="tl" part="a_adv"/>
                </lu>
              </chunk>
            </out>
          </otherwise>
        </choose>
        <let>
          <var n="caseFirstWord"/>
          <lit v="aa"/>
        </let>
      </action>
    </rule>
    <rule comment="aller-t-prnsubj adv inf -&gt; adv go to inf">
      <pattern>
        <pattern-item n="aller"/>
        <pattern-item n="prnperssubj"/>
        <pattern-item n="adv"/>
        <pattern-item n="inf"/>
      </pattern>
      <action>
        <call-macro n="tipus_verb">
          <with-param pos="3"/>
        </call-macro>
        <call-macro n="f_ppres">
          <with-param pos="1"/>
        </call-macro>
        <call-macro n="firstWord">
          <with-param pos="1"/>
        </call-macro>
        <choose>
          <when>
            <test>
              <equal caseless="yes">
                <clip pos="3" side="sl" part="lem"/>
                <lit v="pas"/>
              </equal>
            </test>
            <out>
              <chunk name="go_to_inf" case="caseFirstWord">
                <tags>
                  <tag><lit-tag v="SV"/></tag>
                  <tag><clip pos="1" side="tl" part="a_verb"/></tag>
                  <tag><clip pos="1" side="tl" part="temps"/></tag>
                  <tag><clip pos="1" side="tl" part="pers"/></tag>
                  <tag><clip pos="1" side="tl" part="nbr"/></tag>
                  <tag><var n="tipusverb"/></tag>
                </tags>
                <lu>
                  <clip pos="1" side="tl" part="lem"/>
                  <clip pos="1" side="tl" part="a_verb"/>
                  <clip pos="1" side="tl" part="temps"/>
                  <clip pos="1" side="tl" part="pers"/>
                  <clip pos="1" side="tl" part="nbr" link-to="5"/>
                  <clip pos="1" side="tl" part="lemq"/>
                </lu>
                <b pos="3"/>
                <lu>
                  <lit v="to"/>
                  <lit-tag v="pr"/>
                </lu>
                <b pos="3"/>
                <lu>
                  <clip pos="4" side="tl" part="lemh"/>
                  <clip pos="4" side="tl" part="a_verb"/>
                  <clip pos="4" side="tl" part="temps"/>
                  <clip pos="4" side="tl" part="lemq"/>
                </lu>
              </chunk>
            </out>
          </when>
          <otherwise>
            <out>
              <chunk name="go_to_inf" case="caseFirstWord">
                <tags>
                  <tag><lit-tag v="SV"/></tag>
                  <tag><clip pos="1" side="tl" part="a_verb"/></tag>
                  <tag><clip pos="1" side="tl" part="temps"/></tag>
                  <tag><clip pos="1" side="tl" part="pers"/></tag>
                  <tag><clip pos="1" side="tl" part="nbr"/></tag>
                  <tag><var n="tipusverb"/></tag>
                </tags>
                <lu>
                  <clip pos="1" side="tl" part="lem"/>
                  <clip pos="1" side="tl" part="a_verb"/>
                  <clip pos="1" side="tl" part="temps"/>
                  <clip pos="1" side="tl" part="pers"/>
                  <clip pos="1" side="tl" part="nbr" link-to="5"/>
                </lu>
                <b/>
                <lu>
                  <lit v="to"/>
                  <lit-tag v="pr"/>
                </lu>
                <b pos="3"/>
                <lu>
                  <clip pos="4" side="tl" part="lemh"/>
                  <clip pos="4" side="tl" part="a_verb"/>
                  <clip pos="4" side="tl" part="temps"/>
                  <clip pos="4" side="tl" part="lemq"/>
                </lu>
              </chunk>
              <b pos="3"/>
              <chunk name="adv">
                <tags>
                  <tag>
                    <clip pos="3" side="tl" part="a_adv"/>
                  </tag>
                  <tag>
                    <clip pos="3" side="tl" part="neg"/>
                  </tag>
                </tags>
                <lu>
                  <clip pos="3" side="tl" part="lem"/>
                  <clip pos="3" side="tl" part="a_adv"/>
                </lu>
              </chunk>
            </out>
          </otherwise>
        </choose>
        <let>
          <var n="caseFirstWord"/>
          <lit v="aa"/>
        </let>
      </action>
    </rule>
    <rule comment="REGLA: en ger-&gt; ger">
      <pattern>
        <pattern-item n="enprep"/>
        <pattern-item n="ger"/>
      </pattern>
      <action>
        <call-macro n="tipus_verb">
          <with-param pos="2"/>
        </call-macro>
        <call-macro n="firstWord">
          <with-param pos="1"/>
        </call-macro>
        <out>
          <chunk name="ger" case="caseFirstWord">
            <tags>
              <tag><lit-tag v="ger"/></tag>
              <tag><clip pos="2" side="tl" part="a_verb"/></tag>
              <tag><clip pos="2" side="tl" part="temps"/></tag>
              <tag><clip pos="2" side="tl" part="pers"/></tag>
              <tag><clip pos="2" side="tl" part="nbr"/></tag>
              <tag><var n="tipusverb"/></tag>
            </tags>
            <lu>
              <clip pos="2" side="tl" part="lemh"/>
              <clip pos="2" side="tl" part="a_verb"/>
              <clip pos="2" side="tl" part="temps"/>
              <clip pos="2" side="tl" part="pers"/>
              <clip pos="2" side="tl" part="nbr"/>
              <clip pos="2" side="tl" part="lemq"/>
            </lu>
          </chunk>
        </out>
        <call-macro n="f_bcond">
          <with-param pos="1"/>
          <with-param pos="2"/>
        </call-macro>
        <let>
          <var n="caseFirstWord"/>
          <lit v="aa"/>
        </let>
      </action>
    </rule>
    <rule comment="REGLA: tout en ger-&gt; ger">
      <pattern>
        <pattern-item n="tout"/>
        <pattern-item n="enprep"/>
        <pattern-item n="ger"/>
      </pattern>
      <action>
        <call-macro n="tipus_verb">
          <with-param pos="3"/>
        </call-macro>
        <call-macro n="firstWord">
          <with-param pos="1"/>
        </call-macro>
        <out>
          <chunk name="ger" case="caseFirstWord">
            <tags>
              <tag><lit-tag v="ger"/></tag>
              <tag><clip pos="3" side="tl" part="a_verb"/></tag>
              <tag><clip pos="3" side="tl" part="temps"/></tag>
              <tag><var n="tipusverb"/></tag>
            </tags>
            <lu>
              <clip pos="3" side="tl" part="lemh"/>
              <clip pos="3" side="tl" part="a_verb"/>
              <clip pos="3" side="tl" part="temps"/>
              <clip pos="3" side="tl" part="lemq"/>
            </lu>
          </chunk>
        </out>
        <call-macro n="f_bcond">
          <with-param pos="1"/>
          <with-param pos="2"/>
        </call-macro>
        <call-macro n="f_bcond">
          <with-param pos="2"/>
          <with-param pos="3"/>
        </call-macro>
        <let>
          <var n="caseFirstWord"/>
          <lit v="aa"/>
        </let>
      </action>
    </rule>
    <rule comment="REGLA:en train de -&gt; ger">
      <pattern>
        <pattern-item n="en"/>
        <pattern-item n="train"/>
        <pattern-item n="de"/>
        <pattern-item n="inf"/>
      </pattern>
      <action>
        <call-macro n="tipus_verb">
          <with-param pos="4"/>
        </call-macro>
        <out>
          <chunk name="ger" case="caseFirstWord">
            <tags>
              <tag><lit-tag v="SV"/></tag>
              <tag><clip pos="4" side="tl" part="a_verb"/></tag>
              <tag><clip pos="4" side="tl" part="temps"/></tag>
              <tag><clip pos="4" side="tl" part="pers"/></tag>
              <tag><clip pos="4" side="tl" part="nbr"/></tag>
              <tag><var n="tipusverb"/></tag>
            </tags>
            <lu>
              <clip pos="4" side="tl" part="lemh"/>
              <clip pos="4" side="tl" part="a_verb"/>
              <lit-tag v="ger"/>
              <clip pos="4" side="tl" part="lemq"/>
            </lu>
          </chunk>
        </out>
        <call-macro n="f_bcond">
          <with-param pos="2"/>
          <with-param pos="3"/>
        </call-macro>
        <call-macro n="f_bcond">
          <with-param pos="3"/>
          <with-param pos="4"/>
        </call-macro>
        <let>
          <var n="caseFirstWord"/>
          <lit v="aa"/>
        </let>
      </action>
    </rule>
    <rule comment="REGLA: être en train de -&gt; be ger">
      <pattern>
        <pattern-item n="vbser"/>
        <pattern-item n="en"/>
        <pattern-item n="train"/>
        <pattern-item n="de"/>
        <pattern-item n="inf"/>
      </pattern>
      <action>
        <call-macro n="tipus_verb">
          <with-param pos="5"/>
        </call-macro>
        <call-macro n="f_ppres">
          <with-param pos="1"/>
        </call-macro>
        <call-macro n="firstWord">
          <with-param pos="1"/>
        </call-macro>
        <call-macro n="conj_verb1">
          <with-param pos="1"/>
        </call-macro>
        <out>
          <chunk name="be_ger" case="caseFirstWord">
            <tags>
              <tag><lit-tag v="SV"/></tag>
              <tag><clip pos="1" side="tl" part="a_verb"/></tag>
              <tag><var n="temps_chunk"/></tag>
              <tag><clip pos="1" side="tl" part="pers"/></tag>
              <tag><clip pos="1" side="tl" part="nbr"/></tag>
              <tag><var n="tipusverb"/></tag>
            </tags>
            <lu>
              <get-case-from pos="1">
                <lit v="be"/>
              </get-case-from>
              <lit-tag v="vbser"/>
              <clip pos="1" side="tl" part="temps"/>
              <clip pos="1" side="tl" part="pers"/>
              <clip pos="1" side="tl" part="nbr" link-to="5"/>
            </lu>
            <b pos="1"/>
            <lu>
              <clip pos="5" side="tl" part="lemh"/>
              <clip pos="5" side="tl" part="a_verb"/>
              <lit-tag v="ger"/>
              <clip pos="5" side="tl" part="lemq"/>
            </lu>
          </chunk>
        </out>
        <call-macro n="f_bcond">
          <with-param pos="2"/>
          <with-param pos="3"/>
        </call-macro>
        <call-macro n="f_bcond">
          <with-param pos="3"/>
          <with-param pos="4"/>
        </call-macro>
        <call-macro n="f_bcond">
          <with-param pos="4"/>
          <with-param pos="5"/>
        </call-macro>
        <let>
          <var n="caseFirstWord"/>
          <lit v="aa"/>
        </let>
      </action>
    </rule>
    <rule comment="REGLA: être-prnsub en train de -&gt; be ger">
      <pattern>
        <pattern-item n="vbser"/>
        <pattern-item n="prnperssubj"/>
        <pattern-item n="en"/>
        <pattern-item n="train"/>
        <pattern-item n="de"/>
        <pattern-item n="inf"/>
      </pattern>
      <action>
        <call-macro n="tipus_verb">
          <with-param pos="6"/>
        </call-macro>
        <call-macro n="f_ppres">
          <with-param pos="1"/>
        </call-macro>
        <call-macro n="firstWord">
          <with-param pos="1"/>
        </call-macro>
        <choose>
          <when>
            <test>
              <equal>
                <clip pos="2" side="sl" part="lem"/>
                <lit v="on"/>
              </equal>
            </test>
            <out>
              <chunk name="pro_be_ger" case="caseFirstWord">
                <tags>
                  <tag><lit-tag v="SV"/></tag>
                  <tag><clip pos="6" side="tl" part="a_verb"/></tag>
                  <tag><clip pos="1" side="tl" part="temps"/></tag>
                  <tag><clip pos="1" side="tl" part="pers"/></tag>
                  <tag><clip pos="1" side="tl" part="nbr"/></tag>
                  <tag><var n="tipusverb"/></tag>
                </tags>
                <lu>
                  <get-case-from pos="1">
                    <clip pos="2" side="tl" part="lem"/>
                  </get-case-from>
                  <lit-tag v="prn.obj"/>
                  <clip pos="2" side="tl" part="tipoenc_pro"/>
                </lu>
                <b/>
                <lu>
                  <get-case-from pos="2">
                    <lit v="be"/>
                  </get-case-from>
                  <lit-tag v="vblex"/>
                  <clip pos="1" side="tl" part="temps"/>
                  <clip pos="1" side="tl" part="pers"/>
                  <clip pos="1" side="tl" part="nbr" link-to="5"/>
                </lu>
                <b pos="2"/>
                <lu>
                  <clip pos="6" side="tl" part="lemh"/>
                  <clip pos="6" side="tl" part="a_verb"/>
                  <lit-tag v="ger"/>
                  <clip pos="6" side="tl" part="lemq"/>
                </lu>
              </chunk>
            </out>
          </when>
          <otherwise>
            <out>
              <chunk name="be_ger" case="caseFirstWord">
                <tags>
                  <tag><lit-tag v="SV"/></tag>
                  <tag><clip pos="6" side="tl" part="a_verb"/></tag>
                  <tag><clip pos="1" side="tl" part="temps"/></tag>
                  <tag><clip pos="1" side="tl" part="pers"/></tag>
                  <tag><clip pos="1" side="tl" part="nbr"/></tag>
                  <tag><var n="tipusverb"/></tag>
                </tags>
                <lu>
                  <get-case-from pos="1">
                    <lit v="estar"/>
                  </get-case-from>
                  <lit-tag v="vblex"/>
                  <clip pos="1" side="tl" part="temps"/>
                  <clip pos="1" side="tl" part="pers"/>
                  <clip pos="1" side="tl" part="nbr" link-to="5"/>
                </lu>
                <b pos="2"/>
                <lu>
                  <clip pos="6" side="tl" part="lemh"/>
                  <clip pos="6" side="tl" part="a_verb"/>
                  <lit-tag v="ger"/>
                  <clip pos="6" side="tl" part="lemq"/>
                </lu>
              </chunk>
            </out>
          </otherwise>
        </choose>
        <call-macro n="f_bcond">
          <with-param pos="3"/>
          <with-param pos="4"/>
        </call-macro>
        <call-macro n="f_bcond">
          <with-param pos="4"/>
          <with-param pos="5"/>
        </call-macro>
        <call-macro n="f_bcond">
          <with-param pos="5"/>
          <with-param pos="6"/>
        </call-macro>
        <let>
          <var n="caseFirstWord"/>
          <lit v="aa"/>
        </let>
      </action>
    </rule>
    <rule comment="prnpro">
      <!--per quan va seguit d'un verb desconegut-->
      <pattern>
        <pattern-item n="prnpro"/>
      </pattern>
      <action>
        <call-macro n="f_concord1">
          <with-param pos="1"/>
        </call-macro>
        <call-macro n="firstWord">
          <with-param pos="1"/>
        </call-macro>
        <choose>
	  <!-- test whether it is "en" or "y" pronoun -->
	  <!-- FIXME: and do nothing? (call-macro below has been commented out) -->
          <when>
            <test>
              <or>
                <equal caseless="yes">
                  <clip pos="1" side="sl" part="lem"/>
                  <lit v="en"/>
                </equal>
                <equal caseless="yes">
                  <clip pos="1" side="sl" part="lem"/>
                  <lit v="y"/>
                </equal>
              </or>
            </test>
	    <!--<call-macro n="f_bcondfirst">
		<with-param pos="1"/>
		</call-macro>-->
          </when>
	  <!-- as for the rest of pronouns... -->
          <otherwise>
            <out>
              <chunk name="pro" case="caseFirstWord">
                <tags>
                  <tag>
                    <lit-tag v="prnpro"/>
                  </tag>
                  <tag>
                    <clip pos="1" side="tl" part="tipoenc_pro"/>
                  </tag>
                </tags>
                <lu>
                  <clip pos="1" side="tl" part="lem"/>
                  <lit-tag v="prn.obj"/>
                  <clip pos="1" side="tl" part="tipoenc_pro"/>
                </lu>
              </chunk>
            </out>
          </otherwise>
        </choose>
        <let>
          <var n="caseFirstWord"/>
          <lit v="aa"/>
        </let>
      </action>
    </rule>
    <rule comment="prnpro verbpers">
      <pattern>
        <pattern-item n="prnpro"/>
        <pattern-item n="verbpers"/>
      </pattern>
      <action>
        <call-macro n="f_concord1">
          <with-param pos="1"/>
        </call-macro>
        <call-macro n="tipus_verb">
          <with-param pos="2"/>
        </call-macro>
        <call-macro n="verb_ref">
          <with-param pos="1"/>
          <with-param pos="2"/>
        </call-macro>
        <call-macro n="f_ppres">
          <with-param pos="2"/>
        </call-macro>
        <call-macro n="firstWord">
          <with-param pos="1"/>
        </call-macro>
        <choose>
          <when>
            <test>
              <or>
                <equal caseless="yes">
                  <clip pos="1" side="sl" part="lem"/>
                  <lit v="en"/>
                </equal>
                <equal caseless="yes">
                  <clip pos="1" side="sl" part="lem"/>
                  <lit v="y"/>
                </equal>
              </or>
            </test>
            <out>
              <chunk name="verb" case="caseFirstWord">
                <tags>
                  <tag><lit-tag v="SV"/></tag>
                  <tag><clip pos="2" side="tl" part="a_verb"/></tag>
                  <tag><clip pos="2" side="tl" part="temps"/></tag>
                  <tag><clip pos="2" side="tl" part="pers"/></tag>
                  <tag><clip pos="2" side="tl" part="nbr"/></tag>
                  <tag><var n="tipusverb"/></tag>
                </tags>
                <lu>
                  <clip pos="2" side="tl" part="lemh"/>
                  <clip pos="2" side="tl" part="a_verb"/>
                  <clip pos="2" side="tl" part="temps"/>
                  <clip pos="2" side="tl" part="pers"/>
                  <clip pos="2" side="tl" part="nbr" link-to="5"/>
                  <clip pos="2" side="tl" part="lemq"/>
                </lu>
              </chunk>
            </out>
            <call-macro n="f_bcond">
              <with-param pos="1"/>
              <with-param pos="2"/>
            </call-macro>
          </when>
          <otherwise>
            <out>
              <chunk name="pro_verb" case="caseFirstWord">
                <tags>
                  <tag><lit-tag v="SV"/></tag>
                  <tag><clip pos="2" side="tl" part="a_verb"/></tag>
                  <tag><clip pos="2" side="tl" part="temps"/></tag>
                  <tag><clip pos="2" side="tl" part="pers"/></tag>
                  <tag><clip pos="2" side="tl" part="nbr"/></tag>
                  <tag><var n="tipusverb"/></tag>
                </tags>
                <lu>
                  <clip pos="2" side="tl" part="lemh"/>
                  <clip pos="2" side="tl" part="a_verb"/>
                  <clip pos="2" side="tl" part="temps" link-to="3"/>
                  <clip pos="2" side="tl" part="pers" link-to="4"/>
                  <clip pos="2" side="tl" part="nbr" link-to="5"/>
                  <clip pos="2" side="tl" part="lemq"/>
                </lu>
                <b pos="1"/>
                <lu>
                  <clip pos="1" side="tl" part="lem"/>
                  <lit-tag v="prn"/>
                  <clip pos="1" side="tl" part="tipus_prn"/>
                  <clip pos="1" side="tl" part="tipoenc_pro"/>
                </lu>
              </chunk>
            </out>
          </otherwise>
        </choose>
        <let>
          <var n="caseFirstWord"/>
          <lit v="aa"/>
        </let>
      </action>
    </rule>
    <rule comment="prnpro verbpers-prnsubj">
      <pattern>
        <pattern-item n="prnpro"/>
        <pattern-item n="verbpers"/>
        <pattern-item n="prnperssubj"/>
      </pattern>
      <action>
        <call-macro n="f_concord1">
          <with-param pos="1"/>
        </call-macro>
        <call-macro n="tipus_verb">
          <with-param pos="2"/>
        </call-macro>
        <call-macro n="verb_ref">
          <with-param pos="1"/>
          <with-param pos="2"/>
        </call-macro>
        <call-macro n="f_ppres">
          <with-param pos="2"/>
        </call-macro>
        <call-macro n="firstWord">
          <with-param pos="1"/>
        </call-macro>
        <choose>
          <when>
            <test>
              <and>
                <equal>
                  <clip pos="3" side="sl" part="lem"/>
                  <lit v="on"/>
                </equal>
                <not>
                  <equal>
                    <clip pos="1" side="sl" part="lem"/>
                    <lit v="se"/>
                  </equal>
                </not>
              </and>
            </test>
            <choose>
              <when>
                <test>
                  <or>
                    <equal caseless="yes">
                      <clip pos="1" side="sl" part="lem"/>
                      <lit v="en"/>
                    </equal>
                    <equal caseless="yes">
                      <clip pos="1" side="sl" part="lem"/>
                      <lit v="y"/>
                    </equal>
                  </or>
                </test>
                <out>
                  <chunk name="pro_verb" case="caseFirstWord">
                    <tags>
                      <tag><lit-tag v="SV"/></tag>
                      <tag><clip pos="2" side="tl" part="a_verb"/></tag>
                      <tag><clip pos="2" side="tl" part="temps"/></tag>
                      <tag><clip pos="2" side="tl" part="pers"/></tag>
                      <tag><clip pos="2" side="tl" part="nbr"/></tag>
                      <tag><var n="tipusverb"/></tag>
                    </tags>
                    <lu>
                      <get-case-from pos="1">
                        <clip pos="3" side="tl" part="lem"/>
                      </get-case-from>
                      <lit-tag v="prn.obj"/>
                      <clip pos="3" side="tl" part="tipoenc_pro"/>
                    </lu>
                    <b/>
                    <lu>
                      <clip pos="2" side="tl" part="lemh"/>
                      <clip pos="2" side="tl" part="a_verb"/>
                      <clip pos="2" side="tl" part="temps"/>
                      <clip pos="2" side="tl" part="pers"/>
                      <clip pos="2" side="tl" part="nbr" link-to="5"/>
                      <clip pos="2" side="tl" part="lemq"/>
                    </lu>
                  </chunk>
                </out>
                <call-macro n="f_bcond">
                  <with-param pos="1"/>
                  <with-param pos="2"/>
                </call-macro>
              </when>
              <otherwise>
                <out>
                  <chunk name="pro_pro_verb" case="caseFirstWord">
                    <tags>
                      <tag><lit-tag v="SV"/></tag>
                      <tag><clip pos="2" side="tl" part="a_verb"/></tag>
                      <tag><clip pos="2" side="tl" part="temps"/></tag>
                      <tag><clip pos="2" side="tl" part="pers"/></tag>
                      <tag><clip pos="2" side="tl" part="nbr"/></tag>
                      <tag><var n="tipusverb"/></tag>
                    </tags>
                    <lu>
                      <get-case-from pos="1">
                        <clip pos="3" side="tl" part="lem"/>
                      </get-case-from>
                      <lit-tag v="prn.obj"/>
                      <clip pos="3" side="tl" part="tipoenc_pro"/>
                    </lu>
                    <b/>
                    <lu>
                      <clip pos="1" side="tl" part="lem"/>
                      <lit-tag v="prn.obj"/>
                      <clip pos="1" side="tl" part="tipoenc_pro"/>
                    </lu>
                    <b pos="1"/>
                    <lu>
                      <clip pos="2" side="tl" part="lemh"/>
                      <clip pos="2" side="tl" part="a_verb"/>
                      <clip pos="2" side="tl" part="temps"/>
                      <clip pos="2" side="tl" part="pers"/>
                      <clip pos="2" side="tl" part="nbr" link-to="5"/>
                      <clip pos="2" side="tl" part="lemq"/>
                    </lu>
                  </chunk>
                </out>
              </otherwise>
            </choose>
          </when>
          <otherwise>
            <choose>
              <when>
                <test>
                  <or>
                    <equal caseless="yes">
                      <clip pos="1" side="sl" part="lem"/>
                      <lit v="en"/>
                    </equal>
                    <equal caseless="yes">
                      <clip pos="1" side="sl" part="lem"/>
                      <lit v="y"/>
                    </equal>
                  </or>
                </test>
                <out>
                  <chunk name="verb" case="caseFirstWord">
                    <tags>
                      <tag><lit-tag v="SV"/></tag>
                      <tag><clip pos="2" side="tl" part="a_verb"/></tag>
                      <tag><clip pos="2" side="tl" part="temps"/></tag>
                      <tag><clip pos="2" side="tl" part="pers"/></tag>
                      <tag><clip pos="2" side="tl" part="nbr"/></tag>
                      <tag><var n="tipusverb"/></tag>
                    </tags>
                    <lu>
                      <clip pos="2" side="tl" part="lemh"/>
                      <clip pos="2" side="tl" part="a_verb"/>
                      <clip pos="2" side="tl" part="temps"/>
                      <clip pos="2" side="tl" part="pers"/>
                      <clip pos="2" side="tl" part="nbr" link-to="5"/>
                      <clip pos="2" side="tl" part="lemq"/>
                    </lu>
                  </chunk>
                </out>
                <call-macro n="f_bcond">
                  <with-param pos="1"/>
                  <with-param pos="2"/>
                </call-macro>
              </when>
              <otherwise>
                <out>
                  <chunk name="pro_verb" case="caseFirstWord">
                    <tags>
                      <tag><lit-tag v="SV"/></tag>
                      <tag><clip pos="2" side="tl" part="a_verb"/></tag>
                      <tag><clip pos="2" side="tl" part="temps"/></tag>
                      <tag><clip pos="2" side="tl" part="pers"/></tag>
                      <tag><clip pos="2" side="tl" part="nbr"/></tag>
                      <tag><var n="tipusverb"/></tag>
                    </tags>
                    <lu>
                      <clip pos="2" side="tl" part="lemh"/>
                      <clip pos="2" side="tl" part="a_verb"/>
                      <clip pos="2" side="tl" part="temps"/>
                      <clip pos="2" side="tl" part="pers"/>
                      <clip pos="2" side="tl" part="nbr" link-to="5"/>
                      <clip pos="2" side="tl" part="lemq"/>
                    </lu>
                    <b pos="1"/>
                    <lu>
                      <clip pos="1" side="tl" part="lem"/>
                      <lit-tag v="prn.obj"/>
                      <clip pos="1" side="tl" part="tipoenc_pro"/>
                    </lu>
                  </chunk>
                </out>
              </otherwise>
            </choose>
          </otherwise>
        </choose>
        <let>
          <var n="caseFirstWord"/>
          <lit v="aa"/>
        </let>
      </action>
    </rule>
    <rule comment="prnpro prnpro verbpers">
      <pattern>
        <pattern-item n="prnpro"/>
        <pattern-item n="prnpro"/>
        <pattern-item n="verbpers"/>
      </pattern>
      <action>
        <call-macro n="f_concord1">
          <with-param pos="1"/>
        </call-macro>
        <call-macro n="f_concord1">
          <with-param pos="2"/>
        </call-macro>
        <call-macro n="tipus_verb">
          <with-param pos="3"/>
        </call-macro>
        <call-macro n="f_ppres">
          <with-param pos="3"/>
        </call-macro>
        <call-macro n="firstWord">
          <with-param pos="1"/>
        </call-macro>
        <choose>
          <when>
            <test>
              <equal caseless="yes">
                <clip pos="1" side="sl" part="lem"/>
                <lit v="en"/>
              </equal>
            </test>
            <choose>
              <when>
                <test>
                  <equal caseless="yes">
                    <clip pos="2" side="sl" part="lem"/>
                    <lit v="y"/>
                  </equal>
                </test>
                <out>
                  <chunk name="verb" case="caseFirstWord">
                    <tags>
                      <tag><lit-tag v="SV"/></tag>
                      <tag><clip pos="3" side="tl" part="a_verb"/></tag>
                      <tag><clip pos="3" side="tl" part="temps"/></tag>
                      <tag><clip pos="3" side="tl" part="pers"/></tag>
                      <tag><clip pos="3" side="tl" part="nbr"/></tag>
                      <tag><var n="tipusverb"/></tag>
                    </tags>
                    <lu>
                      <clip pos="3" side="tl" part="lemh"/>
                      <clip pos="3" side="tl" part="a_verb"/>
                      <clip pos="3" side="tl" part="temps"/>
                      <clip pos="3" side="tl" part="pers"/>
                      <clip pos="3" side="tl" part="nbr" link-to="5"/>
                      <clip pos="3" side="tl" part="lemq"/>
                    </lu>
                  </chunk>
                </out>
                <call-macro n="f_bcond">
                  <with-param pos="1"/>
                  <with-param pos="2"/>
                </call-macro>
                <call-macro n="f_bcond">
                  <with-param pos="2"/>
                  <with-param pos="3"/>
                </call-macro>
              </when>
              <otherwise>
                <out>
                  <chunk name="pro_verb" case="caseFirstWord">
                    <tags>
                      <tag><lit-tag v="SV"/></tag>
                      <tag><clip pos="3" side="tl" part="a_verb"/></tag>
                      <tag><clip pos="3" side="tl" part="temps"/></tag>
                      <tag><clip pos="3" side="tl" part="pers"/></tag>
                      <tag><clip pos="3" side="tl" part="nbr"/></tag>
                      <tag><var n="tipusverb"/></tag>
                    </tags>
                    <lu>
                      <clip pos="2" side="tl" part="whole"/>
                    </lu>
                    <b pos="1"/>
                    <lu>
                      <clip pos="3" side="tl" part="lemh"/>
                      <clip pos="3" side="tl" part="a_verb"/>
                      <clip pos="3" side="tl" part="temps"/>
                      <clip pos="3" side="tl" part="pers"/>
                      <clip pos="3" side="tl" part="nbr" link-to="5"/>
                      <clip pos="3" side="tl" part="lemq"/>
                    </lu>
                  </chunk>
                </out>
              </otherwise>
            </choose>
          </when>
          <otherwise>
            <choose>
              <when>
                <test>
                  <or>
                    <equal caseless="yes">
                      <clip pos="2" side="sl" part="lem"/>
                      <lit v="en"/>
                    </equal>
                    <equal caseless="yes">
                      <clip pos="2" side="sl" part="lem"/>
                      <lit v="y"/>
                    </equal>
                  </or>
                </test>
                <out>
                  <chunk name="verb" case="caseFirstWord">
                    <tags>
                      <tag><lit-tag v="SV"/></tag>
                      <tag><clip pos="3" side="tl" part="a_verb"/></tag>
                      <tag><clip pos="3" side="tl" part="temps"/></tag>
                      <tag><clip pos="3" side="tl" part="pers"/></tag>
                      <tag><clip pos="3" side="tl" part="nbr"/></tag>
                      <tag><var n="tipusverb"/></tag>
                    </tags>
                    <lu>
                      <get-case-from pos="1">
                        <clip pos="3" side="tl" part="lemh"/>
                      </get-case-from>
                      <clip pos="3" side="tl" part="a_verb"/>
                      <clip pos="3" side="tl" part="temps"/>
                      <clip pos="3" side="tl" part="pers"/>
                      <clip pos="3" side="tl" part="nbr" link-to="5"/>
                      <clip pos="3" side="tl" part="lemq"/>
                    </lu>
                  </chunk>
                </out>
              </when>
              <otherwise>
                <out>
                  <chunk name="pro_pro_verb" case="caseFirstWord">
                    <tags>
                      <tag><lit-tag v="SV"/></tag>
                      <tag><clip pos="3" side="tl" part="a_verb"/></tag>
                      <tag><clip pos="3" side="tl" part="temps"/></tag>
                      <tag><clip pos="3" side="tl" part="pers"/></tag>
                      <tag><clip pos="3" side="tl" part="nbr"/></tag>
                      <tag><var n="tipusverb"/></tag>
                    </tags>
                    <lu>
                      <clip pos="1" side="tl" part="whole"/>
                    </lu>
                    <b pos="1"/>
                    <lu>
                      <clip pos="2" side="tl" part="whole"/>
                    </lu>
                    <b pos="2"/>
                    <lu>
                      <clip pos="3" side="tl" part="lemh"/>
                      <clip pos="3" side="tl" part="a_verb"/>
                      <clip pos="3" side="tl" part="temps"/>
                      <clip pos="3" side="tl" part="pers"/>
                      <clip pos="3" side="tl" part="nbr" link-to="5"/>
                      <clip pos="3" side="tl" part="lemq"/>
                    </lu>
                  </chunk>
                </out>
              </otherwise>
            </choose>
          </otherwise>
        </choose>
        <let>
          <var n="caseFirstWord"/>
          <lit v="aa"/>
        </let>
      </action>
    </rule>
    <rule comment="prnpro prnpro verbpers-prn">
      <!--en aquesta no poso el tema de l'"on" perquè no sé com es manega, amb tres prn-->
      <pattern>
        <pattern-item n="prnpro"/>
        <pattern-item n="prnpro"/>
        <pattern-item n="verbpers"/>
        <pattern-item n="prnperssubj"/>
      </pattern>
      <action>
        <call-macro n="f_concord1">
          <with-param pos="1"/>
        </call-macro>
        <call-macro n="f_concord1">
          <with-param pos="2"/>
        </call-macro>
        <call-macro n="tipus_verb">
          <with-param pos="3"/>
        </call-macro>
        <call-macro n="f_ppres">
          <with-param pos="3"/>
        </call-macro>
        <call-macro n="firstWord">
          <with-param pos="1"/>
        </call-macro>
        <choose>
          <when>
            <test>
              <equal caseless="yes">
                <clip pos="1" side="sl" part="lem"/>
                <lit v="en"/>
              </equal>
            </test>
            <choose>
              <when>
                <test>
                  <equal caseless="yes">
                    <clip pos="2" side="sl" part="lem"/>
                    <lit v="y"/>
                  </equal>
                </test>
                <out>
                  <chunk name="verb" case="caseFirstWord">
                    <tags>
                      <tag><lit-tag v="SV"/></tag>
                      <tag><clip pos="3" side="tl" part="a_verb"/></tag>
                      <tag><clip pos="3" side="tl" part="temps"/></tag>
                      <tag><clip pos="3" side="tl" part="pers"/></tag>
                      <tag><clip pos="3" side="tl" part="nbr"/></tag>
                      <tag><var n="tipusverb"/></tag>
                    </tags>
                    <lu>
                      <clip pos="3" side="tl" part="lemh"/>
                      <clip pos="3" side="tl" part="a_verb"/>
                      <clip pos="3" side="tl" part="temps"/>
                      <clip pos="3" side="tl" part="pers"/>
                      <clip pos="3" side="tl" part="nbr" link-to="5"/>
                      <clip pos="3" side="tl" part="lemq"/>
                    </lu>
                  </chunk>
                </out>
                <call-macro n="f_bcond">
                  <with-param pos="1"/>
                  <with-param pos="2"/>
                </call-macro>
                <call-macro n="f_bcond">
                  <with-param pos="2"/>
                  <with-param pos="3"/>
                </call-macro>
              </when>
              <otherwise>
                <out>
                  <chunk name="pro_verb" case="caseFirstWord">
                    <tags>
                      <tag><lit-tag v="SV"/></tag>
                      <tag><clip pos="3" side="tl" part="a_verb"/></tag>
                      <tag><clip pos="3" side="tl" part="temps"/></tag>
                      <tag><clip pos="3" side="tl" part="pers"/></tag>
                      <tag><clip pos="3" side="tl" part="nbr"/></tag>
                      <tag><var n="tipusverb"/></tag>
                    </tags>
                    <lu>
                      <clip pos="2" side="tl" part="whole"/>
                    </lu>
                    <b pos="1"/>
                    <lu>
                      <clip pos="3" side="tl" part="lemh"/>
                      <clip pos="3" side="tl" part="a_verb"/>
                      <clip pos="3" side="tl" part="temps"/>
                      <clip pos="3" side="tl" part="pers"/>
                      <clip pos="3" side="tl" part="nbr" link-to="5"/>
                      <clip pos="3" side="tl" part="lemq"/>
                    </lu>
                  </chunk>
                </out>
              </otherwise>
            </choose>
          </when>
          <otherwise>
            <choose>
              <when>
                <test>
                  <or>
                    <equal caseless="yes">
                      <clip pos="2" side="sl" part="lem"/>
                      <lit v="en"/>
                    </equal>
                    <equal caseless="yes">
                      <clip pos="2" side="sl" part="lem"/>
                      <lit v="y"/>
                    </equal>
                  </or>
                </test>
                <out>
                  <chunk name="verb" case="caseFirstWord">
                    <tags>
                      <tag><lit-tag v="SV"/></tag>
                      <tag><clip pos="3" side="tl" part="a_verb"/></tag>
                      <tag><clip pos="3" side="tl" part="temps"/></tag>
                      <tag><clip pos="3" side="tl" part="pers"/></tag>
                      <tag><clip pos="3" side="tl" part="nbr"/></tag>
                      <tag><var n="tipusverb"/></tag>
                    </tags>
                    <lu>
                      <get-case-from pos="1">
                        <clip pos="3" side="tl" part="lemh"/>
                      </get-case-from>
                      <clip pos="3" side="tl" part="a_verb"/>
                      <clip pos="3" side="tl" part="temps"/>
                      <clip pos="3" side="tl" part="pers"/>
                      <clip pos="3" side="tl" part="nbr" link-to="5"/>
                      <clip pos="3" side="tl" part="lemq"/>
                    </lu>
                  </chunk>
                </out>
              </when>
              <otherwise>
                <out>
                  <chunk name="pro_pro_verb" case="caseFirstWord">
                    <tags>
                      <tag><lit-tag v="SV"/></tag>
                      <tag><clip pos="3" side="tl" part="a_verb"/></tag>
                      <tag><clip pos="3" side="tl" part="temps"/></tag>
                      <tag><clip pos="3" side="tl" part="pers"/></tag>
                      <tag><clip pos="3" side="tl" part="nbr"/></tag>
                      <tag><var n="tipusverb"/></tag>
                    </tags>
                    <lu>
                      <clip pos="1" side="tl" part="whole"/>
                    </lu>
                    <b pos="1"/>
                    <lu>
                      <clip pos="2" side="tl" part="whole"/>
                    </lu>
                    <b pos="2"/>
                    <lu>
                      <clip pos="3" side="tl" part="lemh"/>
                      <clip pos="3" side="tl" part="a_verb"/>
                      <clip pos="3" side="tl" part="temps"/>
                      <clip pos="3" side="tl" part="pers"/>
                      <clip pos="3" side="tl" part="nbr" link-to="5"/>
                      <clip pos="3" side="tl" part="lemq"/>
                    </lu>
                  </chunk>
                </out>
              </otherwise>
            </choose>
          </otherwise>
        </choose>
        <let>
          <var n="caseFirstWord"/>
          <lit v="aa"/>
        </let>
      </action>
    </rule>
    <rule comment="prnpro inf">
      <pattern>
        <pattern-item n="prnpro"/>
        <pattern-item n="inf"/>
      </pattern>
      <action>
        <call-macro n="f_concord1">
          <with-param pos="1"/>
        </call-macro>
        <call-macro n="tipus_verb">
          <with-param pos="2"/>
        </call-macro>
        <call-macro n="firstWord">
          <with-param pos="1"/>
        </call-macro>
        <choose>
          <when>
            <test>
              <or>
                <equal caseless="yes">
                  <clip pos="1" side="sl" part="lem"/>
                  <lit v="en"/>
                </equal>
                <equal caseless="yes">
                  <clip pos="1" side="sl" part="lem"/>
                  <lit v="y"/>
                </equal>
              </or>
            </test>
            <out>
              <chunk name="inf" case="caseFirstWord">
                <tags>
                  <tag><lit-tag v="SN"/></tag>
                  <tag><clip pos="2" side="tl" part="a_verb"/></tag>
                  <tag><clip pos="2" side="tl" part="temps"/></tag>
                  <tag><clip pos="2" side="tl" part="pers"/></tag>
                  <tag><clip pos="2" side="tl" part="nbr"/></tag>
                  <tag><var n="tipusverb"/></tag>
                </tags>
                <lu>
                  <get-case-from pos="1">
                    <clip pos="2" side="tl" part="lemh"/>
                  </get-case-from>
                  <clip pos="2" side="tl" part="a_verb"/>
                  <clip pos="2" side="tl" part="temps"/>
                  <clip pos="2" side="tl" part="pers"/>
                  <clip pos="2" side="tl" part="nbr"/>
                  <clip pos="2" side="tl" part="lemq"/>
                </lu>
              </chunk>
            </out>
            <call-macro n="f_bcond">
              <with-param pos="1"/>
              <with-param pos="2"/>
            </call-macro>
          </when>
          <otherwise>
            <out>
              <chunk name="inf_enc" case="caseFirstWord">
                <tags>
                  <tag><lit-tag v="SN"/></tag>
                  <tag><clip pos="2" side="tl" part="a_verb"/></tag>
                  <tag><clip pos="2" side="tl" part="temps"/></tag>
                  <tag><clip pos="2" side="tl" part="pers"/></tag>
                  <tag><clip pos="2" side="tl" part="nbr"/></tag>
                  <tag><var n="tipusverb"/></tag>
                </tags>
                <mlu>
                  <lu>
                    <get-case-from pos="1">
                      <clip pos="2" side="tl" part="lemh"/>
                    </get-case-from>
                    <clip pos="2" side="tl" part="a_verb"/>
                    <clip pos="2" side="tl" part="temps"/>
                    <clip pos="2" side="tl" part="pers"/>
                    <clip pos="2" side="tl" part="nbr"/>
                  </lu>
                  <lu>
                    <clip pos="1" side="tl" part="lem"/>
                    <lit-tag v="prn.enc"/>
                    <clip pos="1" side="tl" part="tipoenc_pro"/>
                    <clip pos="2" side="tl" part="lemq"/>
                  </lu>
                </mlu>
              </chunk>
            </out>
            <call-macro n="f_bcond">
              <with-param pos="1"/>
              <with-param pos="2"/>
            </call-macro>
          </otherwise>
        </choose>
        <let>
          <var n="caseFirstWord"/>
          <lit v="aa"/>
        </let>
      </action>
    </rule>
    <rule comment="prnpro prnpro inf">
      <pattern>
        <pattern-item n="prnpro"/>
        <pattern-item n="prnpro"/>
        <pattern-item n="inf"/>
      </pattern>
      <action>
        <call-macro n="f_concord1">
          <with-param pos="1"/>
        </call-macro>
        <call-macro n="f_concord1">
          <with-param pos="2"/>
        </call-macro>
        <call-macro n="tipus_verb">
          <with-param pos="3"/>
        </call-macro>
        <call-macro n="firstWord">
          <with-param pos="1"/>
        </call-macro>
        <choose>
          <when>
            <test>
              <equal caseless="yes">
                <clip pos="1" side="sl" part="lem"/>
                <lit v="en"/>
              </equal>
            </test>
            <choose>
              <when>
                <test>
                  <equal caseless="yes">
                    <clip pos="2" side="sl" part="lem"/>
                    <lit v="y"/>
                  </equal>
                </test>
                <out>
                  <chunk name="inf" case="caseFirstWord">
                    <tags>
                      <tag><lit-tag v="SN"/></tag>
                      <tag><clip pos="3" side="tl" part="a_verb"/></tag>
                      <tag><clip pos="3" side="tl" part="temps"/></tag>
                      <tag><clip pos="3" side="tl" part="pers"/></tag>
                      <tag><clip pos="3" side="tl" part="nbr"/></tag>
                      <tag><var n="tipusverb"/></tag>
                    </tags>
                    <lu>
                      <get-case-from pos="1">
                        <clip pos="3" side="tl" part="lemh"/>
                      </get-case-from>
                      <clip pos="3" side="tl" part="a_verb"/>
                      <clip pos="3" side="tl" part="temps"/>
                      <clip pos="3" side="tl" part="pers"/>
                      <clip pos="3" side="tl" part="nbr"/>
                      <clip pos="3" side="tl" part="lemq"/>
                    </lu>
                  </chunk>
                </out>
                <call-macro n="f_bcond">
                  <with-param pos="1"/>
                  <with-param pos="2"/>
                </call-macro>
                <call-macro n="f_bcond">
                  <with-param pos="2"/>
                  <with-param pos="3"/>
                </call-macro>
              </when>
              <otherwise>
                <out><!-- fixme: what to do with enclitics? -->
                  <chunk name="inf_enc" case="caseFirstWord">
                    <tags>
                      <tag><lit-tag v="SN"/></tag>
                      <tag><clip pos="3" side="tl" part="a_verb"/></tag>
                      <tag><clip pos="3" side="tl" part="temps"/></tag>
                      <tag><clip pos="3" side="tl" part="pers"/></tag>
                      <tag><clip pos="3" side="tl" part="nbr"/></tag>
                      <tag><var n="tipusverb"/></tag>
                    </tags>
                    <mlu>
                      <lu>
                        <get-case-from pos="1">
                          <clip pos="3" side="tl" part="lemh"/>
                        </get-case-from>
                        <clip pos="3" side="tl" part="a_verb"/>
                        <clip pos="3" side="tl" part="temps"/>
                        <clip pos="3" side="tl" part="pers"/>
                        <clip pos="3" side="tl" part="nbr"/>
                      </lu>
                      <lu>
                        <clip pos="2" side="tl" part="lem"/>
                        <lit-tag v="prn.enc"/>
                        <clip pos="2" side="tl" part="tipoenc_pro"/>
                        <clip pos="3" side="tl" part="lemq"/>
                      </lu>
                    </mlu>
                  </chunk>
                </out>
                <call-macro n="f_bcond">
                  <with-param pos="1"/>
                  <with-param pos="2"/>
                </call-macro>
                <call-macro n="f_bcond">
                  <with-param pos="2"/>
                  <with-param pos="3"/>
                </call-macro>
              </otherwise>
            </choose>
          </when>
          <otherwise>
            <choose>
              <when>
                <test>
                  <or>
                    <equal caseless="yes">
                      <clip pos="2" side="sl" part="lem"/>
                      <lit v="en"/>
                    </equal>
                    <equal caseless="yes">
                      <clip pos="2" side="sl" part="lem"/>
                      <lit v="y"/>
                    </equal>
                  </or>
                </test>
                <out>
                  <chunk name="inf_enc" case="caseFirstWord">
                    <tags>
                      <tag><lit-tag v="SN"/></tag>
                      <tag><clip pos="3" side="tl" part="a_verb"/></tag>
                      <tag><clip pos="3" side="tl" part="temps"/></tag>
                      <tag><clip pos="3" side="tl" part="pers"/></tag>
                      <tag><clip pos="3" side="tl" part="nbr"/></tag>
                      <tag><var n="tipusverb"/></tag>
                    </tags>
                    <mlu>
                      <lu>
                        <get-case-from pos="1">
                          <clip pos="3" side="tl" part="lemh"/>
                        </get-case-from>
                        <clip pos="3" side="tl" part="a_verb"/>
                        <clip pos="3" side="tl" part="temps"/>
                        <clip pos="3" side="tl" part="pers"/>
                        <clip pos="3" side="tl" part="nbr"/>
                      </lu>
                      <lu>
                        <get-case-from pos="2">
                          <clip pos="1" side="tl" part="lem"/>
                        </get-case-from>
                        <lit-tag v="prn.enc"/>
                        <clip pos="1" side="tl" part="tipoenc_pro"/>
                        <clip pos="3" side="tl" part="lemq"/>
                      </lu>
                    </mlu>
                  </chunk>
                </out>
                <call-macro n="f_bcond">
                  <with-param pos="1"/>
                  <with-param pos="2"/>
                </call-macro>
                <call-macro n="f_bcond">
                  <with-param pos="2"/>
                  <with-param pos="3"/>
                </call-macro>
              </when>
              <otherwise>
                <out>
                  <chunk name="inf_enc_enc" case="caseFirstWord">
                    <tags>
                      <tag><lit-tag v="SN"/></tag>
                      <tag><clip pos="3" side="tl" part="a_verb"/></tag>
                      <tag><clip pos="3" side="tl" part="temps"/></tag>
                      <tag><clip pos="3" side="tl" part="pers"/></tag>
                      <tag><clip pos="3" side="tl" part="nbr"/></tag>
                      <tag><var n="tipusverb"/></tag>
                    </tags>
                    <mlu>
                      <lu>
                        <get-case-from pos="1">
                          <clip pos="3" side="tl" part="lemh"/>
                        </get-case-from>
                        <clip pos="3" side="tl" part="a_verb"/>
                        <clip pos="3" side="tl" part="temps"/>
                        <clip pos="3" side="tl" part="pers"/>
                        <clip pos="3" side="tl" part="nbr"/>
                      </lu>
                      <lu>
                        <get-case-from pos="1">
                          <clip pos="1" side="tl" part="lem"/>
                        </get-case-from>
                        <lit-tag v="prn.enc"/>
                        <clip pos="1" side="tl" part="tipoenc_pro"/>
                      </lu>
                      <lu>
                        <clip pos="2" side="tl" part="lem"/>
                        <lit-tag v="prn.enc"/>
                        <clip pos="2" side="tl" part="tipoenc_pro"/>
                        <clip pos="3" side="tl" part="lemq"/>
                      </lu>
                    </mlu>
                  </chunk>
                </out>
                <call-macro n="f_bcond">
                  <with-param pos="1"/>
                  <with-param pos="2"/>
                </call-macro>
                <call-macro n="f_bcond">
                  <with-param pos="2"/>
                  <with-param pos="3"/>
                </call-macro>
              </otherwise>
            </choose>
          </otherwise>
        </choose>
        <let>
          <var n="caseFirstWord"/>
          <lit v="aa"/>
        </let>
      </action>
    </rule>
    <rule comment="aller prnpro inf">
      <pattern>
        <pattern-item n="aller"/>
        <pattern-item n="prnpro"/>
        <pattern-item n="inf"/>
      </pattern>
      <action>
        <call-macro n="f_concord1">
          <with-param pos="2"/>
        </call-macro>
        <call-macro n="tipus_verb">
          <with-param pos="3"/>
        </call-macro>
        <call-macro n="f_ppres">
          <with-param pos="1"/>
        </call-macro>
        <call-macro n="firstWord">
          <with-param pos="1"/>
        </call-macro>
        <choose>
          <when>
            <test>
              <or>
                <equal caseless="yes">
                  <clip pos="2" side="sl" part="lem"/>
                  <lit v="en"/>
                </equal>
                <equal caseless="yes">
                  <clip pos="2" side="sl" part="lem"/>
                  <lit v="y"/>
                </equal>
              </or>
            </test>
            <out>
              <chunk name="go_to_inf" case="caseFirstWord">
                <tags>
                  <tag><lit-tag v="SV"/></tag>
                  <tag><clip pos="1" side="tl" part="a_verb"/></tag>
                  <tag><clip pos="1" side="tl" part="temps"/></tag>
                  <tag><clip pos="1" side="tl" part="pers"/></tag>
                  <tag><clip pos="1" side="tl" part="nbr"/></tag>
                  <tag><var n="tipusverb"/></tag>
                </tags>
                <lu>
                  <clip pos="1" side="tl" part="lemh"/>
                  <clip pos="1" side="tl" part="a_verb"/>
                  <clip pos="1" side="tl" part="temps"/>
                  <clip pos="1" side="tl" part="pers"/>
                  <clip pos="1" side="tl" part="nbr" link-to="5"/>
                  <clip pos="1" side="tl" part="lemq"/>
                </lu>
                <b pos="1"/>
                <lu>
                  <lit v="to"/>
                  <lit-tag v="pr"/>
                </lu>
                <b/>
                <lu>
                  <clip pos="3" side="tl" part="lemh"/>
                  <clip pos="3" side="tl" part="a_verb"/>
                  <clip pos="3" side="tl" part="temps"/>
                  <clip pos="3" side="tl" part="pers"/>
                  <clip pos="3" side="tl" part="nbr"/>
                  <clip pos="3" side="tl" part="lemq"/>
                </lu>
              </chunk>
            </out>
            <call-macro n="f_bcond">
              <with-param pos="2"/>
              <with-param pos="3"/>
            </call-macro>
          </when>
          <otherwise>
            <out>
              <chunk name="go_to_inf_enc" case="caseFirstWord">
                <tags>
                  <tag><lit-tag v="SV"/></tag>
                  <tag><clip pos="1" side="tl" part="a_verb"/></tag>
                  <tag><clip pos="1" side="tl" part="temps"/></tag>
                  <tag><clip pos="1" side="tl" part="pers"/></tag>
                  <tag><clip pos="1" side="tl" part="nbr"/></tag>
                  <tag><var n="tipusverb"/></tag>
                </tags>
                <lu>
                  <clip pos="1" side="tl" part="lemh"/>
                  <clip pos="1" side="tl" part="a_verb"/>
                  <clip pos="1" side="tl" part="temps"/>
                  <clip pos="1" side="tl" part="pers"/>
                  <clip pos="1" side="tl" part="nbr" link-to="5"/>
                  <clip pos="1" side="tl" part="lemq"/>
                </lu>
                <b pos="1"/>
                <lu>
                  <lit v="to"/>
                  <lit-tag v="pr"/>
                </lu>
                <b/>
                <mlu>
                  <lu>
                    <clip pos="3" side="tl" part="lemh"/>
                    <clip pos="3" side="tl" part="a_verb"/>
                    <clip pos="3" side="tl" part="temps"/>
                    <clip pos="3" side="tl" part="pers"/>
                    <clip pos="3" side="tl" part="nbr"/>
                  </lu>
                  <lu>
                    <clip pos="2" side="tl" part="lem"/>
                    <lit-tag v="prn.enc"/>
                    <clip pos="2" side="tl" part="tipoenc_pro"/>
                    <clip pos="3" side="tl" part="lemq"/>
                  </lu>
                </mlu>
              </chunk>
            </out>
            <call-macro n="f_bcond">
              <with-param pos="2"/>
              <with-param pos="3"/>
            </call-macro>
          </otherwise>
        </choose>
        <let>
          <var n="caseFirstWord"/>
          <lit v="aa"/>
        </let>
      </action>
    </rule>
    <rule comment="aller-prn prnpro inf">
      <pattern>
        <pattern-item n="aller"/>
        <pattern-item n="prnperssubj"/>
        <pattern-item n="prnpro"/>
        <pattern-item n="inf"/>
      </pattern>
      <action>
        <call-macro n="f_concord1">
          <with-param pos="3"/>
        </call-macro>
        <call-macro n="tipus_verb">
          <with-param pos="4"/>
        </call-macro>
        <call-macro n="f_ppres">
          <with-param pos="1"/>
        </call-macro>
        <call-macro n="firstWord">
          <with-param pos="1"/>
        </call-macro>
        <choose>
          <when>
            <test>
              <equal>
                <clip pos="2" side="sl" part="lem"/>
                <lit v="on"/>
              </equal>
            </test>
            <choose>
              <when>
                <test>
                  <or>
                    <equal caseless="yes">
                      <clip pos="3" side="sl" part="lem"/>
                      <lit v="en"/>
                    </equal>
                    <equal caseless="yes">
                      <clip pos="3" side="sl" part="lem"/>
                      <lit v="y"/>
                    </equal>
                  </or>
                </test>
                <out>
                  <chunk name="pro_go_to_inf" case="caseFirstWord">
                    <tags>
                      <tag><lit-tag v="SV"/></tag>
                      <tag><clip pos="1" side="tl" part="a_verb"/></tag>
                      <tag><clip pos="1" side="tl" part="temps"/></tag>
                      <tag><clip pos="1" side="tl" part="pers"/></tag>
                      <tag><clip pos="1" side="tl" part="nbr"/></tag>
                      <tag><var n="tipusverb"/></tag>
                    </tags>
                    <lu>
                      <get-case-from pos="1">
                        <clip pos="2" side="tl" part="lem"/>
                      </get-case-from>
                      <lit-tag v="prn.obj"/>
                      <clip pos="2" side="tl" part="tipoenc_pro"/>
                    </lu>
                    <b/>
                    <lu>
                      <get-case-from pos="2">
                        <clip pos="1" side="tl" part="lemh"/>
                      </get-case-from>
                      <clip pos="1" side="tl" part="a_verb"/>
                      <clip pos="1" side="tl" part="temps"/>
                      <clip pos="1" side="tl" part="pers"/>
                      <clip pos="1" side="tl" part="nbr" link-to="5"/>
                      <clip pos="1" side="tl" part="lemq"/>
                    </lu>
                    <b pos="2"/>
                    <lu>
                      <lit v="to"/>
                      <lit-tag v="pr"/>
                    </lu>
                    <b/>
                    <lu>
                      <clip pos="4" side="tl" part="lemh"/>
                      <clip pos="4" side="tl" part="a_verb"/>
                      <clip pos="4" side="tl" part="temps"/>
                      <clip pos="4" side="tl" part="pers"/>
                      <clip pos="4" side="tl" part="nbr"/>
                      <clip pos="4" side="tl" part="lemq"/>
                    </lu>
                  </chunk>
                </out>
                <call-macro n="f_bcond">
                  <with-param pos="3"/>
                  <with-param pos="4"/>
                </call-macro>
              </when>
              <otherwise>
                <out>
                  <chunk name="pro_go_to_inf_enc" case="caseFirstWord">
                    <tags>
                      <tag><lit-tag v="SV"/></tag>
                      <tag><clip pos="1" side="tl" part="a_verb"/></tag>
                      <tag><clip pos="1" side="tl" part="temps"/></tag>
                      <tag><clip pos="1" side="tl" part="pers"/></tag>
                      <tag><clip pos="1" side="tl" part="nbr"/></tag>
                      <tag><var n="tipusverb"/></tag>
                    </tags>
                    <lu>
                      <get-case-from pos="1">
                        <clip pos="2" side="tl" part="lem"/>
                      </get-case-from>
                      <lit-tag v="prn.obj"/>
                      <clip pos="2" side="tl" part="tipoenc_pro"/>
                    </lu>
                    <b/>
                    <lu>
                      <get-case-from pos="2">
                        <clip pos="1" side="tl" part="lemh"/>
                      </get-case-from>
                      <clip pos="1" side="tl" part="a_verb"/>
                      <clip pos="1" side="tl" part="temps"/>
                      <clip pos="1" side="tl" part="pers"/>
                      <clip pos="1" side="tl" part="nbr" link-to="5"/>
                      <clip pos="1" side="tl" part="lemq"/>
                    </lu>
                    <b pos="2"/>
                    <lu>
                      <lit v="to"/>
                      <lit-tag v="pr"/>
                    </lu>
                    <b/>
                    <mlu>
                      <lu>
                        <clip pos="4" side="tl" part="lemh"/>
                        <clip pos="4" side="tl" part="a_verb"/>
                        <clip pos="4" side="tl" part="temps"/>
                        <clip pos="4" side="tl" part="pers"/>
                        <clip pos="4" side="tl" part="nbr"/>
                      </lu>
                      <lu>
                        <clip pos="3" side="tl" part="lem"/>
                        <lit-tag v="prn.enc"/>
                        <clip pos="3" side="tl" part="tipoenc_pro"/>
                        <clip pos="4" side="tl" part="lemq"/>
                      </lu>
                    </mlu>
                  </chunk>
                </out>
                <call-macro n="f_bcond">
                  <with-param pos="3"/>
                  <with-param pos="4"/>
                </call-macro>
              </otherwise>
            </choose>
          </when>
          <otherwise>
            <choose>
              <when>
                <test>
                  <or>
                    <equal caseless="yes">
                      <clip pos="3" side="sl" part="lem"/>
                      <lit v="en"/>
                    </equal>
                    <equal caseless="yes">
                      <clip pos="3" side="sl" part="lem"/>
                      <lit v="y"/>
                    </equal>
                  </or>
                </test>
                <out>
                  <chunk name="go_to_inf" case="caseFirstWord">
                    <tags>
                      <tag><lit-tag v="SV"/></tag>
                      <tag><clip pos="1" side="tl" part="a_verb"/></tag>
                      <tag><clip pos="1" side="tl" part="temps"/></tag>
                      <tag><clip pos="1" side="tl" part="pers"/></tag>
                      <tag><clip pos="1" side="tl" part="nbr"/></tag>
                      <tag><var n="tipusverb"/></tag>
                    </tags>
                    <lu>
                      <clip pos="1" side="tl" part="lemh"/>
                      <clip pos="1" side="tl" part="a_verb"/>
                      <clip pos="1" side="tl" part="temps"/>
                      <clip pos="1" side="tl" part="pers"/>
                      <clip pos="1" side="tl" part="nbr" link-to="5"/>
                      <clip pos="1" side="tl" part="lemq"/>
                    </lu>
                    <b pos="2"/>
                    <lu>
                      <lit v="a"/>
                      <lit-tag v="pr"/>
                    </lu>
                    <b/>
                    <lu>
                      <clip pos="4" side="tl" part="lemh"/>
                      <clip pos="4" side="tl" part="a_verb"/>
                      <clip pos="4" side="tl" part="temps"/>
                      <clip pos="4" side="tl" part="pers"/>
                      <clip pos="4" side="tl" part="nbr"/>
                      <clip pos="4" side="tl" part="lemq"/>
                    </lu>
                  </chunk>
                </out>
                <call-macro n="f_bcond">
                  <with-param pos="3"/>
                  <with-param pos="4"/>
                </call-macro>
              </when>
              <otherwise>
                <out>
                  <chunk name="go_to_inf_enc" case="caseFirstWord">
                    <tags>
                      <tag><lit-tag v="SV"/></tag>
                      <tag><clip pos="1" side="tl" part="a_verb"/></tag>
                      <tag><clip pos="1" side="tl" part="temps"/></tag>
                      <tag><clip pos="1" side="tl" part="pers"/></tag>
                      <tag><clip pos="1" side="tl" part="nbr"/></tag>
                      <tag><var n="tipusverb"/></tag>
                    </tags>
                    <lu>
                      <clip pos="1" side="tl" part="lemh"/>
                      <clip pos="1" side="tl" part="a_verb"/>
                      <clip pos="1" side="tl" part="temps"/>
                      <clip pos="1" side="tl" part="pers"/>
                      <clip pos="1" side="tl" part="nbr" link-to="5"/>
                      <clip pos="1" side="tl" part="lemq"/>
                    </lu>
                    <b pos="2"/>
                    <lu>
                      <lit v="a"/>
                      <lit-tag v="pr"/>
                    </lu>
                    <b/>
                    <mlu>
                      <lu>
                        <clip pos="4" side="tl" part="lemh"/>
                        <clip pos="4" side="tl" part="a_verb"/>
                        <clip pos="4" side="tl" part="temps"/>
                        <clip pos="4" side="tl" part="pers"/>
                        <clip pos="4" side="tl" part="nbr"/>
                      </lu>
                      <lu>
                        <clip pos="3" side="tl" part="lem"/>
                        <lit-tag v="prn.enc"/>
                        <clip pos="3" side="tl" part="tipoenc_pro"/>
                        <clip pos="4" side="tl" part="lemq"/>
                      </lu>
                    </mlu>
                  </chunk>
                </out>
                <call-macro n="f_bcond">
                  <with-param pos="3"/>
                  <with-param pos="4"/>
                </call-macro>
              </otherwise>
            </choose>
          </otherwise>
        </choose>
        <let>
          <var n="caseFirstWord"/>
          <lit v="aa"/>
        </let>
      </action>
    </rule>
    <!-- FIXME: prnpro ? -->
    <rule comment="aller adv prnpro inf -&gt; adv go to prnpro inf">
      <pattern>
        <pattern-item n="aller"/>
        <pattern-item n="adv"/>
        <pattern-item n="prnpro"/>
        <pattern-item n="inf"/>
      </pattern>
      <action>
        <call-macro n="f_concord1">
          <with-param pos="3"/>
        </call-macro>
        <call-macro n="tipus_verb">
          <with-param pos="4"/>
        </call-macro>
        <call-macro n="f_ppres">
          <with-param pos="1"/>
        </call-macro>
        <call-macro n="firstWord">
          <with-param pos="1"/>
        </call-macro>
        <choose>
          <when>
            <test>
              <or>
                <equal caseless="yes">
                  <clip pos="3" side="sl" part="lem"/>
                  <lit v="en"/>
                </equal>
                <equal caseless="yes">
                  <clip pos="3" side="sl" part="lem"/>
                  <lit v="y"/>
                </equal>
              </or>
            </test>
            <out>
              <chunk name="go_to_inf" case="caseFirstWord">
                <tags>
                  <tag><lit-tag v="SV"/></tag>
                  <tag><clip pos="1" side="tl" part="a_verb"/></tag>
                  <tag><clip pos="1" side="tl" part="temps"/></tag>
                  <tag><clip pos="1" side="tl" part="pers"/></tag>
                  <tag><clip pos="1" side="tl" part="nbr"/></tag>
                  <tag><var n="tipusverb"/></tag>
                </tags>
                <lu>
                  <clip pos="1" side="tl" part="lemh"/>
                  <clip pos="1" side="tl" part="a_verb"/>
                  <clip pos="1" side="tl" part="temps"/>
                  <clip pos="1" side="tl" part="pers"/>
                  <clip pos="1" side="tl" part="nbr" link-to="5"/>
                  <clip pos="1" side="tl" part="lemq"/>
                </lu>
                <b pos="1"/>
                <lu>
                  <lit v="a"/>
                  <lit-tag v="pr"/>
                </lu>
                <b/>
                <lu>
                  <clip pos="4" side="tl" part="lemh"/>
                  <clip pos="4" side="tl" part="a_verb"/>
                  <clip pos="4" side="tl" part="temps"/>
                  <clip pos="4" side="tl" part="pers"/>
                  <clip pos="4" side="tl" part="nbr"/>
                  <clip pos="4" side="tl" part="lemq"/>
                </lu>
              </chunk>
            </out>
            <call-macro n="f_bcond">
              <with-param pos="2"/>
              <with-param pos="3"/>
            </call-macro>
          </when>
          <otherwise>
            <out>
              <chunk name="go_to_inf_enc" case="caseFirstWord">
                <tags>
                  <tag><lit-tag v="SV"/></tag>
                  <tag><clip pos="1" side="tl" part="a_verb"/></tag>
                  <tag><clip pos="1" side="tl" part="temps"/></tag>
                  <tag><clip pos="1" side="tl" part="pers"/></tag>
                  <tag><clip pos="1" side="tl" part="nbr"/></tag>
                  <tag><var n="tipusverb"/></tag>
                </tags>
                <lu>
                  <clip pos="1" side="tl" part="lemh"/>
                  <clip pos="1" side="tl" part="a_verb"/>
                  <clip pos="1" side="tl" part="temps"/>
                  <clip pos="1" side="tl" part="pers"/>
                  <clip pos="1" side="tl" part="nbr" link-to="5"/>
                  <clip pos="1" side="tl" part="lemq"/>
                </lu>
                <b pos="1"/>
                <lu>
                  <lit v="a"/>
                  <lit-tag v="pr"/>
                </lu>
                <b/>
                <mlu>
                  <lu>
                    <clip pos="4" side="tl" part="lemh"/>
                    <clip pos="4" side="tl" part="a_verb"/>
                    <clip pos="4" side="tl" part="temps"/>
                    <clip pos="4" side="tl" part="pers"/>
                    <clip pos="4" side="tl" part="nbr"/>
                  </lu>
                  <lu>
                    <clip pos="3" side="tl" part="lem"/>
                    <lit-tag v="prn.enc"/>
                    <clip pos="3" side="tl" part="tipoenc_pro"/>
                    <clip pos="4" side="tl" part="lemq"/>
                  </lu>
                </mlu>
              </chunk>
            </out>
            <call-macro n="f_bcond">
              <with-param pos="2"/>
              <with-param pos="3"/>
            </call-macro>
          </otherwise>
        </choose>
        <choose>
          <when>
            <test>
              <not>
                <equal caseless="yes">
                  <clip pos="2" side="sl" part="lem"/>
                  <lit v="pas"/>
                </equal>
              </not>
            </test>
            <out>
              <b pos="3"/>
              <chunk name="adv">
                <tags>
                  <tag>
                    <clip pos="2" side="tl" part="a_adv"/>
                  </tag>
                  <tag>
                    <clip pos="2" side="tl" part="neg"/>
                  </tag>
                </tags>
                <lu>
                  <get-case-from pos="1">
                    <clip pos="2" side="tl" part="lem"/>
                  </get-case-from>
                  <clip pos="2" side="tl" part="a_adv"/>
                </lu>
              </chunk>
            </out>
          </when>
          <otherwise>
            <call-macro n="f_bcond">
              <with-param pos="3"/>
              <with-param pos="4"/>
            </call-macro>
          </otherwise>
        </choose>
        <let>
          <var n="caseFirstWord"/>
          <lit v="aa"/>
        </let>
      </action>
    </rule>
    <rule comment="aller-subj adv prnpro inf -&gt; adv ir a prnpro inf">
      <pattern>
        <pattern-item n="aller"/>
        <pattern-item n="prnperssubj"/>
        <pattern-item n="adv"/>
        <pattern-item n="prnpro"/>
        <pattern-item n="inf"/>
      </pattern>
      <action>
        <call-macro n="firstWord">
          <with-param pos="1"/>
        </call-macro>
        <call-macro n="f_concord1">
          <with-param pos="4"/>
        </call-macro>
        <call-macro n="tipus_verb">
          <with-param pos="5"/>
        </call-macro>
        <call-macro n="f_ppres">
          <with-param pos="1"/>
        </call-macro>
        <choose>
          <when>
            <test>
              <or>
                <equal caseless="yes">
                  <clip pos="4" side="sl" part="lem"/>
                  <lit v="en"/>
                </equal>
                <equal caseless="yes">
                  <clip pos="4" side="sl" part="lem"/>
                  <lit v="y"/>
                </equal>
              </or>
            </test>
            <out>
              <chunk name="go_to_inf" case="caseFirstWord">
                <tags>
                  <tag><lit-tag v="SV"/></tag>
                  <tag><clip pos="1" side="tl" part="a_verb"/></tag>
                  <tag><clip pos="1" side="tl" part="temps"/></tag>
                  <tag><clip pos="1" side="tl" part="pers"/></tag>
                  <tag><clip pos="1" side="tl" part="nbr"/></tag>
                  <tag><var n="tipusverb"/></tag>
                </tags>
                <lu>
                  <clip pos="1" side="tl" part="lemh"/>
                  <clip pos="1" side="tl" part="a_verb"/>
                  <clip pos="1" side="tl" part="temps"/>
                  <clip pos="1" side="tl" part="pers"/>
                  <clip pos="1" side="tl" part="nbr" link-to="5"/>
                  <clip pos="1" side="tl" part="lemq"/>
                </lu>
                <b pos="2"/>
                <lu>
                  <lit v="to"/>
                  <lit-tag v="pr"/>
                </lu>
                <b/>
                <lu>
                  <clip pos="5" side="tl" part="lemh"/>
                  <clip pos="5" side="tl" part="a_verb"/>
                  <clip pos="5" side="tl" part="temps"/>
                  <clip pos="5" side="tl" part="pers"/>
                  <clip pos="5" side="tl" part="nbr"/>
                  <clip pos="5" side="tl" part="lemq"/>
                </lu>
              </chunk>
            </out>
            <call-macro n="f_bcond">
              <with-param pos="3"/>
              <with-param pos="4"/>
            </call-macro>
          </when>
          <otherwise>
            <out>
              <chunk name="go_to_inf_enc" case="caseFirstWord">
                <tags>
                  <tag>
                    <lit-tag v="SV"/>
                  </tag>
                  <tag>
                    <clip pos="1" side="tl" part="a_verb"/>
                  </tag>
                  <tag>
                    <clip pos="1" side="tl" part="temps"/>
                  </tag>
                  <tag>
                    <clip pos="1" side="tl" part="pers"/>
                  </tag>
                  <tag>
                    <clip pos="1" side="tl" part="nbr"/>
                  </tag>
                  <tag>
                    <var n="tipusverb"/>
                  </tag>
                </tags>
                <lu>
                  <clip pos="1" side="tl" part="lemh"/>
                  <clip pos="1" side="tl" part="a_verb"/>
                  <clip pos="1" side="tl" part="temps"/>
                  <clip pos="1" side="tl" part="pers"/>
                  <clip pos="1" side="tl" part="nbr" link-to="5"/>
                  <clip pos="1" side="tl" part="lemq"/>
                </lu>
                <b pos="2"/>
                <lu>
                  <lit v="a"/>
                  <lit-tag v="pr"/>
                </lu>
                <b/>
                <mlu>
                  <lu>
                    <clip pos="5" side="tl" part="lemh"/>
                    <clip pos="5" side="tl" part="a_verb"/>
                    <clip pos="5" side="tl" part="temps"/>
                    <clip pos="5" side="tl" part="pers"/>
                    <clip pos="5" side="tl" part="nbr"/>
                  </lu>
                  <lu>
                    <clip pos="4" side="tl" part="lem"/>
                    <lit-tag v="prn.enc"/>
                    <clip pos="4" side="tl" part="tipoenc_pro"/>
                    <clip pos="5" side="tl" part="lemq"/>
                  </lu>
                </mlu>
              </chunk>
            </out>
            <call-macro n="f_bcond">
              <with-param pos="3"/>
              <with-param pos="4"/>
            </call-macro>
          </otherwise>
        </choose>
        <choose>
          <when>
            <test>
              <not>
                <equal caseless="yes">
                  <clip pos="3" side="sl" part="lem"/>
                  <lit v="pas"/>
                </equal>
              </not>
            </test>
            <out>
              <b pos="4"/>
              <chunk name="adv">
                <tags>
                  <tag>
                    <clip pos="3" side="tl" part="a_adv"/>
                  </tag>
                  <tag>
                    <clip pos="3" side="tl" part="neg"/>
                  </tag>
                </tags>
                <lu>
                  <get-case-from pos="1">
                    <clip pos="3" side="tl" part="lem"/>
                  </get-case-from>
                  <clip pos="3" side="tl" part="a_adv"/>
                </lu>
              </chunk>
            </out>
          </when>
          <otherwise>
            <call-macro n="f_bcond">
              <with-param pos="4"/>
              <with-param pos="5"/>
            </call-macro>
          </otherwise>
        </choose>
        <let>
          <var n="caseFirstWord"/>
          <lit v="aa"/>
        </let>
      </action>
    </rule>
    <rule comment="aller prnpro prnpro inf">
      <pattern>
        <pattern-item n="aller"/>
        <pattern-item n="prnpro"/>
        <pattern-item n="prnpro"/>
        <pattern-item n="inf"/>
      </pattern>
      <action>
        <call-macro n="f_concord1">
          <with-param pos="2"/>
        </call-macro>
        <call-macro n="f_concord1">
          <with-param pos="3"/>
        </call-macro>
        <call-macro n="tipus_verb">
          <with-param pos="4"/>
        </call-macro>
        <call-macro n="f_ppres">
          <with-param pos="1"/>
        </call-macro>
        <call-macro n="firstWord">
          <with-param pos="1"/>
        </call-macro>
        <choose>
          <when>
            <test>
              <equal caseless="yes">
                <clip pos="2" side="sl" part="lem"/>
                <lit v="en"/>
              </equal>
            </test>
            <choose>
              <when>
                <test>
                  <equal caseless="yes">
                    <clip pos="3" side="sl" part="lem"/>
                    <lit v="y"/>
                  </equal>
                </test>
                <out>
                  <chunk name="ir_a_inf" case="caseFirstWord">
                    <tags>
                      <tag><lit-tag v="SV"/></tag>
                      <tag><clip pos="1" side="tl" part="a_verb"/></tag>
                      <tag><clip pos="1" side="tl" part="temps"/></tag>
                      <tag><clip pos="1" side="tl" part="pers"/></tag>
                      <tag><clip pos="1" side="tl" part="nbr"/></tag>
                      <tag><var n="tipusverb"/></tag>
                    </tags>
                    <lu>
                      <clip pos="1" side="tl" part="lemh"/>
                      <clip pos="1" side="tl" part="a_verb"/>
                      <clip pos="1" side="tl" part="temps"/>
                      <clip pos="1" side="tl" part="pers"/>
                      <clip pos="1" side="tl" part="nbr" link-to="5"/>
                      <clip pos="1" side="tl" part="lemq"/>
                    </lu>
                    <b pos="1"/>
                    <lu>
                      <lit v="to"/>
                      <lit-tag v="pr"/>
                    </lu>
                    <b/>
                    <lu>
                      <clip pos="4" side="tl" part="lemh"/>
                      <clip pos="4" side="tl" part="a_verb"/>
                      <clip pos="4" side="tl" part="temps"/>
                      <clip pos="4" side="tl" part="pers"/>
                      <clip pos="4" side="tl" part="nbr"/>
                      <clip pos="4" side="tl" part="lemq"/>
                    </lu>
                  </chunk>
                </out>
                <call-macro n="f_bcond">
                  <with-param pos="2"/>
                  <with-param pos="3"/>
                </call-macro>
                <call-macro n="f_bcond">
                  <with-param pos="3"/>
                  <with-param pos="4"/>
                </call-macro>
              </when>
              <otherwise>
                <out>
                  <chunk name="go_to_inf_enc" case="caseFirstWord">
                    <tags>
                      <tag><lit-tag v="SV"/></tag>
                      <tag><clip pos="1" side="tl" part="a_verb"/></tag>
                      <tag><clip pos="1" side="tl" part="temps"/></tag>
                      <tag><clip pos="1" side="tl" part="pers"/></tag>
                      <tag><clip pos="1" side="tl" part="nbr"/></tag>
                      <tag><var n="tipusverb"/></tag>
                    </tags>
                    <lu>
                      <clip pos="1" side="tl" part="lemh"/>
                      <clip pos="1" side="tl" part="a_verb"/>
                      <clip pos="1" side="tl" part="temps"/>
                      <clip pos="1" side="tl" part="pers"/>
                      <clip pos="1" side="tl" part="nbr" link-to="5"/>
                      <clip pos="1" side="tl" part="lemq"/>
                    </lu>
                    <b pos="1"/>
                    <lu>
                      <lit v="a"/>
                      <lit-tag v="pr"/>
                    </lu>
                    <b/>
                    <mlu>
                      <lu>
                        <clip pos="4" side="tl" part="lemh"/>
                        <clip pos="4" side="tl" part="a_verb"/>
                        <clip pos="4" side="tl" part="temps"/>
                        <clip pos="4" side="tl" part="pers"/>
                        <clip pos="4" side="tl" part="nbr"/>
                      </lu>
                      <lu>
                        <clip pos="3" side="tl" part="lem"/>
                        <lit-tag v="prn.enc"/>
                        <clip pos="3" side="tl" part="tipoenc_pro"/>
                        <clip pos="4" side="tl" part="lemq"/>
                      </lu>
                    </mlu>
                  </chunk>
                </out>
                <call-macro n="f_bcond">
                  <with-param pos="2"/>
                  <with-param pos="3"/>
                </call-macro>
                <call-macro n="f_bcond">
                  <with-param pos="3"/>
                  <with-param pos="4"/>
                </call-macro>
              </otherwise>
            </choose>
          </when>
          <otherwise>
            <choose>
              <when>
                <test>
                  <or>
                    <equal caseless="yes">
                      <clip pos="3" side="sl" part="lem"/>
                      <lit v="en"/>
                    </equal>
                    <equal caseless="yes">
                      <clip pos="3" side="sl" part="lem"/>
                      <lit v="y"/>
                    </equal>
                  </or>
                </test>
                <out>
                  <chunk name="ir_a_inf_enc" case="caseFirstWord">
                    <tags>
                      <tag><lit-tag v="SV"/></tag>
                      <tag><clip pos="1" side="tl" part="a_verb"/></tag>
                      <tag><clip pos="1" side="tl" part="temps"/></tag>
                      <tag><clip pos="1" side="tl" part="pers"/></tag>
                      <tag><clip pos="1" side="tl" part="nbr"/></tag>
                      <tag><var n="tipusverb"/></tag>
                    </tags>
                    <lu>
                      <clip pos="1" side="tl" part="lemh"/>
                      <clip pos="1" side="tl" part="a_verb"/>
                      <clip pos="1" side="tl" part="temps"/>
                      <clip pos="1" side="tl" part="pers"/>
                      <clip pos="1" side="tl" part="nbr" link-to="5"/>
                      <clip pos="1" side="tl" part="lemq"/>
                    </lu>
                    <b pos="1"/>
                    <lu>
                      <lit v="a"/>
                      <lit-tag v="pr"/>
                    </lu>
                    <b/>
                    <mlu>
                      <lu>
                        <clip pos="4" side="tl" part="lemh"/>
                        <clip pos="4" side="tl" part="a_verb"/>
                        <clip pos="4" side="tl" part="temps"/>
                        <clip pos="4" side="tl" part="pers"/>
                        <clip pos="4" side="tl" part="nbr"/>
                      </lu>
                      <lu>
                        <clip pos="2" side="tl" part="lem"/>
                        <lit-tag v="prn.enc"/>
                        <clip pos="2" side="tl" part="tipoenc_pro"/>
                        <clip pos="4" side="tl" part="lemq"/>
                      </lu>
                    </mlu>
                  </chunk>
                </out>
                <call-macro n="f_bcond">
                  <with-param pos="2"/>
                  <with-param pos="3"/>
                </call-macro>
                <call-macro n="f_bcond">
                  <with-param pos="3"/>
                  <with-param pos="4"/>
                </call-macro>
              </when>
              <otherwise>
                <out>
                  <chunk name="ir_a_inf_enc_enc" case="caseFirstWord">
                    <tags>
                      <tag><lit-tag v="SV"/></tag>
                      <tag><clip pos="1" side="tl" part="a_verb"/></tag>
                      <tag><clip pos="1" side="tl" part="temps"/></tag>
                      <tag><clip pos="1" side="tl" part="pers"/></tag>
                      <tag><clip pos="1" side="tl" part="nbr"/></tag>
                      <tag><var n="tipusverb"/></tag>
                    </tags>
                    <lu>
                      <clip pos="1" side="tl" part="lemh"/>
                      <clip pos="1" side="tl" part="a_verb"/>
                      <clip pos="1" side="tl" part="temps"/>
                      <clip pos="1" side="tl" part="pers"/>
                      <clip pos="1" side="tl" part="nbr" link-to="5"/>
                      <clip pos="1" side="tl" part="lemq"/>
                    </lu>
                    <b pos="1"/>
                    <lu>
                      <lit v="a"/>
                      <lit-tag v="pr"/>
                    </lu>
                    <b/>
                    <mlu>
                      <lu>
                        <clip pos="4" side="tl" part="lemh"/>
                        <clip pos="4" side="tl" part="a_verb"/>
                        <clip pos="4" side="tl" part="temps"/>
                        <clip pos="4" side="tl" part="pers"/>
                        <clip pos="4" side="tl" part="nbr"/>
                      </lu>
                      <lu>
                        <clip pos="2" side="tl" part="lem"/>
                        <lit-tag v="prn.enc"/>
                        <clip pos="2" side="tl" part="tipoenc_pro"/>
                      </lu>
                      <lu>
                        <clip pos="3" side="tl" part="lem"/>
                        <lit-tag v="prn.enc"/>
                        <clip pos="3" side="tl" part="tipoenc_pro"/>
                        <clip pos="4" side="tl" part="lemq"/>
                      </lu>
                    </mlu>
                  </chunk>
                </out>
                <call-macro n="f_bcond">
                  <with-param pos="2"/>
                  <with-param pos="3"/>
                </call-macro>
                <call-macro n="f_bcond">
                  <with-param pos="3"/>
                  <with-param pos="4"/>
                </call-macro>
              </otherwise>
            </choose>
          </otherwise>
        </choose>
        <let>
          <var n="caseFirstWord"/>
          <lit v="aa"/>
        </let>
      </action>
    </rule>
    <rule comment="aller-subj prnpro prnpro inf">
      <!--aquesta tampoc té "on" pel mateix motiu que l'altra...-->
      <pattern>
        <pattern-item n="aller"/>
        <pattern-item n="prnperssubj"/>
        <pattern-item n="prnpro"/>
        <pattern-item n="prnpro"/>
        <pattern-item n="inf"/>
      </pattern>
      <action>
        <call-macro n="f_concord1">
          <with-param pos="3"/>
        </call-macro>
        <call-macro n="f_concord1">
          <with-param pos="4"/>
        </call-macro>
        <call-macro n="tipus_verb">
          <with-param pos="5"/>
        </call-macro>
        <call-macro n="f_ppres">
          <with-param pos="1"/>
        </call-macro>
        <call-macro n="firstWord">
          <with-param pos="1"/>
        </call-macro>
        <choose>
          <when>
            <test>
              <equal caseless="yes">
                <clip pos="3" side="sl" part="lem"/>
                <lit v="en"/>
              </equal>
            </test>
            <choose>
              <when>
                <test>
                  <equal caseless="yes">
                    <clip pos="4" side="sl" part="lem"/>
                    <lit v="y"/>
                  </equal>
                </test>
                <out>
                  <chunk name="go_to_inf" case="caseFirstWord">
                    <tags>
                      <tag><lit-tag v="SV"/></tag>
                      <tag><clip pos="1" side="tl" part="a_verb"/></tag>
                      <tag><clip pos="1" side="tl" part="temps"/></tag>
                      <tag><clip pos="1" side="tl" part="pers"/></tag>
                      <tag><clip pos="1" side="tl" part="nbr"/></tag>
                      <tag><var n="tipusverb"/></tag>
                    </tags>
                    <lu>
                      <clip pos="1" side="tl" part="lemh"/>
                      <clip pos="1" side="tl" part="a_verb"/>
                      <clip pos="1" side="tl" part="temps"/>
                      <clip pos="1" side="tl" part="pers"/>
                      <clip pos="1" side="tl" part="nbr" link-to="5"/>
                      <clip pos="1" side="tl" part="lemq"/>
                    </lu>
                    <b pos="2"/>
                    <lu>
                      <lit v="to"/>
                      <lit-tag v="pr"/>
                    </lu>
                    <b/>
                    <lu>
                      <clip pos="5" side="tl" part="lemh"/>
                      <clip pos="5" side="tl" part="a_verb"/>
                      <clip pos="5" side="tl" part="temps"/>
                      <clip pos="5" side="tl" part="pers"/>
                      <clip pos="5" side="tl" part="nbr"/>
                      <clip pos="5" side="tl" part="lemq"/>
                    </lu>
                  </chunk>
                </out>
                <call-macro n="f_bcond">
                  <with-param pos="3"/>
                  <with-param pos="4"/>
                </call-macro>
                <call-macro n="f_bcond">
                  <with-param pos="4"/>
                  <with-param pos="5"/>
                </call-macro>
              </when>
              <otherwise>
                <out>
                  <chunk name="ir_a_inf_enc" case="caseFirstWord">
                    <tags>
                      <tag><lit-tag v="SV"/></tag>
                      <tag><clip pos="1" side="tl" part="a_verb"/></tag>
                      <tag><clip pos="1" side="tl" part="temps"/></tag>
                      <tag><clip pos="1" side="tl" part="pers"/></tag>
                      <tag><clip pos="1" side="tl" part="nbr"/></tag>
                      <tag><var n="tipusverb"/></tag>
                    </tags>
                    <lu>
                      <clip pos="1" side="tl" part="lemh"/>
                      <clip pos="1" side="tl" part="a_verb"/>
                      <clip pos="1" side="tl" part="temps"/>
                      <clip pos="1" side="tl" part="pers"/>
                      <clip pos="1" side="tl" part="nbr" link-to="5"/>
                      <clip pos="1" side="tl" part="lemq"/>
                    </lu>
                    <b pos="2"/>
                    <lu>
                      <lit v="a"/>
                      <lit-tag v="pr"/>
                    </lu>
                    <b/>
                    <mlu>
                      <lu>
                        <clip pos="5" side="tl" part="lemh"/>
                        <clip pos="5" side="tl" part="a_verb"/>
                        <clip pos="5" side="tl" part="temps"/>
                        <clip pos="5" side="tl" part="pers"/>
                        <clip pos="5" side="tl" part="nbr"/>
                      </lu>
                      <lu>
                        <clip pos="4" side="tl" part="lem"/>
                        <lit-tag v="prn.enc"/>
                        <clip pos="4" side="tl" part="tipoenc_pro"/>
                        <clip pos="5" side="tl" part="lemq"/>
                      </lu>
                    </mlu>
                  </chunk>
                </out>
                <call-macro n="f_bcond">
                  <with-param pos="3"/>
                  <with-param pos="4"/>
                </call-macro>
                <call-macro n="f_bcond">
                  <with-param pos="4"/>
                  <with-param pos="5"/>
                </call-macro>
              </otherwise>
            </choose>
          </when>
          <otherwise>
            <choose>
              <when>
                <test>
                  <or>
                    <equal caseless="yes">
                      <clip pos="4" side="sl" part="lem"/>
                      <lit v="en"/>
                    </equal>
                    <equal caseless="yes">
                      <clip pos="4" side="sl" part="lem"/>
                      <lit v="y"/>
                    </equal>
                  </or>
                </test>
                <out>
                  <chunk name="go_to_inf_enc" case="caseFirstWord">
                    <tags>
                      <tag><lit-tag v="SV"/></tag>
                      <tag><clip pos="1" side="tl" part="a_verb"/></tag>
                      <tag><clip pos="1" side="tl" part="temps"/></tag>
                      <tag><clip pos="1" side="tl" part="pers"/></tag>
                      <tag><clip pos="1" side="tl" part="nbr"/></tag>
                      <tag><var n="tipusverb"/></tag>
                    </tags>
                    <lu>
                      <clip pos="1" side="tl" part="lemh"/>
                      <clip pos="1" side="tl" part="a_verb"/>
                      <clip pos="1" side="tl" part="temps"/>
                      <clip pos="1" side="tl" part="pers"/>
                      <clip pos="1" side="tl" part="nbr" link-to="5"/>
                      <clip pos="1" side="tl" part="lemq"/>
                    </lu>
                    <b pos="2"/>
                    <lu>
                      <lit v="to"/>
                      <lit-tag v="pr"/>
                    </lu>
                    <b/>
                    <mlu>
                      <lu>
                        <clip pos="5" side="tl" part="lemh"/>
                        <clip pos="5" side="tl" part="a_verb"/>
                        <clip pos="5" side="tl" part="temps"/>
                        <clip pos="5" side="tl" part="pers"/>
                        <clip pos="5" side="tl" part="nbr"/>
                      </lu>
                      <lu>
                        <clip pos="3" side="tl" part="lem"/>
                        <lit-tag v="prn.enc"/>
                        <clip pos="3" side="tl" part="tipoenc_pro"/>
                        <clip pos="5" side="tl" part="lemq"/>
                      </lu>
                    </mlu>
                  </chunk>
                </out>
                <call-macro n="f_bcond">
                  <with-param pos="3"/>
                  <with-param pos="4"/>
                </call-macro>
                <call-macro n="f_bcond">
                  <with-param pos="4"/>
                  <with-param pos="5"/>
                </call-macro>
              </when>
              <otherwise>
                <out>
                  <chunk name="ir_a_inf_enc_enc" case="caseFirstWord">
                    <tags>
                      <tag>
                        <lit-tag v="SV"/>
                      </tag>
                      <tag>
                        <clip pos="1" side="tl" part="a_verb"/>
                      </tag>
                      <tag>
                        <clip pos="1" side="tl" part="temps"/>
                      </tag>
                      <tag>
                        <clip pos="1" side="tl" part="pers"/>
                      </tag>
                      <tag>
                        <clip pos="1" side="tl" part="nbr"/>
                      </tag>
                      <tag>
                        <var n="tipusverb"/>
                      </tag>
                    </tags>
                    <lu>
                      <clip pos="1" side="tl" part="lemh"/>
                      <clip pos="1" side="tl" part="a_verb"/>
                      <clip pos="1" side="tl" part="temps"/>
                      <clip pos="1" side="tl" part="pers"/>
                      <clip pos="1" side="tl" part="nbr" link-to="5"/>
                      <clip pos="1" side="tl" part="lemq"/>
                    </lu>
                    <b pos="2"/>
                    <lu>
                      <lit v="a"/>
                      <lit-tag v="pr"/>
                    </lu>
                    <b/>
                    <mlu>
                      <lu>
                        <clip pos="5" side="tl" part="lemh"/>
                        <clip pos="5" side="tl" part="a_verb"/>
                        <clip pos="5" side="tl" part="temps"/>
                        <clip pos="5" side="tl" part="pers"/>
                        <clip pos="5" side="tl" part="nbr"/>
                      </lu>
                      <lu>
                        <clip pos="3" side="tl" part="lem"/>
                        <lit-tag v="prn.enc"/>
                        <clip pos="3" side="tl" part="tipoenc_pro"/>
                      </lu>
                      <lu>
                        <clip pos="4" side="tl" part="lem"/>
                        <lit-tag v="prn.enc"/>
                        <clip pos="4" side="tl" part="tipoenc_pro"/>
                        <clip pos="5" side="tl" part="lemq"/>
                      </lu>
                    </mlu>
                  </chunk>
                </out>
                <call-macro n="f_bcond">
                  <with-param pos="3"/>
                  <with-param pos="4"/>
                </call-macro>
                <call-macro n="f_bcond">
                  <with-param pos="4"/>
                  <with-param pos="5"/>
                </call-macro>
              </otherwise>
            </choose>
          </otherwise>
        </choose>
        <let>
          <var n="caseFirstWord"/>
          <lit v="aa"/>
        </let>
      </action>
    </rule>
    <rule comment="aller adv prnpro prnpro inf">
      <pattern>
        <pattern-item n="aller"/>
        <pattern-item n="adv"/>
        <pattern-item n="prnpro"/>
        <pattern-item n="prnpro"/>
        <pattern-item n="inf"/>
      </pattern>
      <action>
        <call-macro n="firstWord">
          <with-param pos="1"/>
        </call-macro>
        <call-macro n="f_concord1">
          <with-param pos="3"/>
        </call-macro>
        <call-macro n="f_concord1">
          <with-param pos="4"/>
        </call-macro>
        <call-macro n="tipus_verb">
          <with-param pos="5"/>
        </call-macro>
        <call-macro n="f_ppres">
          <with-param pos="1"/>
        </call-macro>
        <choose>
          <when>
            <test>
              <equal caseless="yes">
                <clip pos="3" side="sl" part="lem"/>
                <lit v="en"/>
              </equal>
            </test>
            <choose>
              <when>
                <test>
                  <equal caseless="yes">
                    <clip pos="4" side="sl" part="lem"/>
                    <lit v="y"/>
                  </equal>
                </test>
                <out>
                  <chunk name="ir_a_inf" case="caseFirstWord">
                    <tags>
                      <tag>
                        <lit-tag v="SV"/>
                      </tag>
                      <tag>
                        <clip pos="1" side="tl" part="a_verb"/>
                      </tag>
                      <tag>
                        <clip pos="1" side="tl" part="temps"/>
                      </tag>
                      <tag>
                        <clip pos="1" side="tl" part="pers"/>
                      </tag>
                      <tag>
                        <clip pos="1" side="tl" part="nbr"/>
                      </tag>
                      <tag>
                        <var n="tipusverb"/>
                      </tag>
                    </tags>
                    <lu>
                      <clip pos="1" side="tl" part="lemh"/>
                      <clip pos="1" side="tl" part="a_verb"/>
                      <clip pos="1" side="tl" part="temps"/>
                      <clip pos="1" side="tl" part="pers"/>
                      <clip pos="1" side="tl" part="nbr" link-to="5"/>
                      <clip pos="1" side="tl" part="lemq"/>
                    </lu>
                    <b pos="1"/>
                    <lu>
                      <lit v="a"/>
                      <lit-tag v="pr"/>
                    </lu>
                    <b/>
                    <lu>
                      <clip pos="5" side="tl" part="lemh"/>
                      <clip pos="5" side="tl" part="a_verb"/>
                      <clip pos="5" side="tl" part="temps"/>
                      <clip pos="5" side="tl" part="pers"/>
                      <clip pos="5" side="tl" part="nbr"/>
                      <clip pos="5" side="tl" part="lemq"/>
                    </lu>
                  </chunk>
                </out>
                <call-macro n="f_bcond">
                  <with-param pos="2"/>
                  <with-param pos="3"/>
                </call-macro>
                <call-macro n="f_bcond">
                  <with-param pos="3"/>
                  <with-param pos="4"/>
                </call-macro>
              </when>
              <otherwise>
                <out>
                  <chunk name="ir_a_inf_enc" case="caseFirstWord">
                    <tags>
                      <tag>
                        <lit-tag v="SV"/>
                      </tag>
                      <tag>
                        <clip pos="1" side="tl" part="a_verb"/>
                      </tag>
                      <tag>
                        <clip pos="1" side="tl" part="temps"/>
                      </tag>
                      <tag>
                        <clip pos="1" side="tl" part="pers"/>
                      </tag>
                      <tag>
                        <clip pos="1" side="tl" part="nbr"/>
                      </tag>
                      <tag>
                        <var n="tipusverb"/>
                      </tag>
                    </tags>
                    <lu>
                      <clip pos="1" side="tl" part="lemh"/>
                      <clip pos="1" side="tl" part="a_verb"/>
                      <clip pos="1" side="tl" part="temps"/>
                      <clip pos="1" side="tl" part="pers"/>
                      <clip pos="1" side="tl" part="nbr" link-to="5"/>
                      <clip pos="1" side="tl" part="lemq"/>
                    </lu>
                    <b pos="1"/>
                    <lu>
                      <lit v="a"/>
                      <lit-tag v="pr"/>
                    </lu>
                    <b/>
                    <mlu>
                      <lu>
                        <clip pos="5" side="tl" part="lemh"/>
                        <clip pos="5" side="tl" part="a_verb"/>
                        <clip pos="5" side="tl" part="temps"/>
                        <clip pos="5" side="tl" part="pers"/>
                        <clip pos="5" side="tl" part="nbr"/>
                      </lu>
                      <lu>
                        <clip pos="4" side="tl" part="lem"/>
                        <lit-tag v="prn.enc"/>
                        <clip pos="4" side="tl" part="tipoenc_pro"/>
                        <clip pos="5" side="tl" part="lemq"/>
                      </lu>
                    </mlu>
                  </chunk>
                </out>
                <call-macro n="f_bcond">
                  <with-param pos="2"/>
                  <with-param pos="3"/>
                </call-macro>
                <call-macro n="f_bcond">
                  <with-param pos="3"/>
                  <with-param pos="4"/>
                </call-macro>
              </otherwise>
            </choose>
          </when>
          <otherwise>
            <choose>
              <when>
                <test>
                  <or>
                    <equal caseless="yes">
                      <clip pos="4" side="sl" part="lem"/>
                      <lit v="en"/>
                    </equal>
                    <equal caseless="yes">
                      <clip pos="4" side="sl" part="lem"/>
                      <lit v="y"/>
                    </equal>
                  </or>
                </test>
                <out>
                  <chunk name="ir_a_inf_enc" case="caseFirstWord">
                    <tags>
                      <tag>
                        <lit-tag v="SV"/>
                      </tag>
                      <tag>
                        <clip pos="1" side="tl" part="a_verb"/>
                      </tag>
                      <tag>
                        <clip pos="1" side="tl" part="temps"/>
                      </tag>
                      <tag>
                        <clip pos="1" side="tl" part="pers"/>
                      </tag>
                      <tag>
                        <clip pos="1" side="tl" part="nbr"/>
                      </tag>
                      <tag>
                        <var n="tipusverb"/>
                      </tag>
                    </tags>
                    <lu>
                      <clip pos="1" side="tl" part="lemh"/>
                      <clip pos="1" side="tl" part="a_verb"/>
                      <clip pos="1" side="tl" part="temps"/>
                      <clip pos="1" side="tl" part="pers"/>
                      <clip pos="1" side="tl" part="nbr" link-to="5"/>
                      <clip pos="1" side="tl" part="lemq"/>
                    </lu>
                    <b pos="1"/>
                    <lu>
                      <lit v="a"/>
                      <lit-tag v="pr"/>
                    </lu>
                    <b/>
                    <mlu>
                      <lu>
                        <clip pos="5" side="tl" part="lemh"/>
                        <clip pos="5" side="tl" part="a_verb"/>
                        <clip pos="5" side="tl" part="temps"/>
                        <clip pos="5" side="tl" part="pers"/>
                        <clip pos="5" side="tl" part="nbr"/>
                      </lu>
                      <lu>
                        <clip pos="3" side="tl" part="lem"/>
                        <lit-tag v="prn.enc"/>
                        <clip pos="3" side="tl" part="tipoenc_pro"/>
                        <clip pos="5" side="tl" part="lemq"/>
                      </lu>
                    </mlu>
                  </chunk>
                </out>
                <call-macro n="f_bcond">
                  <with-param pos="2"/>
                  <with-param pos="3"/>
                </call-macro>
                <call-macro n="f_bcond">
                  <with-param pos="3"/>
                  <with-param pos="4"/>
                </call-macro>
              </when>
              <otherwise>
                <out>
                  <chunk name="ir_a_inf_enc_enc" case="caseFirstWord">
                    <tags>
                      <tag>
                        <lit-tag v="SV"/>
                      </tag>
                      <tag>
                        <clip pos="1" side="tl" part="a_verb"/>
                      </tag>
                      <tag>
                        <clip pos="1" side="tl" part="temps"/>
                      </tag>
                      <tag>
                        <clip pos="1" side="tl" part="pers"/>
                      </tag>
                      <tag>
                        <clip pos="1" side="tl" part="nbr"/>
                      </tag>
                      <tag>
                        <var n="tipusverb"/>
                      </tag>
                    </tags>
                    <lu>
                      <clip pos="1" side="tl" part="lemh"/>
                      <clip pos="1" side="tl" part="a_verb"/>
                      <clip pos="1" side="tl" part="temps"/>
                      <clip pos="1" side="tl" part="pers"/>
                      <clip pos="1" side="tl" part="nbr" link-to="5"/>
                      <clip pos="1" side="tl" part="lemq"/>
                    </lu>
                    <b pos="1"/>
                    <lu>
                      <lit v="a"/>
                      <lit-tag v="pr"/>
                    </lu>
                    <b/>
                    <mlu>
                      <lu>
                        <clip pos="5" side="tl" part="lemh"/>
                        <clip pos="5" side="tl" part="a_verb"/>
                        <clip pos="5" side="tl" part="temps"/>
                        <clip pos="5" side="tl" part="pers"/>
                        <clip pos="5" side="tl" part="nbr"/>
                      </lu>
                      <lu>
                        <clip pos="3" side="tl" part="lem"/>
                        <lit-tag v="prn.enc"/>
                        <clip pos="3" side="tl" part="tipoenc_pro"/>
                      </lu>
                      <lu>
                        <clip pos="4" side="tl" part="lem"/>
                        <lit-tag v="prn.enc"/>
                        <clip pos="4" side="tl" part="tipoenc_pro"/>
                        <clip pos="5" side="tl" part="lemq"/>
                      </lu>
                    </mlu>
                  </chunk>
                </out>
                <call-macro n="f_bcond">
                  <with-param pos="2"/>
                  <with-param pos="3"/>
                </call-macro>
                <call-macro n="f_bcond">
                  <with-param pos="3"/>
                  <with-param pos="4"/>
                </call-macro>
              </otherwise>
            </choose>
          </otherwise>
        </choose>
        <choose>
          <when>
            <test>
              <not>
                <equal caseless="yes">
                  <clip pos="2" side="sl" part="lem"/>
                  <lit v="pas"/>
                </equal>
              </not>
            </test>
            <out>
              <b pos="4"/>
              <chunk name="adv">
                <tags>
                  <tag>
                    <clip pos="2" side="tl" part="a_adv"/>
                  </tag>
                  <tag>
                    <clip pos="2" side="tl" part="neg"/>
                  </tag>
                </tags>
                <lu>
                  <clip pos="2" side="tl" part="lem"/>
                  <clip pos="2" side="tl" part="a_adv"/>
                </lu>
              </chunk>
            </out>
          </when>
          <otherwise>
            <call-macro n="f_bcond">
              <with-param pos="4"/>
              <with-param pos="5"/>
            </call-macro>
          </otherwise>
        </choose>
        <let>
          <var n="caseFirstWord"/>
          <lit v="aa"/>
        </let>
      </action>
    </rule>
    <rule comment="aller-subj adv prnpro prnpro inf">
      <pattern>
        <pattern-item n="aller"/>
        <pattern-item n="prnperssubj"/>
        <pattern-item n="adv"/>
        <pattern-item n="prnpro"/>
        <pattern-item n="prnpro"/>
        <pattern-item n="inf"/>
      </pattern>
      <action>
        <call-macro n="f_concord1">
          <with-param pos="4"/>
        </call-macro>
        <call-macro n="f_concord1">
          <with-param pos="5"/>
        </call-macro>
        <call-macro n="tipus_verb">
          <with-param pos="6"/>
        </call-macro>
        <call-macro n="f_ppres">
          <with-param pos="1"/>
        </call-macro>
        <call-macro n="firstWord">
          <with-param pos="1"/>
        </call-macro>
        <choose>
          <when>
            <test>
              <equal caseless="yes">
                <clip pos="4" side="sl" part="lem"/>
                <lit v="en"/>
              </equal>
            </test>
            <choose>
              <when>
                <test>
                  <equal caseless="yes">
                    <clip pos="5" side="sl" part="lem"/>
                    <lit v="y"/>
                  </equal>
                </test>
                <out>
                  <chunk name="ir_a_inf" case="caseFirstWord">
                    <tags>
                      <tag>
                        <lit-tag v="SV"/>
                      </tag>
                      <tag>
                        <clip pos="1" side="tl" part="a_verb"/>
                      </tag>
                      <tag>
                        <clip pos="1" side="tl" part="temps"/>
                      </tag>
                      <tag>
                        <clip pos="1" side="tl" part="pers"/>
                      </tag>
                      <tag>
                        <clip pos="1" side="tl" part="nbr"/>
                      </tag>
                      <tag>
                        <var n="tipusverb"/>
                      </tag>
                    </tags>
                    <lu>
                      <clip pos="1" side="tl" part="lemh"/>
                      <clip pos="1" side="tl" part="a_verb"/>
                      <clip pos="1" side="tl" part="temps"/>
                      <clip pos="1" side="tl" part="pers"/>
                      <clip pos="1" side="tl" part="nbr" link-to="5"/>
                      <clip pos="1" side="tl" part="lemq"/>
                    </lu>
                    <b pos="2"/>
                    <lu>
                      <lit v="a"/>
                      <lit-tag v="pr"/>
                    </lu>
                    <b/>
                    <lu>
                      <clip pos="6" side="tl" part="lemh"/>
                      <clip pos="6" side="tl" part="a_verb"/>
                      <clip pos="6" side="tl" part="temps"/>
                      <clip pos="6" side="tl" part="pers"/>
                      <clip pos="6" side="tl" part="nbr"/>
                      <clip pos="6" side="tl" part="lemq"/>
                    </lu>
                  </chunk>
                </out>
                <call-macro n="f_bcond">
                  <with-param pos="3"/>
                  <with-param pos="4"/>
                </call-macro>
                <call-macro n="f_bcond">
                  <with-param pos="4"/>
                  <with-param pos="5"/>
                </call-macro>
              </when>
              <otherwise>
                <out>
                  <chunk name="ir_a_inf_enc" case="caseFirstWord">
                    <tags>
                      <tag>
                        <lit-tag v="SV"/>
                      </tag>
                      <tag>
                        <clip pos="1" side="tl" part="a_verb"/>
                      </tag>
                      <tag>
                        <clip pos="1" side="tl" part="temps"/>
                      </tag>
                      <tag>
                        <clip pos="1" side="tl" part="pers"/>
                      </tag>
                      <tag>
                        <clip pos="1" side="tl" part="nbr"/>
                      </tag>
                      <tag>
                        <var n="tipusverb"/>
                      </tag>
                    </tags>
                    <lu>
                      <clip pos="1" side="tl" part="lemh"/>
                      <clip pos="1" side="tl" part="a_verb"/>
                      <clip pos="1" side="tl" part="temps"/>
                      <clip pos="1" side="tl" part="pers"/>
                      <clip pos="1" side="tl" part="nbr" link-to="5"/>
                      <clip pos="1" side="tl" part="lemq"/>
                    </lu>
                    <b pos="2"/>
                    <lu>
                      <lit v="a"/>
                      <lit-tag v="pr"/>
                    </lu>
                    <b/>
                    <mlu>
                      <lu>
                        <clip pos="6" side="tl" part="lemh"/>
                        <clip pos="6" side="tl" part="a_verb"/>
                        <clip pos="6" side="tl" part="temps"/>
                        <clip pos="6" side="tl" part="pers"/>
                        <clip pos="6" side="tl" part="nbr"/>
                      </lu>
                      <lu>
                        <clip pos="5" side="tl" part="lem"/>
                        <lit-tag v="prn.enc"/>
                        <clip pos="5" side="tl" part="tipoenc_pro"/>
                        <clip pos="6" side="tl" part="lemq"/>
                      </lu>
                    </mlu>
                  </chunk>
                </out>
                <call-macro n="f_bcond">
                  <with-param pos="3"/>
                  <with-param pos="4"/>
                </call-macro>
                <call-macro n="f_bcond">
                  <with-param pos="4"/>
                  <with-param pos="5"/>
                </call-macro>
              </otherwise>
            </choose>
          </when>
          <otherwise>
            <choose>
              <when>
                <test>
                  <or>
                    <equal caseless="yes">
                      <clip pos="5" side="sl" part="lem"/>
                      <lit v="en"/>
                    </equal>
                    <equal caseless="yes">
                      <clip pos="5" side="sl" part="lem"/>
                      <lit v="y"/>
                    </equal>
                  </or>
                </test>
                <out>
                  <chunk name="ir_a_inf_enc" case="caseFirstWord">
                    <tags>
                      <tag>
                        <lit-tag v="SV"/>
                      </tag>
                      <tag>
                        <clip pos="1" side="tl" part="a_verb"/>
                      </tag>
                      <tag>
                        <clip pos="1" side="tl" part="temps"/>
                      </tag>
                      <tag>
                        <clip pos="1" side="tl" part="pers"/>
                      </tag>
                      <tag>
                        <clip pos="1" side="tl" part="nbr"/>
                      </tag>
                      <tag>
                        <var n="tipusverb"/>
                      </tag>
                    </tags>
                    <lu>
                      <clip pos="1" side="tl" part="lemh"/>
                      <clip pos="1" side="tl" part="a_verb"/>
                      <clip pos="1" side="tl" part="temps"/>
                      <clip pos="1" side="tl" part="pers"/>
                      <clip pos="1" side="tl" part="nbr" link-to="5"/>
                      <clip pos="1" side="tl" part="lemq"/>
                    </lu>
                    <b pos="2"/>
                    <lu>
                      <lit v="a"/>
                      <lit-tag v="pr"/>
                    </lu>
                    <b/>
                    <mlu>
                      <lu>
                        <clip pos="6" side="tl" part="lemh"/>
                        <clip pos="6" side="tl" part="a_verb"/>
                        <clip pos="6" side="tl" part="temps"/>
                        <clip pos="6" side="tl" part="pers"/>
                        <clip pos="6" side="tl" part="nbr"/>
                      </lu>
                      <lu>
                        <clip pos="4" side="tl" part="lem"/>
                        <lit-tag v="prn.enc"/>
                        <clip pos="4" side="tl" part="tipoenc_pro"/>
                        <clip pos="6" side="tl" part="lemq"/>
                      </lu>
                    </mlu>
                  </chunk>
                </out>
                <call-macro n="f_bcond">
                  <with-param pos="3"/>
                  <with-param pos="4"/>
                </call-macro>
                <call-macro n="f_bcond">
                  <with-param pos="4"/>
                  <with-param pos="5"/>
                </call-macro>
              </when>
              <otherwise>
                <out>
                  <chunk name="ir_a_inf_enc_enc" case="caseFirstWord">
                    <tags>
                      <tag>
                        <lit-tag v="SV"/>
                      </tag>
                      <tag>
                        <clip pos="1" side="tl" part="a_verb"/>
                      </tag>
                      <tag>
                        <clip pos="1" side="tl" part="temps"/>
                      </tag>
                      <tag>
                        <clip pos="1" side="tl" part="pers"/>
                      </tag>
                      <tag>
                        <clip pos="1" side="tl" part="nbr"/>
                      </tag>
                      <tag>
                        <var n="tipusverb"/>
                      </tag>
                    </tags>
                    <lu>
                      <clip pos="1" side="tl" part="lemh"/>
                      <clip pos="1" side="tl" part="a_verb"/>
                      <clip pos="1" side="tl" part="temps"/>
                      <clip pos="1" side="tl" part="pers"/>
                      <clip pos="1" side="tl" part="nbr" link-to="5"/>
                      <clip pos="1" side="tl" part="lemq"/>
                    </lu>
                    <b pos="2"/>
                    <lu>
                      <lit v="a"/>
                      <lit-tag v="pr"/>
                    </lu>
                    <b/>
                    <mlu>
                      <lu>
                        <clip pos="6" side="tl" part="lemh"/>
                        <clip pos="6" side="tl" part="a_verb"/>
                        <clip pos="6" side="tl" part="temps"/>
                        <clip pos="6" side="tl" part="pers"/>
                        <clip pos="6" side="tl" part="nbr"/>
                      </lu>
                      <lu>
                        <clip pos="4" side="tl" part="lem"/>
                        <lit-tag v="prn.enc"/>
                        <clip pos="4" side="tl" part="tipoenc_pro"/>
                      </lu>
                      <lu>
                        <clip pos="5" side="tl" part="lem"/>
                        <lit-tag v="prn.enc"/>
                        <clip pos="5" side="tl" part="tipoenc_pro"/>
                        <clip pos="6" side="tl" part="lemq"/>
                      </lu>
                    </mlu>
                  </chunk>
                </out>
                <call-macro n="f_bcond">
                  <with-param pos="3"/>
                  <with-param pos="4"/>
                </call-macro>
                <call-macro n="f_bcond">
                  <with-param pos="4"/>
                  <with-param pos="5"/>
                </call-macro>
              </otherwise>
            </choose>
          </otherwise>
        </choose>
        <choose>
          <when>
            <test>
              <not>
                <equal caseless="yes">
                  <clip pos="3" side="sl" part="lem"/>
                  <lit v="pas"/>
                </equal>
              </not>
            </test>
            <out>
              <b pos="5"/>
              <chunk name="adv">
                <tags>
                  <tag>
                    <clip pos="3" side="tl" part="a_adv"/>
                  </tag>
                  <tag>
                    <clip pos="3" side="tl" part="neg"/>
                  </tag>
                </tags>
                <lu>
                  <clip pos="3" side="tl" part="lem"/>
                  <clip pos="3" side="tl" part="a_adv"/>
                </lu>
              </chunk>
            </out>
          </when>
          <otherwise>
            <call-macro n="f_bcond">
              <with-param pos="5"/>
              <with-param pos="6"/>
            </call-macro>
          </otherwise>
        </choose>
        <let>
          <var n="caseFirstWord"/>
          <lit v="aa"/>
        </let>
      </action>
    </rule>
    <rule comment="REGLA: venir de inf -&gt; acabar de inf">
      <pattern>
        <pattern-item n="venir"/>
        <pattern-item n="de"/>
        <pattern-item n="inf"/>
      </pattern>
      <action>
        <call-macro n="tipus_verb">
          <with-param pos="3"/>
        </call-macro>
        <call-macro n="f_ppres">
          <with-param pos="1"/>
        </call-macro>
        <call-macro n="firstWord">
          <with-param pos="1"/>
        </call-macro>
        <out>
          <chunk name="acabar_de_inf" case="caseFirstWord">
            <tags>
              <tag>
                <lit-tag v="SV"/>
              </tag>
              <tag>
                <clip pos="1" side="tl" part="a_verb"/>
              </tag>
              <tag>
                <clip pos="1" side="tl" part="temps"/>
              </tag>
              <tag>
                <clip pos="1" side="tl" part="pers"/>
              </tag>
              <tag>
                <clip pos="1" side="tl" part="nbr"/>
              </tag>
              <tag>
                <var n="tipusverb"/>
              </tag>
            </tags>
            <lu>
              <get-case-from pos="1">
                <lit v="acabar"/>
              </get-case-from>
              <clip pos="1" side="tl" part="a_verb"/>
              <clip pos="1" side="tl" part="temps"/>
              <clip pos="1" side="tl" part="pers"/>
              <clip pos="1" side="tl" part="nbr" link-to="5"/>
              <clip pos="1" side="tl" part="lemq"/>
            </lu>
            <b pos="1"/>
            <lu>
              <clip pos="2" side="tl" part="whole"/>
            </lu>
            <b pos="2"/>
            <lu>
              <clip pos="3" side="tl" part="lemh"/>
              <clip pos="3" side="tl" part="a_verb"/>
              <clip pos="3" side="tl" part="temps"/>
              <clip pos="3" side="tl" part="lemq"/>
            </lu>
          </chunk>
        </out>
        <let>
          <var n="caseFirstWord"/>
          <lit v="aa"/>
        </let>
      </action>
    </rule>
    <rule comment="REGLA: venir-subj de inf -&gt; acabar de inf">
      <pattern>
        <pattern-item n="venir"/>
        <pattern-item n="prnperssubj"/>
        <pattern-item n="de"/>
        <pattern-item n="inf"/>
      </pattern>
      <action>
        <call-macro n="tipus_verb">
          <with-param pos="4"/>
        </call-macro>
        <call-macro n="f_ppres">
          <with-param pos="1"/>
        </call-macro>
        <call-macro n="firstWord">
          <with-param pos="1"/>
        </call-macro>
        <choose>
          <when>
            <test>
              <equal>
                <clip pos="2" side="sl" part="lem"/>
                <lit v="on"/>
              </equal>
            </test>
            <out>
              <chunk name="pro_acabar_de_inf" case="caseFirstWord">
                <tags>
                  <tag>
                    <lit-tag v="SV"/>
                  </tag>
                  <tag>
                    <clip pos="1" side="tl" part="a_verb"/>
                  </tag>
                  <tag>
                    <clip pos="1" side="tl" part="temps"/>
                  </tag>
                  <tag>
                    <clip pos="1" side="tl" part="pers"/>
                  </tag>
                  <tag>
                    <clip pos="1" side="tl" part="nbr"/>
                  </tag>
                  <tag>
                    <var n="tipusverb"/>
                  </tag>
                </tags>
                <lu>
                  <get-case-from pos="1">
                    <clip pos="2" side="tl" part="lem"/>
                  </get-case-from>
                  <lit-tag v="prn.obj"/>
                  <clip pos="2" side="tl" part="tipoenc_pro"/>
                </lu>
                <b/>
                <lu>
                  <get-case-from pos="2">
                    <lit v="acabar"/>
                  </get-case-from>
                  <clip pos="1" side="tl" part="a_verb"/>
                  <clip pos="1" side="tl" part="temps"/>
                  <clip pos="1" side="tl" part="pers"/>
                  <clip pos="1" side="tl" part="nbr" link-to="5"/>
                  <clip pos="1" side="tl" part="lemq"/>
                </lu>
                <b pos="2"/>
                <lu>
                  <clip pos="3" side="tl" part="whole"/>
                </lu>
                <b pos="3"/>
                <lu>
                  <clip pos="4" side="tl" part="lemh"/>
                  <clip pos="4" side="tl" part="a_verb"/>
                  <clip pos="4" side="tl" part="temps"/>
                  <clip pos="4" side="tl" part="lemq"/>
                </lu>
              </chunk>
            </out>
          </when>
          <otherwise>
            <out>
              <chunk name="acabar_de_inf" case="caseFirstWord">
                <tags>
                  <tag>
                    <lit-tag v="SV"/>
                  </tag>
                  <tag>
                    <clip pos="1" side="tl" part="a_verb"/>
                  </tag>
                  <tag>
                    <clip pos="1" side="tl" part="temps"/>
                  </tag>
                  <tag>
                    <clip pos="1" side="tl" part="pers"/>
                  </tag>
                  <tag>
                    <clip pos="1" side="tl" part="nbr"/>
                  </tag>
                  <tag>
                    <var n="tipusverb"/>
                  </tag>
                </tags>
                <lu>
                  <get-case-from pos="1">
                    <lit v="acabar"/>
                  </get-case-from>
                  <clip pos="1" side="tl" part="a_verb"/>
                  <clip pos="1" side="tl" part="temps"/>
                  <clip pos="1" side="tl" part="pers"/>
                  <clip pos="1" side="tl" part="nbr" link-to="5"/>
                  <clip pos="1" side="tl" part="lemq"/>
                </lu>
                <b pos="2"/>
                <lu>
                  <clip pos="3" side="tl" part="whole"/>
                </lu>
                <b pos="3"/>
                <lu>
                  <clip pos="4" side="tl" part="lemh"/>
                  <clip pos="4" side="tl" part="a_verb"/>
                  <clip pos="4" side="tl" part="temps"/>
                  <clip pos="4" side="tl" part="lemq"/>
                </lu>
              </chunk>
            </out>
          </otherwise>
        </choose>
        <let>
          <var n="caseFirstWord"/>
          <lit v="aa"/>
        </let>
      </action>
    </rule>
    <rule comment="venir de prnpro inf">
      <pattern>
        <pattern-item n="venir"/>
        <pattern-item n="de"/>
        <pattern-item n="prnpro"/>
        <pattern-item n="inf"/>
      </pattern>
      <action>
        <call-macro n="f_concord1">
          <with-param pos="3"/>
        </call-macro>
        <call-macro n="tipus_verb">
          <with-param pos="4"/>
        </call-macro>
        <call-macro n="f_ppres">
          <with-param pos="1"/>
        </call-macro>
        <call-macro n="firstWord">
          <with-param pos="1"/>
        </call-macro>
        <choose>
          <when>
            <test>
              <or>
                <equal caseless="yes">
                  <clip pos="3" side="sl" part="lem"/>
                  <lit v="en"/>
                </equal>
                <equal caseless="yes">
                  <clip pos="3" side="sl" part="lem"/>
                  <lit v="y"/>
                </equal>
              </or>
            </test>
            <out>
              <chunk name="acabar_de_inf" case="caseFirstWord">
                <tags>
                  <tag>
                    <lit-tag v="SV"/>
                  </tag>
                  <tag>
                    <clip pos="1" side="tl" part="a_verb"/>
                  </tag>
                  <tag>
                    <clip pos="1" side="tl" part="temps"/>
                  </tag>
                  <tag>
                    <clip pos="1" side="tl" part="pers"/>
                  </tag>
                  <tag>
                    <clip pos="1" side="tl" part="nbr"/>
                  </tag>
                  <tag>
                    <var n="tipusverb"/>
                  </tag>
                </tags>
                <lu>
                  <get-case-from pos="1">
                    <lit v="acabar"/>
                  </get-case-from>
                  <clip pos="1" side="tl" part="a_verb"/>
                  <clip pos="1" side="tl" part="temps"/>
                  <clip pos="1" side="tl" part="pers"/>
                  <clip pos="1" side="tl" part="nbr" link-to="5"/>
                  <clip pos="1" side="tl" part="lemq"/>
                </lu>
                <b pos="1"/>
                <lu>
                  <clip pos="2" side="tl" part="whole"/>
                </lu>
                <b pos="2"/>
                <lu>
                  <clip pos="4" side="tl" part="lemh"/>
                  <clip pos="4" side="tl" part="a_verb"/>
                  <clip pos="4" side="tl" part="temps"/>
                  <clip pos="4" side="tl" part="pers"/>
                  <clip pos="4" side="tl" part="nbr"/>
                  <clip pos="4" side="tl" part="lemq"/>
                </lu>
              </chunk>
            </out>
            <call-macro n="f_bcond">
              <with-param pos="3"/>
              <with-param pos="4"/>
            </call-macro>
          </when>
          <otherwise>
            <out>
              <chunk name="acabar_de_inf_enc" case="caseFirstWord">
                <tags>
                  <tag>
                    <lit-tag v="SV"/>
                  </tag>
                  <tag>
                    <clip pos="1" side="tl" part="a_verb"/>
                  </tag>
                  <tag>
                    <clip pos="1" side="tl" part="temps"/>
                  </tag>
                  <tag>
                    <clip pos="1" side="tl" part="pers"/>
                  </tag>
                  <tag>
                    <clip pos="1" side="tl" part="nbr"/>
                  </tag>
                  <tag>
                    <var n="tipusverb"/>
                  </tag>
                </tags>
                <lu>
                  <get-case-from pos="1">
                    <lit v="acabar"/>
                  </get-case-from>
                  <clip pos="1" side="tl" part="a_verb"/>
                  <clip pos="1" side="tl" part="temps"/>
                  <clip pos="1" side="tl" part="pers"/>
                  <clip pos="1" side="tl" part="nbr" link-to="5"/>
                  <clip pos="1" side="tl" part="lemq"/>
                </lu>
                <b pos="1"/>
                <lu>
                  <clip pos="2" side="tl" part="whole"/>
                </lu>
                <b pos="2"/>
                <mlu>
                  <lu>
                    <clip pos="4" side="tl" part="lemh"/>
                    <clip pos="4" side="tl" part="a_verb"/>
                    <clip pos="4" side="tl" part="temps"/>
                    <clip pos="4" side="tl" part="pers"/>
                    <clip pos="4" side="tl" part="nbr"/>
                  </lu>
                  <lu>
                    <clip pos="3" side="tl" part="lem"/>
                    <lit-tag v="prn.enc"/>
                    <clip pos="3" side="tl" part="tipoenc_pro"/>
                    <clip pos="4" side="tl" part="lemq"/>
                  </lu>
                </mlu>
              </chunk>
            </out>
            <call-macro n="f_bcond">
              <with-param pos="3"/>
              <with-param pos="4"/>
            </call-macro>
          </otherwise>
        </choose>
        <let>
          <var n="caseFirstWord"/>
          <lit v="aa"/>
        </let>
      </action>
    </rule>
    <rule comment="venir-subj de prnpro inf">
      <pattern>
        <pattern-item n="venir"/>
        <pattern-item n="prnperssubj"/>
        <pattern-item n="de"/>
        <pattern-item n="prnpro"/>
        <pattern-item n="inf"/>
      </pattern>
      <action>
        <call-macro n="f_concord1">
          <with-param pos="3"/>
        </call-macro>
        <call-macro n="tipus_verb">
          <with-param pos="5"/>
        </call-macro>
        <call-macro n="f_ppres">
          <with-param pos="1"/>
        </call-macro>
        <call-macro n="firstWord">
          <with-param pos="1"/>
        </call-macro>
        <choose>
          <when>
            <test>
              <equal>
                <clip pos="2" side="sl" part="lem"/>
                <lit v="on"/>
              </equal>
            </test>
            <choose>
              <when>
                <test>
                  <or>
                    <equal caseless="yes">
                      <clip pos="4" side="sl" part="lem"/>
                      <lit v="en"/>
                    </equal>
                    <equal caseless="yes">
                      <clip pos="4" side="sl" part="lem"/>
                      <lit v="y"/>
                    </equal>
                  </or>
                </test>
                <out>
                  <chunk name="pro_acabar_de_inf" case="caseFirstWord">
                    <tags>
                      <tag>
                        <lit-tag v="SV"/>
                      </tag>
                      <tag>
                        <clip pos="1" side="tl" part="a_verb"/>
                      </tag>
                      <tag>
                        <clip pos="1" side="tl" part="temps"/>
                      </tag>
                      <tag>
                        <clip pos="1" side="tl" part="pers"/>
                      </tag>
                      <tag>
                        <clip pos="1" side="tl" part="nbr"/>
                      </tag>
                      <tag>
                        <var n="tipusverb"/>
                      </tag>
                    </tags>
                    <lu>
                      <get-case-from pos="1">
                        <clip pos="2" side="tl" part="lem"/>
                      </get-case-from>
                      <lit-tag v="prn.obj"/>
                      <clip pos="2" side="tl" part="tipoenc_pro"/>
                    </lu>
                    <b/>
                    <lu>
                      <get-case-from pos="2">
                        <lit v="acabar"/>
                      </get-case-from>
                      <clip pos="1" side="tl" part="a_verb"/>
                      <clip pos="1" side="tl" part="temps"/>
                      <clip pos="1" side="tl" part="pers"/>
                      <clip pos="1" side="tl" part="nbr" link-to="5"/>
                      <clip pos="1" side="tl" part="lemq"/>
                    </lu>
                    <b pos="2"/>
                    <lu>
                      <clip pos="3" side="tl" part="whole"/>
                    </lu>
                    <b pos="3"/>
                    <lu>
                      <clip pos="5" side="tl" part="lemh"/>
                      <clip pos="5" side="tl" part="a_verb"/>
                      <clip pos="5" side="tl" part="temps"/>
                      <clip pos="5" side="tl" part="pers"/>
                      <clip pos="5" side="tl" part="nbr"/>
                      <clip pos="5" side="tl" part="lemq"/>
                    </lu>
                  </chunk>
                </out>
                <call-macro n="f_bcond">
                  <with-param pos="4"/>
                  <with-param pos="5"/>
                </call-macro>
              </when>
              <otherwise>
                <out>
                  <chunk name="pro_acabar_de_inf_enc" case="caseFirstWord">
                    <tags>
                      <tag>
                        <lit-tag v="SV"/>
                      </tag>
                      <tag>
                        <clip pos="1" side="tl" part="a_verb"/>
                      </tag>
                      <tag>
                        <clip pos="1" side="tl" part="temps"/>
                      </tag>
                      <tag>
                        <clip pos="1" side="tl" part="pers"/>
                      </tag>
                      <tag>
                        <clip pos="1" side="tl" part="nbr"/>
                      </tag>
                      <tag>
                        <var n="tipusverb"/>
                      </tag>
                    </tags>
                    <lu>
                      <get-case-from pos="1">
                        <clip pos="2" side="tl" part="lem"/>
                      </get-case-from>
                      <lit-tag v="prn.obj"/>
                      <clip pos="2" side="tl" part="tipoenc_pro"/>
                    </lu>
                    <b/>
                    <lu>
                      <get-case-from pos="2">
                        <lit v="acabar"/>
                      </get-case-from>
                      <clip pos="1" side="tl" part="a_verb"/>
                      <clip pos="1" side="tl" part="temps"/>
                      <clip pos="1" side="tl" part="pers"/>
                      <clip pos="1" side="tl" part="nbr" link-to="5"/>
                      <clip pos="1" side="tl" part="lemq"/>
                    </lu>
                    <b pos="2"/>
                    <lu>
                      <clip pos="3" side="tl" part="whole"/>
                    </lu>
                    <b pos="3"/>
                    <mlu>
                      <lu>
                        <clip pos="5" side="tl" part="lemh"/>
                        <clip pos="5" side="tl" part="a_verb"/>
                        <clip pos="5" side="tl" part="temps"/>
                        <clip pos="5" side="tl" part="pers"/>
                        <clip pos="5" side="tl" part="nbr"/>
                      </lu>
                      <lu>
                        <clip pos="4" side="tl" part="lem"/>
                        <lit-tag v="prn.enc"/>
                        <clip pos="4" side="tl" part="tipoenc_pro"/>
                        <clip pos="5" side="tl" part="lemq"/>
                      </lu>
                    </mlu>
                  </chunk>
                </out>
                <call-macro n="f_bcond">
                  <with-param pos="4"/>
                  <with-param pos="5"/>
                </call-macro>
              </otherwise>
            </choose>
          </when>
          <otherwise>
            <choose>
              <when>
                <test>
                  <or>
                    <equal caseless="yes">
                      <clip pos="4" side="sl" part="lem"/>
                      <lit v="en"/>
                    </equal>
                    <equal caseless="yes">
                      <clip pos="4" side="sl" part="lem"/>
                      <lit v="y"/>
                    </equal>
                  </or>
                </test>
                <out>
                  <chunk name="acabar_de_inf" case="caseFirstWord">
                    <tags>
                      <tag>
                        <lit-tag v="SV"/>
                      </tag>
                      <tag>
                        <clip pos="1" side="tl" part="a_verb"/>
                      </tag>
                      <tag>
                        <clip pos="1" side="tl" part="temps"/>
                      </tag>
                      <tag>
                        <clip pos="1" side="tl" part="pers"/>
                      </tag>
                      <tag>
                        <clip pos="1" side="tl" part="nbr"/>
                      </tag>
                      <tag>
                        <var n="tipusverb"/>
                      </tag>
                    </tags>
                    <lu>
                      <get-case-from pos="1">
                        <lit v="acabar"/>
                      </get-case-from>
                      <clip pos="1" side="tl" part="a_verb"/>
                      <clip pos="1" side="tl" part="temps"/>
                      <clip pos="1" side="tl" part="pers"/>
                      <clip pos="1" side="tl" part="nbr" link-to="5"/>
                      <clip pos="1" side="tl" part="lemq"/>
                    </lu>
                    <b pos="2"/>
                    <lu>
                      <clip pos="3" side="tl" part="whole"/>
                    </lu>
                    <b pos="3"/>
                    <lu>
                      <clip pos="5" side="tl" part="lemh"/>
                      <clip pos="5" side="tl" part="a_verb"/>
                      <clip pos="5" side="tl" part="temps"/>
                      <clip pos="5" side="tl" part="pers"/>
                      <clip pos="5" side="tl" part="nbr"/>
                      <clip pos="5" side="tl" part="lemq"/>
                    </lu>
                  </chunk>
                </out>
                <call-macro n="f_bcond">
                  <with-param pos="4"/>
                  <with-param pos="5"/>
                </call-macro>
              </when>
              <otherwise>
                <out>
                  <chunk name="acabar_de_inf_enc" case="caseFirstWord">
                    <tags>
                      <tag>
                        <lit-tag v="SV"/>
                      </tag>
                      <tag>
                        <clip pos="1" side="tl" part="a_verb"/>
                      </tag>
                      <tag>
                        <clip pos="1" side="tl" part="temps"/>
                      </tag>
                      <tag>
                        <clip pos="1" side="tl" part="pers"/>
                      </tag>
                      <tag>
                        <clip pos="1" side="tl" part="nbr"/>
                      </tag>
                      <tag>
                        <var n="tipusverb"/>
                      </tag>
                    </tags>
                    <lu>
                      <get-case-from pos="1">
                        <lit v="acabar"/>
                      </get-case-from>
                      <clip pos="1" side="tl" part="a_verb"/>
                      <clip pos="1" side="tl" part="temps"/>
                      <clip pos="1" side="tl" part="pers"/>
                      <clip pos="1" side="tl" part="nbr" link-to="5"/>
                      <clip pos="1" side="tl" part="lemq"/>
                    </lu>
                    <b pos="2"/>
                    <lu>
                      <clip pos="3" side="tl" part="whole"/>
                    </lu>
                    <b pos="3"/>
                    <mlu>
                      <lu>
                        <clip pos="5" side="tl" part="lemh"/>
                        <clip pos="5" side="tl" part="a_verb"/>
                        <clip pos="5" side="tl" part="temps"/>
                        <clip pos="5" side="tl" part="pers"/>
                        <clip pos="5" side="tl" part="nbr"/>
                      </lu>
                      <lu>
                        <clip pos="4" side="tl" part="lem"/>
                        <lit-tag v="prn.enc"/>
                        <clip pos="4" side="tl" part="tipoenc_pro"/>
                        <clip pos="5" side="tl" part="lemq"/>
                      </lu>
                    </mlu>
                  </chunk>
                </out>
                <call-macro n="f_bcond">
                  <with-param pos="4"/>
                  <with-param pos="5"/>
                </call-macro>
              </otherwise>
            </choose>
          </otherwise>
        </choose>
        <let>
          <var n="caseFirstWord"/>
          <lit v="aa"/>
        </let>
      </action>
    </rule>
    <rule comment="venir de prnpro prnpro inf">
      <pattern>
        <pattern-item n="venir"/>
        <pattern-item n="de"/>
        <pattern-item n="prnpro"/>
        <pattern-item n="prnpro"/>
        <pattern-item n="inf"/>
      </pattern>
      <action>
        <call-macro n="f_concord1">
          <with-param pos="3"/>
        </call-macro>
        <call-macro n="f_concord1">
          <with-param pos="4"/>
        </call-macro>
        <call-macro n="tipus_verb">
          <with-param pos="5"/>
        </call-macro>
        <call-macro n="f_ppres">
          <with-param pos="1"/>
        </call-macro>
        <call-macro n="firstWord">
          <with-param pos="1"/>
        </call-macro>
        <choose>
          <when>
            <test>
              <equal caseless="yes">
                <clip pos="3" side="sl" part="lem"/>
                <lit v="en"/>
              </equal>
            </test>
            <choose>
              <when>
                <test>
                  <equal caseless="yes">
                    <clip pos="4" side="sl" part="lem"/>
                    <lit v="y"/>
                  </equal>
                </test>
                <out>
                  <chunk name="acabar_de_inf" case="caseFirstWord">
                    <tags>
                      <tag>
                        <lit-tag v="SV"/>
                      </tag>
                      <tag>
                        <clip pos="1" side="tl" part="a_verb"/>
                      </tag>
                      <tag>
                        <clip pos="1" side="tl" part="temps"/>
                      </tag>
                      <tag>
                        <clip pos="1" side="tl" part="pers"/>
                      </tag>
                      <tag>
                        <clip pos="1" side="tl" part="nbr"/>
                      </tag>
                      <tag>
                        <var n="tipusverb"/>
                      </tag>
                    </tags>
                    <lu>
                      <get-case-from pos="1">
                        <lit v="acabar"/>
                      </get-case-from>
                      <clip pos="1" side="tl" part="a_verb"/>
                      <clip pos="1" side="tl" part="temps"/>
                      <clip pos="1" side="tl" part="pers"/>
                      <clip pos="1" side="tl" part="nbr" link-to="5"/>
                      <clip pos="1" side="tl" part="lemq"/>
                    </lu>
                    <b pos="1"/>
                    <lu>
                      <clip pos="2" side="tl" part="lem"/>
                    </lu>
                    <b pos="2"/>
                    <lu>
                      <clip pos="5" side="tl" part="lemh"/>
                      <clip pos="5" side="tl" part="a_verb"/>
                      <clip pos="5" side="tl" part="temps"/>
                      <clip pos="5" side="tl" part="pers"/>
                      <clip pos="5" side="tl" part="nbr"/>
                      <clip pos="5" side="tl" part="lemq"/>
                    </lu>
                  </chunk>
                </out>
                <call-macro n="f_bcond">
                  <with-param pos="3"/>
                  <with-param pos="4"/>
                </call-macro>
                <call-macro n="f_bcond">
                  <with-param pos="4"/>
                  <with-param pos="5"/>
                </call-macro>
              </when>
              <otherwise>
                <out>
                  <chunk name="acabar_de_inf_enc" case="caseFirstWord">
                    <tags>
                      <tag>
                        <lit-tag v="SV"/>
                      </tag>
                      <tag>
                        <clip pos="1" side="tl" part="a_verb"/>
                      </tag>
                      <tag>
                        <clip pos="1" side="tl" part="temps"/>
                      </tag>
                      <tag>
                        <clip pos="1" side="tl" part="pers"/>
                      </tag>
                      <tag>
                        <clip pos="1" side="tl" part="nbr"/>
                      </tag>
                      <tag>
                        <var n="tipusverb"/>
                      </tag>
                    </tags>
                    <lu>
                      <get-case-from pos="1">
                        <lit v="acabar"/>
                      </get-case-from>
                      <clip pos="1" side="tl" part="a_verb"/>
                      <clip pos="1" side="tl" part="temps"/>
                      <clip pos="1" side="tl" part="pers"/>
                      <clip pos="1" side="tl" part="nbr" link-to="5"/>
                      <clip pos="1" side="tl" part="lemq"/>
                    </lu>
                    <b pos="1"/>
                    <lu>
                      <clip pos="2" side="tl" part="whole"/>
                    </lu>
                    <b pos="2"/>
                    <mlu>
                      <lu>
                        <clip pos="5" side="tl" part="lemh"/>
                        <clip pos="5" side="tl" part="a_verb"/>
                        <clip pos="5" side="tl" part="temps"/>
                        <clip pos="5" side="tl" part="pers"/>
                        <clip pos="5" side="tl" part="nbr"/>
                      </lu>
                      <lu>
                        <clip pos="4" side="tl" part="lem"/>
                        <lit-tag v="prn.enc"/>
                        <clip pos="4" side="tl" part="tipoenc_pro"/>
                        <clip pos="5" side="tl" part="lemq"/>
                      </lu>
                    </mlu>
                  </chunk>
                </out>
                <call-macro n="f_bcond">
                  <with-param pos="3"/>
                  <with-param pos="4"/>
                </call-macro>
                <call-macro n="f_bcond">
                  <with-param pos="4"/>
                  <with-param pos="5"/>
                </call-macro>
              </otherwise>
            </choose>
          </when>
          <otherwise>
            <choose>
              <when>
                <test>
                  <or>
                    <equal caseless="yes">
                      <clip pos="4" side="sl" part="lem"/>
                      <lit v="en"/>
                    </equal>
                    <equal caseless="yes">
                      <clip pos="4" side="sl" part="lem"/>
                      <lit v="y"/>
                    </equal>
                  </or>
                </test>
                <out>
                  <chunk name="acabar_de_inf_enc" case="caseFirstWord">
                    <tags>
                      <tag>
                        <lit-tag v="SV"/>
                      </tag>
                      <tag>
                        <clip pos="1" side="tl" part="a_verb"/>
                      </tag>
                      <tag>
                        <clip pos="1" side="tl" part="temps"/>
                      </tag>
                      <tag>
                        <clip pos="1" side="tl" part="pers"/>
                      </tag>
                      <tag>
                        <clip pos="1" side="tl" part="nbr"/>
                      </tag>
                      <tag>
                        <var n="tipusverb"/>
                      </tag>
                    </tags>
                    <lu>
                      <get-case-from pos="1">
                        <lit v="acabar"/>
                      </get-case-from>
                      <clip pos="1" side="tl" part="a_verb"/>
                      <clip pos="1" side="tl" part="temps"/>
                      <clip pos="1" side="tl" part="pers"/>
                      <clip pos="1" side="tl" part="nbr" link-to="5"/>
                      <clip pos="1" side="tl" part="lemq"/>
                    </lu>
                    <b pos="1"/>
                    <lu>
                      <clip pos="2" side="tl" part="whole"/>
                    </lu>
                    <b pos="2"/>
                    <mlu>
                      <lu>
                        <clip pos="5" side="tl" part="lemh"/>
                        <clip pos="5" side="tl" part="a_verb"/>
                        <clip pos="5" side="tl" part="temps"/>
                        <clip pos="5" side="tl" part="pers"/>
                        <clip pos="5" side="tl" part="nbr"/>
                      </lu>
                      <lu>
                        <clip pos="3" side="tl" part="lem"/>
                        <lit-tag v="prn.enc"/>
                        <clip pos="3" side="tl" part="tipoenc_pro"/>
                        <clip pos="5" side="tl" part="lemq"/>
                      </lu>
                    </mlu>
                  </chunk>
                </out>
                <call-macro n="f_bcond">
                  <with-param pos="3"/>
                  <with-param pos="4"/>
                </call-macro>
                <call-macro n="f_bcond">
                  <with-param pos="4"/>
                  <with-param pos="5"/>
                </call-macro>
              </when>
              <otherwise>
                <out>
                  <chunk name="acabar_de_inf_enc_enc" case="caseFirstWord">
                    <tags>
                      <tag>
                        <lit-tag v="SV"/>
                      </tag>
                      <tag>
                        <clip pos="1" side="tl" part="a_verb"/>
                      </tag>
                      <tag>
                        <clip pos="1" side="tl" part="temps"/>
                      </tag>
                      <tag>
                        <clip pos="1" side="tl" part="pers"/>
                      </tag>
                      <tag>
                        <clip pos="1" side="tl" part="nbr"/>
                      </tag>
                      <tag>
                        <var n="tipusverb"/>
                      </tag>
                    </tags>
                    <lu>
                      <get-case-from pos="1">
                        <lit v="acabar"/>
                      </get-case-from>
                      <clip pos="1" side="tl" part="a_verb"/>
                      <clip pos="1" side="tl" part="temps"/>
                      <clip pos="1" side="tl" part="pers"/>
                      <clip pos="1" side="tl" part="nbr" link-to="5"/>
                      <clip pos="1" side="tl" part="lemq"/>
                    </lu>
                    <b pos="1"/>
                    <lu>
                      <clip pos="2" side="tl" part="whole"/>
                    </lu>
                    <b pos="2"/>
                    <mlu>
                      <lu>
                        <clip pos="5" side="tl" part="lemh"/>
                        <clip pos="5" side="tl" part="a_verb"/>
                        <clip pos="5" side="tl" part="temps"/>
                        <clip pos="5" side="tl" part="pers"/>
                        <clip pos="5" side="tl" part="nbr"/>
                      </lu>
                      <lu>
                        <clip pos="3" side="tl" part="lem"/>
                        <lit-tag v="prn.enc"/>
                        <clip pos="3" side="tl" part="tipoenc_pro"/>
                      </lu>
                      <lu>
                        <clip pos="4" side="tl" part="lem"/>
                        <lit-tag v="prn.enc"/>
                        <clip pos="4" side="tl" part="tipoenc_pro"/>
                        <clip pos="5" side="tl" part="lemq"/>
                      </lu>
                    </mlu>
                  </chunk>
                </out>
                <call-macro n="f_bcond">
                  <with-param pos="3"/>
                  <with-param pos="4"/>
                </call-macro>
                <call-macro n="f_bcond">
                  <with-param pos="4"/>
                  <with-param pos="5"/>
                </call-macro>
              </otherwise>
            </choose>
          </otherwise>
        </choose>
        <let>
          <var n="caseFirstWord"/>
          <lit v="aa"/>
        </let>
      </action>
    </rule>
    <rule comment="venir-subj de prnpro prnpro inf">
      <!--també falta el tema "on"-->
      <pattern>
        <pattern-item n="venir"/>
        <pattern-item n="prnperssubj"/>
        <pattern-item n="de"/>
        <pattern-item n="prnpro"/>
        <pattern-item n="prnpro"/>
        <pattern-item n="inf"/>
      </pattern>
      <action>
        <call-macro n="f_concord1">
          <with-param pos="4"/>
        </call-macro>
        <call-macro n="f_concord1">
          <with-param pos="5"/>
        </call-macro>
        <call-macro n="tipus_verb">
          <with-param pos="6"/>
        </call-macro>
        <call-macro n="f_ppres">
          <with-param pos="1"/>
        </call-macro>
        <call-macro n="firstWord">
          <with-param pos="1"/>
        </call-macro>
        <choose>
          <when>
            <test>
              <equal caseless="yes">
                <clip pos="4" side="sl" part="lem"/>
                <lit v="en"/>
              </equal>
            </test>
            <choose>
              <when>
                <test>
                  <equal caseless="yes">
                    <clip pos="5" side="sl" part="lem"/>
                    <lit v="y"/>
                  </equal>
                </test>
                <out>
                  <chunk name="acabar_de_inf" case="caseFirstWord">
                    <tags>
                      <tag>
                        <lit-tag v="SV"/>
                      </tag>
                      <tag>
                        <clip pos="1" side="tl" part="a_verb"/>
                      </tag>
                      <tag>
                        <clip pos="1" side="tl" part="temps"/>
                      </tag>
                      <tag>
                        <clip pos="1" side="tl" part="pers"/>
                      </tag>
                      <tag>
                        <clip pos="1" side="tl" part="nbr"/>
                      </tag>
                      <tag>
                        <var n="tipusverb"/>
                      </tag>
                    </tags>
                    <lu>
                      <get-case-from pos="1">
                        <lit v="acabar"/>
                      </get-case-from>
                      <clip pos="1" side="tl" part="a_verb"/>
                      <clip pos="1" side="tl" part="temps"/>
                      <clip pos="1" side="tl" part="pers"/>
                      <clip pos="1" side="tl" part="nbr" link-to="5"/>
                      <clip pos="1" side="tl" part="lemq"/>
                    </lu>
                    <b pos="2"/>
                    <lu>
                      <clip pos="3" side="tl" part="lem"/>
                    </lu>
                    <b pos="3"/>
                    <lu>
                      <clip pos="6" side="tl" part="lemh"/>
                      <clip pos="6" side="tl" part="a_verb"/>
                      <clip pos="6" side="tl" part="temps"/>
                      <clip pos="6" side="tl" part="pers"/>
                      <clip pos="6" side="tl" part="nbr"/>
                      <clip pos="6" side="tl" part="lemq"/>
                    </lu>
                  </chunk>
                </out>
                <call-macro n="f_bcond">
                  <with-param pos="4"/>
                  <with-param pos="5"/>
                </call-macro>
                <call-macro n="f_bcond">
                  <with-param pos="5"/>
                  <with-param pos="6"/>
                </call-macro>
              </when>
              <otherwise>
                <out>
                  <chunk name="acabar_de_inf_enc" case="caseFirstWord">
                    <tags>
                      <tag>
                        <lit-tag v="SV"/>
                      </tag>
                      <tag>
                        <clip pos="1" side="tl" part="a_verb"/>
                      </tag>
                      <tag>
                        <clip pos="1" side="tl" part="temps"/>
                      </tag>
                      <tag>
                        <clip pos="1" side="tl" part="pers"/>
                      </tag>
                      <tag>
                        <clip pos="1" side="tl" part="nbr"/>
                      </tag>
                      <tag>
                        <var n="tipusverb"/>
                      </tag>
                    </tags>
                    <lu>
                      <get-case-from pos="1">
                        <lit v="acabar"/>
                      </get-case-from>
                      <clip pos="1" side="tl" part="a_verb"/>
                      <clip pos="1" side="tl" part="temps"/>
                      <clip pos="1" side="tl" part="pers"/>
                      <clip pos="1" side="tl" part="nbr" link-to="5"/>
                      <clip pos="1" side="tl" part="lemq"/>
                    </lu>
                    <b pos="2"/>
                    <lu>
                      <clip pos="3" side="tl" part="whole"/>
                    </lu>
                    <b pos="3"/>
                    <mlu>
                      <lu>
                        <clip pos="6" side="tl" part="lemh"/>
                        <clip pos="6" side="tl" part="a_verb"/>
                        <clip pos="6" side="tl" part="temps"/>
                        <clip pos="6" side="tl" part="pers"/>
                        <clip pos="6" side="tl" part="nbr"/>
                      </lu>
                      <lu>
                        <clip pos="5" side="tl" part="lem"/>
                        <lit-tag v="prn.enc"/>
                        <clip pos="5" side="tl" part="tipoenc_pro"/>
                        <clip pos="6" side="tl" part="lemq"/>
                      </lu>
                    </mlu>
                  </chunk>
                </out>
                <call-macro n="f_bcond">
                  <with-param pos="4"/>
                  <with-param pos="5"/>
                </call-macro>
                <call-macro n="f_bcond">
                  <with-param pos="5"/>
                  <with-param pos="6"/>
                </call-macro>
              </otherwise>
            </choose>
          </when>
          <otherwise>
            <choose>
              <when>
                <test>
                  <or>
                    <equal caseless="yes">
                      <clip pos="5" side="sl" part="lem"/>
                      <lit v="en"/>
                    </equal>
                    <equal caseless="yes">
                      <clip pos="5" side="sl" part="lem"/>
                      <lit v="y"/>
                    </equal>
                  </or>
                </test>
                <out>
                  <chunk name="acabar_de_inf_enc" case="caseFirstWord">
                    <tags>
                      <tag>
                        <lit-tag v="SV"/>
                      </tag>
                      <tag>
                        <clip pos="1" side="tl" part="a_verb"/>
                      </tag>
                      <tag>
                        <clip pos="1" side="tl" part="temps"/>
                      </tag>
                      <tag>
                        <clip pos="1" side="tl" part="pers"/>
                      </tag>
                      <tag>
                        <clip pos="1" side="tl" part="nbr"/>
                      </tag>
                      <tag>
                        <var n="tipusverb"/>
                      </tag>
                    </tags>
                    <lu>
                      <get-case-from pos="1">
                        <lit v="acabar"/>
                      </get-case-from>
                      <clip pos="1" side="tl" part="a_verb"/>
                      <clip pos="1" side="tl" part="temps"/>
                      <clip pos="1" side="tl" part="pers"/>
                      <clip pos="1" side="tl" part="nbr" link-to="5"/>
                      <clip pos="1" side="tl" part="lemq"/>
                    </lu>
                    <b pos="2"/>
                    <lu>
                      <clip pos="3" side="tl" part="whole"/>
                    </lu>
                    <b pos="3"/>
                    <mlu>
                      <lu>
                        <clip pos="6" side="tl" part="lemh"/>
                        <clip pos="6" side="tl" part="a_verb"/>
                        <clip pos="6" side="tl" part="temps"/>
                        <clip pos="6" side="tl" part="pers"/>
                        <clip pos="6" side="tl" part="nbr"/>
                      </lu>
                      <lu>
                        <clip pos="4" side="tl" part="lem"/>
                        <lit-tag v="prn.enc"/>
                        <clip pos="4" side="tl" part="tipoenc_pro"/>
                        <clip pos="6" side="tl" part="lemq"/>
                      </lu>
                    </mlu>
                  </chunk>
                </out>
                <call-macro n="f_bcond">
                  <with-param pos="4"/>
                  <with-param pos="5"/>
                </call-macro>
                <call-macro n="f_bcond">
                  <with-param pos="5"/>
                  <with-param pos="6"/>
                </call-macro>
              </when>
              <otherwise>
                <out>
                  <chunk name="acabar_de_inf_enc_enc" case="caseFirstWord">
                    <tags>
                      <tag>
                        <lit-tag v="SV"/>
                      </tag>
                      <tag>
                        <clip pos="1" side="tl" part="a_verb"/>
                      </tag>
                      <tag>
                        <clip pos="1" side="tl" part="temps"/>
                      </tag>
                      <tag>
                        <clip pos="1" side="tl" part="pers"/>
                      </tag>
                      <tag>
                        <clip pos="1" side="tl" part="nbr"/>
                      </tag>
                      <tag>
                        <var n="tipusverb"/>
                      </tag>
                    </tags>
                    <lu>
                      <get-case-from pos="1">
                        <lit v="acabar"/>
                      </get-case-from>
                      <clip pos="1" side="tl" part="a_verb"/>
                      <clip pos="1" side="tl" part="temps"/>
                      <clip pos="1" side="tl" part="pers"/>
                      <clip pos="1" side="tl" part="nbr" link-to="5"/>
                      <clip pos="1" side="tl" part="lemq"/>
                    </lu>
                    <b pos="2"/>
                    <lu>
                      <clip pos="3" side="tl" part="whole"/>
                    </lu>
                    <b pos="3"/>
                    <mlu>
                      <lu>
                        <clip pos="6" side="tl" part="lemh"/>
                        <clip pos="6" side="tl" part="a_verb"/>
                        <clip pos="6" side="tl" part="temps"/>
                        <clip pos="6" side="tl" part="pers"/>
                        <clip pos="6" side="tl" part="nbr"/>
                      </lu>
                      <lu>
                        <clip pos="4" side="tl" part="lem"/>
                        <lit-tag v="prn.enc"/>
                        <clip pos="4" side="tl" part="tipoenc_pro"/>
                      </lu>
                      <lu>
                        <clip pos="5" side="tl" part="lem"/>
                        <lit-tag v="prn.enc"/>
                        <clip pos="5" side="tl" part="tipoenc_pro"/>
                        <clip pos="6" side="tl" part="lemq"/>
                      </lu>
                    </mlu>
                  </chunk>
                </out>
                <call-macro n="f_bcond">
                  <with-param pos="4"/>
                  <with-param pos="5"/>
                </call-macro>
                <call-macro n="f_bcond">
                  <with-param pos="5"/>
                  <with-param pos="6"/>
                </call-macro>
              </otherwise>
            </choose>
          </otherwise>
        </choose>
        <let>
          <var n="caseFirstWord"/>
          <lit v="aa"/>
        </let>
      </action>
    </rule>
    <rule comment="REGLA: ne rien INF -&gt; no inf nada">
      <pattern>
        <pattern-item n="ne"/>
        <pattern-item n="rien"/>
        <pattern-item n="inf"/>
      </pattern>
      <action>
        <call-macro n="tipus_verb">
          <with-param pos="3"/>
        </call-macro>
        <call-macro n="firstWord">
          <with-param pos="1"/>
        </call-macro>
        <out>
          <chunk name="ne" case="caseFirstWord">
            <tags>
              <tag>
                <clip pos="1" side="tl" part="a_adv"/>
              </tag>
              <tag>
                <clip pos="1" side="tl" part="neg"/>
              </tag>
            </tags>
            <lu>
              <clip pos="1" side="tl" part="lem"/>
              <clip pos="1" side="tl" part="a_adv"/>
            </lu>
          </chunk>
          <b pos="1"/>
          <chunk name="inf">
            <tags>
              <tag>
                <lit-tag v="SN"/>
              </tag>
              <tag>
                <clip pos="3" side="tl" part="a_verb"/>
              </tag>
              <tag>
                <clip pos="3" side="tl" part="temps"/>
              </tag>
              <tag>
                <var n="tipusverb"/>
              </tag>
            </tags>
            <lu>
              <clip pos="3" side="tl" part="lemh"/>
              <clip pos="3" side="tl" part="a_verb"/>
              <clip pos="3" side="tl" part="temps"/>
              <clip pos="3" side="tl" part="pers"/>
              <clip pos="3" side="tl" part="nbr"/>
              <clip pos="3" side="tl" part="lemq"/>
            </lu>
          </chunk>
          <b pos="2"/>
          <chunk name="prn">
            <tags>
              <tag>
                <lit-tag v="SN"/>
              </tag>
              <tag>
                <clip pos="2" side="tl" part="tipus_prn"/>
              </tag>
              <tag>
                <clip pos="2" side="tl" part="gen"/>
              </tag>
              <tag>
                <clip pos="2" side="tl" part="nbr"/>
              </tag>
            </tags>
            <lu>
              <clip pos="2" side="tl" part="lem"/>
              <clip pos="2" side="tl" part="a_prn"/>
              <clip pos="2" side="tl" part="tipus_prn"/>
              <clip pos="2" side="tl" part="gen"/>
              <clip pos="2" side="tl" part="nbr"/>
            </lu>
          </chunk>
        </out>
        <let>
          <var n="caseFirstWord"/>
          <lit v="aa"/>
        </let>
      </action>
    </rule>
    <rule comment="ne rien prnpro inf">
      <pattern>
        <pattern-item n="ne"/>
        <pattern-item n="rien"/>
        <pattern-item n="prnpro"/>
        <pattern-item n="inf"/>
      </pattern>
      <action>
        <call-macro n="f_concord1">
          <with-param pos="3"/>
        </call-macro>
        <call-macro n="tipus_verb">
          <with-param pos="4"/>
        </call-macro>
        <call-macro n="firstWord">
          <with-param pos="1"/>
        </call-macro>
        <out>
          <chunk name="ne" case="caseFirstWord">
            <tags>
              <tag>
                <clip pos="1" side="tl" part="a_adv"/>
              </tag>
              <tag>
                <clip pos="1" side="tl" part="neg"/>
              </tag>
            </tags>
            <lu>
              <clip pos="1" side="tl" part="lem"/>
              <clip pos="1" side="tl" part="a_adv"/>
            </lu>
          </chunk>
          <b pos="1"/>
        </out>
        <choose>
          <when>
            <test>
              <or>
                <equal caseless="yes">
                  <clip pos="3" side="sl" part="lem"/>
                  <lit v="en"/>
                </equal>
                <equal caseless="yes">
                  <clip pos="3" side="sl" part="lem"/>
                  <lit v="y"/>
                </equal>
              </or>
            </test>
            <out>
              <chunk name="inf">
                <tags>
                  <tag>
                    <lit-tag v="SN"/>
                  </tag>
                  <tag>
                    <clip pos="4" side="tl" part="a_verb"/>
                  </tag>
                  <tag>
                    <clip pos="4" side="tl" part="temps"/>
                  </tag>
                  <tag>
                    <clip pos="4" side="tl" part="pers"/>
                  </tag>
                  <tag>
                    <clip pos="4" side="tl" part="nbr"/>
                  </tag>
                  <tag>
                    <var n="tipusverb"/>
                  </tag>
                </tags>
                <lu>
                  <get-case-from pos="1">
                    <clip pos="4" side="tl" part="lemh"/>
                  </get-case-from>
                  <clip pos="4" side="tl" part="a_verb"/>
                  <clip pos="4" side="tl" part="temps"/>
                  <clip pos="4" side="tl" part="pers"/>
                  <clip pos="4" side="tl" part="nbr"/>
                  <clip pos="4" side="tl" part="lemq"/>
                </lu>
              </chunk>
            </out>
            <call-macro n="f_bcond">
              <with-param pos="3"/>
              <with-param pos="4"/>
            </call-macro>
          </when>
          <otherwise>
            <out>
              <chunk name="inf_enc">
                <tags>
                  <tag>
                    <lit-tag v="SN"/>
                  </tag>
                  <tag>
                    <clip pos="4" side="tl" part="a_verb"/>
                  </tag>
                  <tag>
                    <clip pos="4" side="tl" part="temps"/>
                  </tag>
                  <tag>
                    <clip pos="4" side="tl" part="pers"/>
                  </tag>
                  <tag>
                    <clip pos="4" side="tl" part="nbr"/>
                  </tag>
                  <tag>
                    <var n="tipusverb"/>
                  </tag>
                </tags>
                <mlu>
                  <lu>
                    <get-case-from pos="1">
                      <clip pos="4" side="tl" part="lemh"/>
                    </get-case-from>
                    <clip pos="4" side="tl" part="a_verb"/>
                    <clip pos="4" side="tl" part="temps"/>
                    <clip pos="4" side="tl" part="pers"/>
                    <clip pos="4" side="tl" part="nbr"/>
                  </lu>
                  <lu>
                    <clip pos="3" side="tl" part="lem"/>
                    <lit-tag v="prn.enc"/>
                    <clip pos="3" side="tl" part="tipoenc_pro"/>
                    <clip pos="4" side="tl" part="lemq"/>
                  </lu>
                </mlu>
              </chunk>
            </out>
            <call-macro n="f_bcond">
              <with-param pos="3"/>
              <with-param pos="4"/>
            </call-macro>
          </otherwise>
        </choose>
        <out>
          <b pos="2"/>
          <chunk name="prn">
            <tags>
              <tag>
                <lit-tag v="SN"/>
              </tag>
              <tag>
                <clip pos="2" side="tl" part="tipus_prn"/>
              </tag>
              <tag>
                <clip pos="2" side="tl" part="gen"/>
              </tag>
              <tag>
                <clip pos="2" side="tl" part="nbr"/>
              </tag>
            </tags>
            <lu>
              <clip pos="2" side="tl" part="lem"/>
              <clip pos="2" side="tl" part="a_prn"/>
              <clip pos="2" side="tl" part="tipus_prn"/>
              <clip pos="2" side="tl" part="gen"/>
              <clip pos="2" side="tl" part="nbr"/>
            </lu>
          </chunk>
        </out>
        <let>
          <var n="caseFirstWord"/>
          <lit v="aa"/>
        </let>
      </action>
    </rule>
    <rule comment="ne rien prnpro prnpro inf">
      <pattern>
        <pattern-item n="ne"/>
        <pattern-item n="rien"/>
        <pattern-item n="prnpro"/>
        <pattern-item n="prnpro"/>
        <pattern-item n="inf"/>
      </pattern>
      <action>
        <call-macro n="f_concord1">
          <with-param pos="3"/>
        </call-macro>
        <call-macro n="f_concord1">
          <with-param pos="4"/>
        </call-macro>
        <call-macro n="tipus_verb">
          <with-param pos="5"/>
        </call-macro>
        <call-macro n="firstWord">
          <with-param pos="1"/>
        </call-macro>
        <out>
          <chunk name="ne" case="caseFirstWord">
            <tags>
              <tag>
                <clip pos="1" side="tl" part="a_adv"/>
              </tag>
              <tag>
                <clip pos="1" side="tl" part="neg"/>
              </tag>
            </tags>
            <lu>
              <clip pos="1" side="tl" part="lem"/>
              <clip pos="1" side="tl" part="a_adv"/>
            </lu>
          </chunk>
          <b pos="1"/>
        </out>
        <choose>
          <when>
            <test>
              <equal caseless="yes">
                <clip pos="3" side="sl" part="lem"/>
                <lit v="en"/>
              </equal>
            </test>
            <choose>
              <when>
                <test>
                  <equal caseless="yes">
                    <clip pos="4" side="sl" part="lem"/>
                    <lit v="y"/>
                  </equal>
                </test>
                <out>
                  <chunk name="inf">
                    <tags>
                      <tag>
                        <lit-tag v="SN"/>
                      </tag>
                      <tag>
                        <clip pos="5" side="tl" part="a_verb"/>
                      </tag>
                      <tag>
                        <clip pos="5" side="tl" part="temps"/>
                      </tag>
                      <tag>
                        <clip pos="5" side="tl" part="pers"/>
                      </tag>
                      <tag>
                        <clip pos="5" side="tl" part="nbr"/>
                      </tag>
                      <tag>
                        <var n="tipusverb"/>
                      </tag>
                    </tags>
                    <lu>
                      <get-case-from pos="3">
                        <clip pos="5" side="tl" part="lemh"/>
                      </get-case-from>
                      <clip pos="5" side="tl" part="a_verb"/>
                      <clip pos="5" side="tl" part="temps"/>
                      <clip pos="5" side="tl" part="pers"/>
                      <clip pos="5" side="tl" part="nbr"/>
                      <clip pos="5" side="tl" part="lemq"/>
                    </lu>
                  </chunk>
                </out>
              </when>
              <otherwise>
                <out>
                  <chunk name="inf_enc">
                    <tags>
                      <tag>
                        <lit-tag v="SN"/>
                      </tag>
                      <tag>
                        <clip pos="5" side="tl" part="a_verb"/>
                      </tag>
                      <tag>
                        <clip pos="5" side="tl" part="temps"/>
                      </tag>
                      <tag>
                        <clip pos="5" side="tl" part="pers"/>
                      </tag>
                      <tag>
                        <clip pos="5" side="tl" part="nbr"/>
                      </tag>
                      <tag>
                        <var n="tipusverb"/>
                      </tag>
                    </tags>
                    <mlu>
                      <lu>
                        <get-case-from pos="3">
                          <clip pos="5" side="tl" part="lemh"/>
                        </get-case-from>
                        <clip pos="5" side="tl" part="a_verb"/>
                        <clip pos="5" side="tl" part="temps"/>
                        <clip pos="5" side="tl" part="pers"/>
                        <clip pos="5" side="tl" part="nbr"/>
                      </lu>
                      <lu>
                        <clip pos="4" side="tl" part="lem"/>
                        <lit-tag v="prn.enc"/>
                        <clip pos="4" side="tl" part="tipoenc_pro"/>
                        <clip pos="5" side="tl" part="lemq"/>
                      </lu>
                    </mlu>
                  </chunk>
                </out>
              </otherwise>
            </choose>
          </when>
          <otherwise>
            <choose>
              <when>
                <test>
                  <or>
                    <equal caseless="yes">
                      <clip pos="4" side="sl" part="lem"/>
                      <lit v="en"/>
                    </equal>
                    <equal caseless="yes">
                      <clip pos="4" side="sl" part="lem"/>
                      <lit v="y"/>
                    </equal>
                  </or>
                </test>
                <out>
                  <chunk name="inf_enc">
                    <tags>
                      <tag>
                        <lit-tag v="SN"/>
                      </tag>
                      <tag>
                        <clip pos="5" side="tl" part="a_verb"/>
                      </tag>
                      <tag>
                        <clip pos="5" side="tl" part="temps"/>
                      </tag>
                      <tag>
                        <clip pos="5" side="tl" part="pers"/>
                      </tag>
                      <tag>
                        <clip pos="5" side="tl" part="nbr"/>
                      </tag>
                      <tag>
                        <var n="tipusverb"/>
                      </tag>
                    </tags>
                    <mlu>
                      <lu>
                        <get-case-from pos="3">
                          <clip pos="5" side="tl" part="lemh"/>
                        </get-case-from>
                        <clip pos="5" side="tl" part="a_verb"/>
                        <clip pos="5" side="tl" part="temps"/>
                        <clip pos="5" side="tl" part="pers"/>
                        <clip pos="5" side="tl" part="nbr"/>
                      </lu>
                      <lu>
                        <get-case-from pos="4">
                          <clip pos="3" side="tl" part="lem"/>
                        </get-case-from>
                        <lit-tag v="prn.enc"/>
                        <clip pos="3" side="tl" part="tipoenc_pro"/>
                        <clip pos="5" side="tl" part="lemq"/>
                      </lu>
                    </mlu>
                  </chunk>
                </out>
              </when>
              <otherwise>
                <out>
                  <chunk name="inf_enc_enc">
                    <tags>
                      <tag>
                        <lit-tag v="SN"/>
                      </tag>
                      <tag>
                        <clip pos="5" side="tl" part="a_verb"/>
                      </tag>
                      <tag>
                        <clip pos="5" side="tl" part="temps"/>
                      </tag>
                      <tag>
                        <clip pos="5" side="tl" part="pers"/>
                      </tag>
                      <tag>
                        <clip pos="5" side="tl" part="nbr"/>
                      </tag>
                      <tag>
                        <var n="tipusverb"/>
                      </tag>
                    </tags>
                    <mlu>
                      <lu>
                        <get-case-from pos="3">
                          <clip pos="5" side="tl" part="lemh"/>
                        </get-case-from>
                        <clip pos="5" side="tl" part="a_verb"/>
                        <clip pos="5" side="tl" part="temps"/>
                        <clip pos="5" side="tl" part="pers"/>
                        <clip pos="5" side="tl" part="nbr"/>
                      </lu>
                      <lu>
                        <get-case-from pos="3">
                          <clip pos="3" side="tl" part="lem"/>
                        </get-case-from>
                        <lit-tag v="prn.enc"/>
                        <clip pos="3" side="tl" part="tipoenc_pro"/>
                      </lu>
                      <lu>
                        <clip pos="4" side="tl" part="lem"/>
                        <lit-tag v="prn.enc"/>
                        <clip pos="4" side="tl" part="tipoenc_pro"/>
                        <clip pos="5" side="tl" part="lemq"/>
                      </lu>
                    </mlu>
                  </chunk>
                </out>
              </otherwise>
            </choose>
          </otherwise>
        </choose>
        <call-macro n="f_bcond">
          <with-param pos="2"/>
          <with-param pos="3"/>
        </call-macro>
        <call-macro n="f_bcond">
          <with-param pos="3"/>
          <with-param pos="4"/>
        </call-macro>
        <out>
          <b pos="4"/>
          <chunk name="prn">
            <tags>
              <tag>
                <lit-tag v="SN"/>
              </tag>
              <tag>
                <clip pos="2" side="tl" part="tipus_prn"/>
              </tag>
              <tag>
                <clip pos="2" side="tl" part="gen"/>
              </tag>
              <tag>
                <clip pos="2" side="tl" part="nbr"/>
              </tag>
            </tags>
            <lu>
              <clip pos="2" side="tl" part="lem"/>
              <clip pos="2" side="tl" part="a_prn"/>
              <clip pos="2" side="tl" part="tipus_prn"/>
              <clip pos="2" side="tl" part="gen"/>
              <clip pos="2" side="tl" part="nbr"/>
            </lu>
          </chunk>
        </out>
        <let>
          <var n="caseFirstWord"/>
          <lit v="aa"/>
        </let>
      </action>
    </rule>
    <rule comment="REGLA: continuer à inf -&gt; continuar ger">
      <pattern>
        <pattern-item n="continuer"/>
        <pattern-item n="aprep"/>
        <pattern-item n="inf"/>
      </pattern>
      <action>
        <call-macro n="tipus_verb">
          <with-param pos="3"/>
        </call-macro>
        <call-macro n="f_ppres">
          <with-param pos="1"/>
        </call-macro>
        <call-macro n="firstWord">
          <with-param pos="1"/>
        </call-macro>
        <out>
          <chunk name="continuar_ger" case="caseFirstWord">
            <tags>
              <tag>
                <lit-tag v="SV"/>
              </tag>
              <tag>
                <clip pos="1" side="tl" part="a_verb"/>
              </tag>
              <tag>
                <clip pos="1" side="tl" part="temps"/>
              </tag>
              <tag>
                <clip pos="1" side="tl" part="pers"/>
              </tag>
              <tag>
                <clip pos="1" side="tl" part="nbr"/>
              </tag>
              <tag>
                <var n="tipusverb"/>
              </tag>
            </tags>
            <lu>
              <clip pos="1" side="tl" part="lemh"/>
              <clip pos="1" side="tl" part="a_verb"/>
              <clip pos="1" side="tl" part="temps"/>
              <clip pos="1" side="tl" part="pers"/>
              <clip pos="1" side="tl" part="nbr" link-to="5"/>
              <clip pos="1" side="tl" part="lemq"/>
            </lu>
            <b pos="1"/>
            <lu>
              <clip pos="3" side="tl" part="lemh"/>
              <clip pos="3" side="tl" part="a_verb"/>
              <lit-tag v="ger"/>
              <clip pos="3" side="tl" part="lemq"/>
            </lu>
          </chunk>
        </out>
        <call-macro n="f_bcond">
          <with-param pos="2"/>
          <with-param pos="3"/>
        </call-macro>
      </action>
    </rule>
    <rule comment="REGLA: continuer-subj à inf -&gt; continuar ger">
      <pattern>
        <pattern-item n="continuer"/>
        <pattern-item n="prnperssubj"/>
        <pattern-item n="aprep"/>
        <pattern-item n="inf"/>
      </pattern>
      <action>
        <call-macro n="tipus_verb">
          <with-param pos="4"/>
        </call-macro>
        <call-macro n="f_ppres">
          <with-param pos="1"/>
        </call-macro>
        <call-macro n="firstWord">
          <with-param pos="1"/>
        </call-macro>
        <choose>
          <when>
            <test>
              <equal>
                <clip pos="2" side="sl" part="lem"/>
                <lit v="on"/>
              </equal>
            </test>
            <out>
              <chunk name="pro_continuar_ger" case="caseFirstWord">
                <tags>
                  <tag>
                    <lit-tag v="SV"/>
                  </tag>
                  <tag>
                    <clip pos="1" side="tl" part="a_verb"/>
                  </tag>
                  <tag>
                    <clip pos="1" side="tl" part="temps"/>
                  </tag>
                  <tag>
                    <clip pos="1" side="tl" part="pers"/>
                  </tag>
                  <tag>
                    <clip pos="1" side="tl" part="nbr"/>
                  </tag>
                  <tag>
                    <var n="tipusverb"/>
                  </tag>
                </tags>
                <lu>
                  <get-case-from pos="1">
                    <clip pos="2" side="tl" part="lem"/>
                  </get-case-from>
                  <lit-tag v="prn.obj"/>
                  <clip pos="2" side="tl" part="tipoenc_pro"/>
                </lu>
                <b/>
                <lu>
                  <get-case-from pos="2">
                    <clip pos="1" side="tl" part="lemh"/>
                  </get-case-from>
                  <clip pos="1" side="tl" part="a_verb"/>
                  <clip pos="1" side="tl" part="temps"/>
                  <clip pos="1" side="tl" part="pers"/>
                  <clip pos="1" side="tl" part="nbr" link-to="5"/>
                  <clip pos="1" side="tl" part="lemq"/>
                </lu>
                <b pos="2"/>
                <lu>
                  <clip pos="4" side="tl" part="lemh"/>
                  <clip pos="4" side="tl" part="a_verb"/>
                  <lit-tag v="ger"/>
                  <clip pos="4" side="tl" part="lemq"/>
                </lu>
              </chunk>
            </out>
          </when>
          <otherwise>
            <out>
              <chunk name="continuar_ger" case="caseFirstWord">
                <tags>
                  <tag>
                    <lit-tag v="SV"/>
                  </tag>
                  <tag>
                    <clip pos="1" side="tl" part="a_verb"/>
                  </tag>
                  <tag>
                    <clip pos="1" side="tl" part="temps"/>
                  </tag>
                  <tag>
                    <clip pos="1" side="tl" part="pers"/>
                  </tag>
                  <tag>
                    <clip pos="1" side="tl" part="nbr"/>
                  </tag>
                  <tag>
                    <var n="tipusverb"/>
                  </tag>
                </tags>
                <lu>
                  <clip pos="1" side="tl" part="lemh"/>
                  <clip pos="1" side="tl" part="a_verb"/>
                  <clip pos="1" side="tl" part="temps"/>
                  <clip pos="1" side="tl" part="pers"/>
                  <clip pos="1" side="tl" part="nbr" link-to="5"/>
                  <clip pos="1" side="tl" part="lemq"/>
                </lu>
                <b pos="2"/>
                <lu>
                  <clip pos="4" side="tl" part="lemh"/>
                  <clip pos="4" side="tl" part="a_verb"/>
                  <lit-tag v="ger"/>
                  <clip pos="4" side="tl" part="lemq"/>
                </lu>
              </chunk>
            </out>
          </otherwise>
        </choose>
        <call-macro n="f_bcond">
          <with-param pos="3"/>
          <with-param pos="4"/>
        </call-macro>
      </action>
    </rule>
    <rule comment="continuer-subj à prnpro inf -&gt; continuar ger-prnenc">
      <pattern>
        <pattern-item n="continuer"/>
        <pattern-item n="prnperssubj"/>
        <pattern-item n="aprep"/>
        <pattern-item n="prnpro"/>
        <pattern-item n="inf"/>
      </pattern>
      <action>
        <call-macro n="firstWord">
          <with-param pos="1"/>
        </call-macro>
        <call-macro n="f_concord1">
          <with-param pos="4"/>
        </call-macro>
        <call-macro n="tipus_verb">
          <with-param pos="5"/>
        </call-macro>
        <call-macro n="f_ppres">
          <with-param pos="1"/>
        </call-macro>
        <choose>
          <when>
            <test>
              <equal>
                <clip pos="2" side="sl" part="lem"/>
                <lit v="on"/>
              </equal>
            </test>
            <choose>
              <when>
                <test>
                  <or>
                    <equal caseless="yes">
                      <clip pos="4" side="sl" part="lem"/>
                      <lit v="en"/>
                    </equal>
                    <equal caseless="yes">
                      <clip pos="4" side="sl" part="lem"/>
                      <lit v="y"/>
                    </equal>
                  </or>
                </test>
                <out>
                  <chunk name="pro_continuar_ger" case="caseFirstWord">
                    <tags>
                      <tag>
                        <lit-tag v="SV"/>
                      </tag>
                      <tag>
                        <clip pos="1" side="tl" part="a_verb"/>
                      </tag>
                      <tag>
                        <clip pos="1" side="tl" part="temps"/>
                      </tag>
                      <tag>
                        <clip pos="1" side="tl" part="pers"/>
                      </tag>
                      <tag>
                        <clip pos="1" side="tl" part="nbr"/>
                      </tag>
                      <tag>
                        <var n="tipusverb"/>
                      </tag>
                    </tags>
                    <lu>
                      <get-case-from pos="1">
                        <clip pos="2" side="tl" part="lem"/>
                      </get-case-from>
                      <lit-tag v="prn.obj"/>
                      <clip pos="2" side="tl" part="tipoenc_pro"/>
                    </lu>
                    <b/>
                    <lu>
                      <get-case-from pos="2">
                        <clip pos="1" side="tl" part="lemh"/>
                      </get-case-from>
                      <clip pos="1" side="tl" part="a_verb"/>
                      <clip pos="1" side="tl" part="temps"/>
                      <clip pos="1" side="tl" part="pers"/>
                      <clip pos="1" side="tl" part="nbr" link-to="5"/>
                      <clip pos="1" side="tl" part="lemq"/>
                    </lu>
                    <b pos="2"/>
                    <lu>
                      <clip pos="5" side="tl" part="lemh"/>
                      <clip pos="5" side="tl" part="a_verb"/>
                      <lit-tag v="ger"/>
                      <clip pos="5" side="tl" part="lemq"/>
                    </lu>
                  </chunk>
                </out>
                <call-macro n="f_bcond">
                  <with-param pos="3"/>
                  <with-param pos="4"/>
                </call-macro>
                <call-macro n="f_bcond">
                  <with-param pos="4"/>
                  <with-param pos="5"/>
                </call-macro>
              </when>
              <otherwise>
                <out>
                  <chunk name="pro_continuar_ger_enc" case="caseFirstWord">
                    <tags>
                      <tag>
                        <lit-tag v="SV"/>
                      </tag>
                      <tag>
                        <clip pos="1" side="tl" part="a_verb"/>
                      </tag>
                      <tag>
                        <clip pos="1" side="tl" part="temps"/>
                      </tag>
                      <tag>
                        <clip pos="1" side="tl" part="pers"/>
                      </tag>
                      <tag>
                        <clip pos="1" side="tl" part="nbr"/>
                      </tag>
                      <tag>
                        <var n="tipusverb"/>
                      </tag>
                    </tags>
                    <lu>
                      <get-case-from pos="1">
                        <clip pos="2" side="tl" part="lem"/>
                      </get-case-from>
                      <lit-tag v="prn.obj"/>
                      <clip pos="2" side="tl" part="tipoenc_pro"/>
                    </lu>
                    <b/>
                    <lu>
                      <get-case-from pos="1">
                        <clip pos="1" side="tl" part="lemh"/>
                      </get-case-from>
                      <clip pos="1" side="tl" part="a_verb"/>
                      <clip pos="1" side="tl" part="temps"/>
                      <clip pos="1" side="tl" part="pers"/>
                      <clip pos="1" side="tl" part="nbr" link-to="5"/>
                      <clip pos="1" side="tl" part="lemq"/>
                    </lu>
                    <b pos="2"/>
                    <mlu>
                      <lu>
                        <clip pos="5" side="tl" part="lemh"/>
                        <clip pos="5" side="tl" part="a_verb"/>
                        <lit-tag v="ger"/>
                      </lu>
                      <lu>
                        <clip pos="4" side="tl" part="lem"/>
                        <lit-tag v="prn.enc"/>
                        <clip pos="4" side="tl" part="tipoenc_pro"/>
                        <clip pos="5" side="tl" part="lemq"/>
                      </lu>
                    </mlu>
                  </chunk>
                </out>
                <call-macro n="f_bcond">
                  <with-param pos="3"/>
                  <with-param pos="4"/>
                </call-macro>
                <call-macro n="f_bcond">
                  <with-param pos="4"/>
                  <with-param pos="5"/>
                </call-macro>
              </otherwise>
            </choose>
          </when>
          <otherwise>
            <choose>
              <when>
                <test>
                  <or>
                    <equal caseless="yes">
                      <clip pos="4" side="sl" part="lem"/>
                      <lit v="en"/>
                    </equal>
                    <equal caseless="yes">
                      <clip pos="4" side="sl" part="lem"/>
                      <lit v="y"/>
                    </equal>
                  </or>
                </test>
                <out>
                  <chunk name="continuar_ger" case="caseFirstWord">
                    <tags>
                      <tag>
                        <lit-tag v="SV"/>
                      </tag>
                      <tag>
                        <clip pos="1" side="tl" part="a_verb"/>
                      </tag>
                      <tag>
                        <clip pos="1" side="tl" part="temps"/>
                      </tag>
                      <tag>
                        <clip pos="1" side="tl" part="pers"/>
                      </tag>
                      <tag>
                        <clip pos="1" side="tl" part="nbr"/>
                      </tag>
                      <tag>
                        <var n="tipusverb"/>
                      </tag>
                    </tags>
                    <lu>
                      <clip pos="1" side="tl" part="lemh"/>
                      <clip pos="1" side="tl" part="a_verb"/>
                      <clip pos="1" side="tl" part="temps"/>
                      <clip pos="1" side="tl" part="pers"/>
                      <clip pos="1" side="tl" part="nbr" link-to="5"/>
                      <clip pos="1" side="tl" part="lemq"/>
                    </lu>
                    <b pos="2"/>
                    <lu>
                      <clip pos="5" side="tl" part="lemh"/>
                      <clip pos="5" side="tl" part="a_verb"/>
                      <lit-tag v="ger"/>
                      <clip pos="5" side="tl" part="lemq"/>
                    </lu>
                  </chunk>
                </out>
                <call-macro n="f_bcond">
                  <with-param pos="3"/>
                  <with-param pos="4"/>
                </call-macro>
                <call-macro n="f_bcond">
                  <with-param pos="4"/>
                  <with-param pos="5"/>
                </call-macro>
              </when>
              <otherwise>
                <out>
                  <chunk name="continuar_ger_enc" case="caseFirstWord">
                    <tags>
                      <tag>
                        <lit-tag v="SV"/>
                      </tag>
                      <tag>
                        <clip pos="1" side="tl" part="a_verb"/>
                      </tag>
                      <tag>
                        <clip pos="1" side="tl" part="temps"/>
                      </tag>
                      <tag>
                        <clip pos="1" side="tl" part="pers"/>
                      </tag>
                      <tag>
                        <clip pos="1" side="tl" part="nbr"/>
                      </tag>
                      <tag>
                        <var n="tipusverb"/>
                      </tag>
                    </tags>
                    <lu>
                      <clip pos="1" side="tl" part="lemh"/>
                      <clip pos="1" side="tl" part="a_verb"/>
                      <clip pos="1" side="tl" part="temps"/>
                      <clip pos="1" side="tl" part="pers"/>
                      <clip pos="1" side="tl" part="nbr" link-to="5"/>
                      <clip pos="1" side="tl" part="lemq"/>
                    </lu>
                    <b pos="2"/>
                    <mlu>
                      <lu>
                        <clip pos="5" side="tl" part="lemh"/>
                        <clip pos="5" side="tl" part="a_verb"/>
                        <lit-tag v="ger"/>
                      </lu>
                      <lu>
                        <clip pos="4" side="tl" part="lem"/>
                        <lit-tag v="prn.enc"/>
                        <clip pos="4" side="tl" part="tipoenc_pro"/>
                        <clip pos="5" side="tl" part="lemq"/>
                      </lu>
                    </mlu>
                  </chunk>
                </out>
                <call-macro n="f_bcond">
                  <with-param pos="3"/>
                  <with-param pos="4"/>
                </call-macro>
                <call-macro n="f_bcond">
                  <with-param pos="4"/>
                  <with-param pos="5"/>
                </call-macro>
              </otherwise>
            </choose>
          </otherwise>
        </choose>
        <let>
          <var n="caseFirstWord"/>
          <lit v="aa"/>
        </let>
      </action>
    </rule>
    <rule comment="continuer à prnpro prnpro inf">
      <pattern>
        <pattern-item n="continuer"/>
        <pattern-item n="aprep"/>
        <pattern-item n="prnpro"/>
        <pattern-item n="prnpro"/>
        <pattern-item n="inf"/>
      </pattern>
      <action>
        <call-macro n="f_concord1">
          <with-param pos="3"/>
        </call-macro>
        <call-macro n="f_concord1">
          <with-param pos="4"/>
        </call-macro>
        <call-macro n="tipus_verb">
          <with-param pos="5"/>
        </call-macro>
        <call-macro n="f_ppres">
          <with-param pos="1"/>
        </call-macro>
        <call-macro n="firstWord">
          <with-param pos="1"/>
        </call-macro>
        <choose>
          <when>
            <test>
              <equal caseless="yes">
                <clip pos="3" side="sl" part="lem"/>
                <lit v="en"/>
              </equal>
            </test>
            <choose>
              <when>
                <test>
                  <equal caseless="yes">
                    <clip pos="4" side="sl" part="lem"/>
                    <lit v="y"/>
                  </equal>
                </test>
                <out>
                  <chunk name="continuar_ger" case="caseFirstWord">
                    <tags>
                      <tag>
                        <lit-tag v="SV"/>
                      </tag>
                      <tag>
                        <clip pos="1" side="tl" part="a_verb"/>
                      </tag>
                      <tag>
                        <clip pos="1" side="tl" part="temps"/>
                      </tag>
                      <tag>
                        <clip pos="1" side="tl" part="pers"/>
                      </tag>
                      <tag>
                        <clip pos="1" side="tl" part="nbr"/>
                      </tag>
                      <tag>
                        <var n="tipusverb"/>
                      </tag>
                    </tags>
                    <lu>
                      <clip pos="1" side="tl" part="lemh"/>
                      <clip pos="1" side="tl" part="a_verb"/>
                      <clip pos="1" side="tl" part="temps"/>
                      <clip pos="1" side="tl" part="pers"/>
                      <clip pos="1" side="tl" part="nbr" link-to="5"/>
                      <clip pos="1" side="tl" part="lemq"/>
                    </lu>
                    <b pos="1"/>
                    <lu>
                      <clip pos="5" side="tl" part="lemh"/>
                      <clip pos="5" side="tl" part="a_verb"/>
                      <lit-tag v="ger"/>
                      <clip pos="5" side="tl" part="lemq"/>
                    </lu>
                  </chunk>
                </out>
                <call-macro n="f_bcond">
                  <with-param pos="2"/>
                  <with-param pos="3"/>
                </call-macro>
                <call-macro n="f_bcond">
                  <with-param pos="3"/>
                  <with-param pos="4"/>
                </call-macro>
                <call-macro n="f_bcond">
                  <with-param pos="4"/>
                  <with-param pos="5"/>
                </call-macro>
              </when>
              <otherwise>
                <out>
                  <chunk name="continuar_ger_enc" case="caseFirstWord">
                    <tags>
                      <tag>
                        <lit-tag v="SV"/>
                      </tag>
                      <tag>
                        <clip pos="1" side="tl" part="a_verb"/>
                      </tag>
                      <tag>
                        <clip pos="1" side="tl" part="temps"/>
                      </tag>
                      <tag>
                        <clip pos="1" side="tl" part="pers"/>
                      </tag>
                      <tag>
                        <clip pos="1" side="tl" part="nbr"/>
                      </tag>
                      <tag>
                        <var n="tipusverb"/>
                      </tag>
                    </tags>
                    <lu>
                      <clip pos="1" side="tl" part="lemh"/>
                      <clip pos="1" side="tl" part="a_verb"/>
                      <clip pos="1" side="tl" part="temps"/>
                      <clip pos="1" side="tl" part="pers"/>
                      <clip pos="1" side="tl" part="nbr" link-to="5"/>
                      <clip pos="1" side="tl" part="lemq"/>
                    </lu>
                    <b pos="1"/>
                    <mlu>
                      <lu>
                        <clip pos="5" side="tl" part="lemh"/>
                        <clip pos="5" side="tl" part="a_verb"/>
                        <clip pos="5" side="tl" part="temps"/>
                        <lit-tag v="ger"/>
                      </lu>
                      <lu>
                        <clip pos="4" side="tl" part="lem"/>
                        <lit-tag v="prn.enc"/>
                        <clip pos="4" side="tl" part="tipoenc_pro"/>
                        <clip pos="5" side="tl" part="lemq"/>
                      </lu>
                    </mlu>
                  </chunk>
                </out>
                <call-macro n="f_bcond">
                  <with-param pos="3"/>
                  <with-param pos="4"/>
                </call-macro>
                <call-macro n="f_bcond">
                  <with-param pos="4"/>
                  <with-param pos="5"/>
                </call-macro>
              </otherwise>
            </choose>
          </when>
          <otherwise>
            <choose>
              <when>
                <test>
                  <or>
                    <equal caseless="yes">
                      <clip pos="4" side="sl" part="lem"/>
                      <lit v="en"/>
                    </equal>
                    <equal caseless="yes">
                      <clip pos="4" side="sl" part="lem"/>
                      <lit v="y"/>
                    </equal>
                  </or>
                </test>
                <out>
                  <chunk name="continuar_ger_enc" case="caseFirstWord">
                    <tags>
                      <tag>
                        <lit-tag v="SV"/>
                      </tag>
                      <tag>
                        <clip pos="1" side="tl" part="a_verb"/>
                      </tag>
                      <tag>
                        <clip pos="1" side="tl" part="temps"/>
                      </tag>
                      <tag>
                        <clip pos="1" side="tl" part="pers"/>
                      </tag>
                      <tag>
                        <clip pos="1" side="tl" part="nbr"/>
                      </tag>
                      <tag>
                        <var n="tipusverb"/>
                      </tag>
                    </tags>
                    <lu>
                      <clip pos="1" side="tl" part="lemh"/>
                      <clip pos="1" side="tl" part="a_verb"/>
                      <clip pos="1" side="tl" part="temps"/>
                      <clip pos="1" side="tl" part="pers"/>
                      <clip pos="1" side="tl" part="nbr" link-to="5"/>
                      <clip pos="1" side="tl" part="lemq"/>
                    </lu>
                    <b pos="1"/>
                    <mlu>
                      <lu>
                        <clip pos="5" side="tl" part="lemh"/>
                        <clip pos="5" side="tl" part="a_verb"/>
                        <lit-tag v="ger"/>
                      </lu>
                      <lu>
                        <clip pos="3" side="tl" part="lem"/>
                        <lit-tag v="prn.enc"/>
                        <clip pos="3" side="tl" part="tipoenc_pro"/>
                        <clip pos="5" side="tl" part="lemq"/>
                      </lu>
                    </mlu>
                  </chunk>
                </out>
                <call-macro n="f_bcond">
                  <with-param pos="2"/>
                  <with-param pos="3"/>
                </call-macro>
                <call-macro n="f_bcond">
                  <with-param pos="3"/>
                  <with-param pos="4"/>
                </call-macro>
                <call-macro n="f_bcond">
                  <with-param pos="4"/>
                  <with-param pos="5"/>
                </call-macro>
              </when>
              <otherwise>
                <out>
                  <chunk name="continuar_ger_enc_enc" case="caseFirstWord">
                    <tags>
                      <tag>
                        <lit-tag v="SV"/>
                      </tag>
                      <tag>
                        <clip pos="1" side="tl" part="a_verb"/>
                      </tag>
                      <tag>
                        <clip pos="1" side="tl" part="temps"/>
                      </tag>
                      <tag>
                        <clip pos="1" side="tl" part="pers"/>
                      </tag>
                      <tag>
                        <clip pos="1" side="tl" part="nbr"/>
                      </tag>
                      <tag>
                        <var n="tipusverb"/>
                      </tag>
                    </tags>
                    <lu>
                      <clip pos="1" side="tl" part="lemh"/>
                      <clip pos="1" side="tl" part="a_verb"/>
                      <clip pos="1" side="tl" part="temps"/>
                      <clip pos="1" side="tl" part="pers"/>
                      <clip pos="1" side="tl" part="nbr" link-to="5"/>
                      <clip pos="1" side="tl" part="lemq"/>
                    </lu>
                    <b pos="1"/>
                    <mlu>
                      <lu>
                        <clip pos="5" side="tl" part="lemh"/>
                        <clip pos="5" side="tl" part="a_verb"/>
                        <clip pos="5" side="tl" part="temps"/>
                        <clip pos="5" side="tl" part="pers"/>
                        <clip pos="5" side="tl" part="nbr"/>
                      </lu>
                      <lu>
                        <clip pos="3" side="tl" part="lem"/>
                        <lit-tag v="prn.enc"/>
                        <clip pos="3" side="tl" part="tipoenc_pro"/>
                      </lu>
                      <lu>
                        <clip pos="4" side="tl" part="lem"/>
                        <lit-tag v="prn.enc"/>
                        <clip pos="4" side="tl" part="tipoenc_pro"/>
                        <clip pos="5" side="tl" part="lemq"/>
                      </lu>
                    </mlu>
                  </chunk>
                </out>
                <call-macro n="f_bcond">
                  <with-param pos="2"/>
                  <with-param pos="3"/>
                </call-macro>
                <call-macro n="f_bcond">
                  <with-param pos="3"/>
                  <with-param pos="4"/>
                </call-macro>
                <call-macro n="f_bcond">
                  <with-param pos="4"/>
                  <with-param pos="5"/>
                </call-macro>
              </otherwise>
            </choose>
          </otherwise>
        </choose>
        <let>
          <var n="caseFirstWord"/>
          <lit v="aa"/>
        </let>
      </action>
    </rule>
    <rule comment="continuer-subj à prnpro prnpro inf">
      <!--tpc es té en compte "on"-->
      <pattern>
        <pattern-item n="continuer"/>
        <pattern-item n="prnperssubj"/>
        <pattern-item n="aprep"/>
        <pattern-item n="prnpro"/>
        <pattern-item n="prnpro"/>
        <pattern-item n="inf"/>
      </pattern>
      <action>
        <call-macro n="firstWord">
          <with-param pos="1"/>
        </call-macro>
        <call-macro n="f_concord1">
          <with-param pos="4"/>
        </call-macro>
        <call-macro n="f_concord1">
          <with-param pos="5"/>
        </call-macro>
        <call-macro n="tipus_verb">
          <with-param pos="6"/>
        </call-macro>
        <call-macro n="f_ppres">
          <with-param pos="1"/>
        </call-macro>
        <choose>
          <when>
            <test>
              <equal caseless="yes">
                <clip pos="4" side="sl" part="lem"/>
                <lit v="en"/>
              </equal>
            </test>
            <choose>
              <when>
                <test>
                  <equal caseless="yes">
                    <clip pos="5" side="sl" part="lem"/>
                    <lit v="y"/>
                  </equal>
                </test>
                <out>
                  <chunk name="continuar_ger">
                    <tags>
                      <tag>
                        <lit-tag v="SV"/>
                      </tag>
                      <tag>
                        <clip pos="1" side="tl" part="a_verb"/>
                      </tag>
                      <tag>
                        <clip pos="1" side="tl" part="temps"/>
                      </tag>
                      <tag>
                        <clip pos="1" side="tl" part="pers"/>
                      </tag>
                      <tag>
                        <clip pos="1" side="tl" part="nbr"/>
                      </tag>
                      <tag>
                        <var n="tipusverb"/>
                      </tag>
                    </tags>
                    <lu>
                      <clip pos="1" side="tl" part="lemh"/>
                      <clip pos="1" side="tl" part="a_verb"/>
                      <clip pos="1" side="tl" part="temps"/>
                      <clip pos="1" side="tl" part="pers"/>
                      <clip pos="1" side="tl" part="nbr" link-to="6"/>
                      <clip pos="1" side="tl" part="lemq"/>
                    </lu>
                    <b pos="1"/>
                    <lu>
                      <clip pos="6" side="tl" part="lemh"/>
                      <clip pos="6" side="tl" part="a_verb"/>
                      <lit-tag v="ger"/>
                      <clip pos="6" side="tl" part="lemq"/>
                    </lu>
                  </chunk>
                </out>
                <call-macro n="f_bcond">
                  <with-param pos="3"/>
                  <with-param pos="4"/>
                </call-macro>
                <call-macro n="f_bcond">
                  <with-param pos="4"/>
                  <with-param pos="5"/>
                </call-macro>
                <call-macro n="f_bcond">
                  <with-param pos="5"/>
                  <with-param pos="6"/>
                </call-macro>
              </when>
              <otherwise>
                <out>
                  <chunk name="continuar_ger_enc" case="caseFirstWord">
                    <tags>
                      <tag>
                        <lit-tag v="SV"/>
                      </tag>
                      <tag>
                        <clip pos="1" side="tl" part="a_verb"/>
                      </tag>
                      <tag>
                        <clip pos="1" side="tl" part="temps"/>
                      </tag>
                      <tag>
                        <clip pos="1" side="tl" part="pers"/>
                      </tag>
                      <tag>
                        <clip pos="1" side="tl" part="nbr"/>
                      </tag>
                      <tag>
                        <var n="tipusverb"/>
                      </tag>
                    </tags>
                    <lu>
                      <clip pos="1" side="tl" part="lemh"/>
                      <clip pos="1" side="tl" part="a_verb"/>
                      <clip pos="1" side="tl" part="temps"/>
                      <clip pos="1" side="tl" part="pers"/>
                      <clip pos="1" side="tl" part="nbr" link-to="5"/>
                      <clip pos="1" side="tl" part="lemq"/>
                    </lu>
                    <b pos="2"/>
                    <mlu>
                      <lu>
                        <clip pos="6" side="tl" part="lemh"/>
                        <clip pos="6" side="tl" part="a_verb"/>
                        <clip pos="6" side="tl" part="temps"/>
                        <lit-tag v="ger"/>
                      </lu>
                      <lu>
                        <clip pos="5" side="tl" part="lem"/>
                        <lit-tag v="prn.enc"/>
                        <clip pos="5" side="tl" part="tipoenc_pro"/>
                        <clip pos="6" side="tl" part="lemq"/>
                      </lu>
                    </mlu>
                  </chunk>
                </out>
                <call-macro n="f_bcond">
                  <with-param pos="4"/>
                  <with-param pos="5"/>
                </call-macro>
                <call-macro n="f_bcond">
                  <with-param pos="5"/>
                  <with-param pos="6"/>
                </call-macro>
              </otherwise>
            </choose>
          </when>
          <otherwise>
            <choose>
              <when>
                <test>
                  <or>
                    <equal caseless="yes">
                      <clip pos="5" side="sl" part="lem"/>
                      <lit v="en"/>
                    </equal>
                    <equal caseless="yes">
                      <clip pos="5" side="sl" part="lem"/>
                      <lit v="y"/>
                    </equal>
                  </or>
                </test>
                <out>
                  <chunk name="continuar_ger_enc" case="caseFirstWord">
                    <tags>
                      <tag>
                        <lit-tag v="SV"/>
                      </tag>
                      <tag>
                        <clip pos="1" side="tl" part="a_verb"/>
                      </tag>
                      <tag>
                        <clip pos="1" side="tl" part="temps"/>
                      </tag>
                      <tag>
                        <clip pos="1" side="tl" part="pers"/>
                      </tag>
                      <tag>
                        <clip pos="1" side="tl" part="nbr"/>
                      </tag>
                      <tag>
                        <var n="tipusverb"/>
                      </tag>
                    </tags>
                    <lu>
                      <clip pos="1" side="tl" part="lemh"/>
                      <clip pos="1" side="tl" part="a_verb"/>
                      <clip pos="1" side="tl" part="temps"/>
                      <clip pos="1" side="tl" part="pers"/>
                      <clip pos="1" side="tl" part="nbr" link-to="5"/>
                      <clip pos="1" side="tl" part="lemq"/>
                    </lu>
                    <b pos="2"/>
                    <mlu>
                      <lu>
                        <clip pos="6" side="tl" part="lemh"/>
                        <clip pos="6" side="tl" part="a_verb"/>
                        <lit-tag v="ger"/>
                      </lu>
                      <lu>
                        <clip pos="4" side="tl" part="lem"/>
                        <lit-tag v="prn.enc"/>
                        <clip pos="4" side="tl" part="tipoenc_pro"/>
                        <clip pos="6" side="tl" part="lemq"/>
                      </lu>
                    </mlu>
                  </chunk>
                </out>
                <call-macro n="f_bcond">
                  <with-param pos="3"/>
                  <with-param pos="4"/>
                </call-macro>
                <call-macro n="f_bcond">
                  <with-param pos="4"/>
                  <with-param pos="5"/>
                </call-macro>
                <call-macro n="f_bcond">
                  <with-param pos="5"/>
                  <with-param pos="6"/>
                </call-macro>
              </when>
              <otherwise>
                <out>
                  <chunk name="continuar_ger_enc_enc" case="caseFirstWord">
                    <tags>
                      <tag>
                        <lit-tag v="SV"/>
                      </tag>
                      <tag>
                        <clip pos="1" side="tl" part="a_verb"/>
                      </tag>
                      <tag>
                        <clip pos="1" side="tl" part="temps"/>
                      </tag>
                      <tag>
                        <clip pos="1" side="tl" part="pers"/>
                      </tag>
                      <tag>
                        <clip pos="1" side="tl" part="nbr"/>
                      </tag>
                      <tag>
                        <var n="tipusverb"/>
                      </tag>
                    </tags>
                    <lu>
                      <clip pos="1" side="tl" part="lemh"/>
                      <clip pos="1" side="tl" part="a_verb"/>
                      <clip pos="1" side="tl" part="temps"/>
                      <clip pos="1" side="tl" part="pers"/>
                      <clip pos="1" side="tl" part="nbr" link-to="5"/>
                      <clip pos="1" side="tl" part="lemq"/>
                    </lu>
                    <b pos="2"/>
                    <mlu>
                      <lu>
                        <clip pos="6" side="tl" part="lemh"/>
                        <clip pos="6" side="tl" part="a_verb"/>
                        <clip pos="6" side="tl" part="temps"/>
                        <clip pos="6" side="tl" part="pers"/>
                        <clip pos="6" side="tl" part="nbr"/>
                      </lu>
                      <lu>
                        <clip pos="4" side="tl" part="lem"/>
                        <lit-tag v="prn.enc"/>
                        <clip pos="4" side="tl" part="tipoenc_pro"/>
                      </lu>
                      <lu>
                        <clip pos="5" side="tl" part="lem"/>
                        <lit-tag v="prn.enc"/>
                        <clip pos="5" side="tl" part="tipoenc_pro"/>
                        <clip pos="6" side="tl" part="lemq"/>
                      </lu>
                    </mlu>
                  </chunk>
                </out>
                <call-macro n="f_bcond">
                  <with-param pos="3"/>
                  <with-param pos="4"/>
                </call-macro>
                <call-macro n="f_bcond">
                  <with-param pos="4"/>
                  <with-param pos="5"/>
                </call-macro>
                <call-macro n="f_bcond">
                  <with-param pos="5"/>
                  <with-param pos="6"/>
                </call-macro>
              </otherwise>
            </choose>
          </otherwise>
        </choose>
        <let>
          <var n="caseFirstWord"/>
          <lit v="aa"/>
        </let>
      </action>
    </rule>
    <rule comment="prnpro ger">
      <pattern>
        <pattern-item n="prnpro"/>
        <pattern-item n="ger"/>
      </pattern>
      <action>
        <call-macro n="f_concord1">
          <with-param pos="1"/>
        </call-macro>
        <call-macro n="tipus_verb">
          <with-param pos="2"/>
        </call-macro>
        <call-macro n="firstWord">
          <with-param pos="1"/>
        </call-macro>
        <choose>
          <when>
            <test>
              <or>
                <equal caseless="yes">
                  <clip pos="1" side="sl" part="lem"/>
                  <lit v="en"/>
                </equal>
                <equal caseless="yes">
                  <clip pos="1" side="sl" part="lem"/>
                  <lit v="y"/>
                </equal>
              </or>
            </test>
            <out>
              <chunk name="ger" case="caseFirstWord">
                <tags>
                  <tag>
                    <lit-tag v="ger"/>
                  </tag>
                  <tag>
                    <clip pos="2" side="tl" part="a_verb"/>
                  </tag>
                  <tag>
                    <clip pos="2" side="tl" part="temps"/>
                  </tag>
                  <tag>
                    <clip pos="2" side="tl" part="pers"/>
                  </tag>
                  <tag>
                    <clip pos="2" side="tl" part="nbr"/>
                  </tag>
                  <tag>
                    <var n="tipusverb"/>
                  </tag>
                </tags>
                <lu>
                  <get-case-from pos="1">
                    <clip pos="2" side="tl" part="lemh"/>
                  </get-case-from>
                  <clip pos="2" side="tl" part="a_verb"/>
                  <clip pos="2" side="tl" part="temps"/>
                  <clip pos="2" side="tl" part="pers"/>
                  <clip pos="2" side="tl" part="nbr"/>
                  <clip pos="2" side="tl" part="lemq"/>
                </lu>
              </chunk>
            </out>
            <call-macro n="f_bcond">
              <with-param pos="1"/>
              <with-param pos="2"/>
            </call-macro>
          </when>
          <otherwise>
            <out>
              <chunk name="ger_enc" case="caseFirstWord">
                <tags>
                  <tag>
                    <lit-tag v="SN"/>
                  </tag>
                  <tag>
                    <clip pos="2" side="tl" part="a_verb"/>
                  </tag>
                  <tag>
                    <clip pos="2" side="tl" part="temps"/>
                  </tag>
                  <tag>
                    <clip pos="2" side="tl" part="pers"/>
                  </tag>
                  <tag>
                    <clip pos="2" side="tl" part="nbr"/>
                  </tag>
                  <tag>
                    <var n="tipusverb"/>
                  </tag>
                </tags>
                <mlu>
                  <lu>
                    <get-case-from pos="1">
                      <clip pos="2" side="tl" part="lemh"/>
                    </get-case-from>
                    <clip pos="2" side="tl" part="a_verb"/>
                    <clip pos="2" side="tl" part="temps"/>
                    <clip pos="2" side="tl" part="pers"/>
                    <clip pos="2" side="tl" part="nbr"/>
                  </lu>
                  <lu>
                    <get-case-from pos="2">
                      <clip pos="1" side="tl" part="lem"/>
                    </get-case-from>
                    <lit-tag v="prn.enc"/>
                    <clip pos="1" side="tl" part="tipoenc_pro"/>
                    <clip pos="2" side="tl" part="lemq"/>
                  </lu>
                </mlu>
              </chunk>
            </out>
            <call-macro n="f_bcond">
              <with-param pos="1"/>
              <with-param pos="2"/>
            </call-macro>
          </otherwise>
        </choose>
        <let>
          <var n="caseFirstWord"/>
          <lit v="aa"/>
        </let>
      </action>
    </rule>
    <rule comment="prnpro prnpro ger">
      <pattern>
        <pattern-item n="prnpro"/>
        <pattern-item n="prnpro"/>
        <pattern-item n="ger"/>
      </pattern>
      <action>
        <call-macro n="f_concord1">
          <with-param pos="1"/>
        </call-macro>
        <call-macro n="f_concord1">
          <with-param pos="2"/>
        </call-macro>
        <call-macro n="tipus_verb">
          <with-param pos="3"/>
        </call-macro>
        <call-macro n="firstWord">
          <with-param pos="1"/>
        </call-macro>
        <choose>
          <when>
            <test>
              <equal caseless="yes">
                <clip pos="1" side="sl" part="lem"/>
                <lit v="en"/>
              </equal>
            </test>
            <choose>
              <when>
                <test>
                  <equal caseless="yes">
                    <clip pos="2" side="sl" part="lem"/>
                    <lit v="y"/>
                  </equal>
                </test>
                <out>
                  <chunk name="ger" case="caseFirstWord">
                    <tags>
                      <tag>
                        <lit-tag v="ger"/>
                      </tag>
                      <tag>
                        <clip pos="3" side="tl" part="a_verb"/>
                      </tag>
                      <tag>
                        <clip pos="3" side="tl" part="temps"/>
                      </tag>
                      <tag>
                        <clip pos="3" side="tl" part="pers"/>
                      </tag>
                      <tag>
                        <clip pos="3" side="tl" part="nbr"/>
                      </tag>
                      <tag>
                        <var n="tipusverb"/>
                      </tag>
                    </tags>
                    <lu>
                      <get-case-from pos="1">
                        <clip pos="3" side="tl" part="lemh"/>
                      </get-case-from>
                      <clip pos="3" side="tl" part="a_verb"/>
                      <clip pos="3" side="tl" part="temps"/>
                      <clip pos="3" side="tl" part="pers"/>
                      <clip pos="3" side="tl" part="nbr"/>
                      <clip pos="3" side="tl" part="lemq"/>
                    </lu>
                  </chunk>
                </out>
                <call-macro n="f_bcond">
                  <with-param pos="1"/>
                  <with-param pos="2"/>
                </call-macro>
                <call-macro n="f_bcond">
                  <with-param pos="2"/>
                  <with-param pos="3"/>
                </call-macro>
              </when>
              <otherwise>
                <out>
                  <chunk name="ger_enc" case="caseFirstWord">
                    <tags>
                      <tag>
                        <lit-tag v="SN"/>
                      </tag>
                      <tag>
                        <clip pos="3" side="tl" part="a_verb"/>
                      </tag>
                      <tag>
                        <clip pos="3" side="tl" part="temps"/>
                      </tag>
                      <tag>
                        <clip pos="3" side="tl" part="pers"/>
                      </tag>
                      <tag>
                        <clip pos="3" side="tl" part="nbr"/>
                      </tag>
                      <tag>
                        <var n="tipusverb"/>
                      </tag>
                    </tags>
                    <mlu>
                      <lu>
                        <get-case-from pos="1">
                          <clip pos="3" side="tl" part="lemh"/>
                        </get-case-from>
                        <clip pos="3" side="tl" part="a_verb"/>
                        <clip pos="3" side="tl" part="temps"/>
                        <clip pos="3" side="tl" part="pers"/>
                        <clip pos="3" side="tl" part="nbr"/>
                      </lu>
                      <lu>
                        <clip pos="2" side="tl" part="lem"/>
                        <lit-tag v="prn.enc"/>
                        <clip pos="2" side="tl" part="tipoenc_pro"/>
                        <clip pos="3" side="tl" part="lemq"/>
                      </lu>
                    </mlu>
                  </chunk>
                </out>
                <call-macro n="f_bcond">
                  <with-param pos="1"/>
                  <with-param pos="2"/>
                </call-macro>
                <call-macro n="f_bcond">
                  <with-param pos="2"/>
                  <with-param pos="3"/>
                </call-macro>
              </otherwise>
            </choose>
          </when>
          <otherwise>
            <choose>
              <when>
                <test>
                  <or>
                    <equal caseless="yes">
                      <clip pos="2" side="sl" part="lem"/>
                      <lit v="en"/>
                    </equal>
                    <equal caseless="yes">
                      <clip pos="2" side="sl" part="lem"/>
                      <lit v="y"/>
                    </equal>
                  </or>
                </test>
                <out>
                  <chunk name="ger_enc" case="caseFirstWord">
                    <tags>
                      <tag>
                        <lit-tag v="SN"/>
                      </tag>
                      <tag>
                        <clip pos="3" side="tl" part="a_verb"/>
                      </tag>
                      <tag>
                        <clip pos="3" side="tl" part="temps"/>
                      </tag>
                      <tag>
                        <clip pos="3" side="tl" part="pers"/>
                      </tag>
                      <tag>
                        <clip pos="3" side="tl" part="nbr"/>
                      </tag>
                      <tag>
                        <var n="tipusverb"/>
                      </tag>
                    </tags>
                    <mlu>
                      <lu>
                        <get-case-from pos="1">
                          <clip pos="3" side="tl" part="lemh"/>
                        </get-case-from>
                        <clip pos="3" side="tl" part="a_verb"/>
                        <clip pos="3" side="tl" part="temps"/>
                        <clip pos="3" side="tl" part="pers"/>
                        <clip pos="3" side="tl" part="nbr"/>
                      </lu>
                      <lu>
                        <get-case-from pos="2">
                          <clip pos="1" side="tl" part="lem"/>
                        </get-case-from>
                        <lit-tag v="prn.enc"/>
                        <clip pos="1" side="tl" part="tipoenc_pro"/>
                        <clip pos="3" side="tl" part="lemq"/>
                      </lu>
                    </mlu>
                  </chunk>
                </out>
                <call-macro n="f_bcond">
                  <with-param pos="1"/>
                  <with-param pos="2"/>
                </call-macro>
                <call-macro n="f_bcond">
                  <with-param pos="2"/>
                  <with-param pos="3"/>
                </call-macro>
              </when>
              <otherwise>
                <out>
                  <chunk name="ger_enc_enc" case="caseFirstWord">
                    <tags>
                      <tag>
                        <lit-tag v="SN"/>
                      </tag>
                      <tag>
                        <clip pos="3" side="tl" part="a_verb"/>
                      </tag>
                      <tag>
                        <clip pos="3" side="tl" part="temps"/>
                      </tag>
                      <tag>
                        <clip pos="3" side="tl" part="pers"/>
                      </tag>
                      <tag>
                        <clip pos="3" side="tl" part="nbr"/>
                      </tag>
                      <tag>
                        <var n="tipusverb"/>
                      </tag>
                    </tags>
                    <mlu>
                      <lu>
                        <get-case-from pos="1">
                          <clip pos="3" side="tl" part="lemh"/>
                        </get-case-from>
                        <clip pos="3" side="tl" part="a_verb"/>
                        <clip pos="3" side="tl" part="temps"/>
                        <clip pos="3" side="tl" part="pers"/>
                        <clip pos="3" side="tl" part="nbr"/>
                      </lu>
                      <lu>
                        <get-case-from pos="2">
                          <clip pos="1" side="tl" part="lem"/>
                        </get-case-from>
                        <lit-tag v="prn.enc"/>
                        <clip pos="1" side="tl" part="tipoenc_pro"/>
                      </lu>
                      <lu>
                        <clip pos="2" side="tl" part="lem"/>
                        <lit-tag v="prn.enc"/>
                        <clip pos="2" side="tl" part="tipoenc_pro"/>
                        <clip pos="3" side="tl" part="lemq"/>
                      </lu>
                    </mlu>
                  </chunk>
                </out>
                <call-macro n="f_bcond">
                  <with-param pos="1"/>
                  <with-param pos="2"/>
                </call-macro>
                <call-macro n="f_bcond">
                  <with-param pos="2"/>
                  <with-param pos="3"/>
                </call-macro>
              </otherwise>
            </choose>
          </otherwise>
        </choose>
        <let>
          <var n="caseFirstWord"/>
          <lit v="aa"/>
        </let>
      </action>
    </rule>
    <rule comment="en prnpro ger">
      <pattern>
        <pattern-item n="enprep"/>
        <pattern-item n="prnpro"/>
        <pattern-item n="ger"/>
      </pattern>
      <action>
        <call-macro n="f_concord1">
          <with-param pos="2"/>
        </call-macro>
        <call-macro n="tipus_verb">
          <with-param pos="3"/>
        </call-macro>
        <call-macro n="firstWord">
          <with-param pos="1"/>
        </call-macro>
        <choose>
          <when>
            <test>
              <or>
                <equal caseless="yes">
                  <clip pos="2" side="sl" part="lem"/>
                  <lit v="en"/>
                </equal>
                <equal caseless="yes">
                  <clip pos="2" side="sl" part="lem"/>
                  <lit v="y"/>
                </equal>
              </or>
            </test>
            <out>
              <chunk name="ger" case="caseFirstWord">
                <tags>
                  <tag>
                    <lit-tag v="ger"/>
                  </tag>
                  <tag>
                    <clip pos="3" side="tl" part="a_verb"/>
                  </tag>
                  <tag>
                    <clip pos="3" side="tl" part="temps"/>
                  </tag>
                  <tag>
                    <clip pos="3" side="tl" part="pers"/>
                  </tag>
                  <tag>
                    <clip pos="3" side="tl" part="nbr"/>
                  </tag>
                  <tag>
                    <var n="tipusverb"/>
                  </tag>
                </tags>
                <lu>
                  <get-case-from pos="1">
                    <clip pos="3" side="tl" part="lemh"/>
                  </get-case-from>
                  <clip pos="3" side="tl" part="a_verb"/>
                  <clip pos="3" side="tl" part="temps"/>
                  <clip pos="3" side="tl" part="pers"/>
                  <clip pos="3" side="tl" part="nbr"/>
                  <clip pos="3" side="tl" part="lemq"/>
                </lu>
              </chunk>
            </out>
            <call-macro n="f_bcond">
              <with-param pos="1"/>
              <with-param pos="2"/>
            </call-macro>
            <call-macro n="f_bcond">
              <with-param pos="2"/>
              <with-param pos="3"/>
            </call-macro>
          </when>
          <otherwise>
            <out>
              <chunk name="ger_enc" case="caseFirstWord">
                <tags>
                  <tag>
                    <lit-tag v="SN"/>
                  </tag>
                  <tag>
                    <clip pos="3" side="tl" part="a_verb"/>
                  </tag>
                  <tag>
                    <clip pos="3" side="tl" part="temps"/>
                  </tag>
                  <tag>
                    <clip pos="3" side="tl" part="pers"/>
                  </tag>
                  <tag>
                    <clip pos="3" side="tl" part="nbr"/>
                  </tag>
                  <tag>
                    <var n="tipusverb"/>
                  </tag>
                </tags>
                <mlu>
                  <lu>
                    <get-case-from pos="1">
                      <clip pos="3" side="tl" part="lemh"/>
                    </get-case-from>
                    <clip pos="3" side="tl" part="a_verb"/>
                    <clip pos="3" side="tl" part="temps"/>
                    <clip pos="3" side="tl" part="pers"/>
                    <clip pos="3" side="tl" part="nbr"/>
                  </lu>
                  <lu>
                    <clip pos="2" side="tl" part="lem"/>
                    <lit-tag v="prn.enc"/>
                    <clip pos="2" side="tl" part="tipoenc_pro"/>
                    <clip pos="3" side="tl" part="lemq"/>
                  </lu>
                </mlu>
              </chunk>
            </out>
            <call-macro n="f_bcond">
              <with-param pos="1"/>
              <with-param pos="2"/>
            </call-macro>
            <call-macro n="f_bcond">
              <with-param pos="2"/>
              <with-param pos="3"/>
            </call-macro>
          </otherwise>
        </choose>
        <let>
          <var n="caseFirstWord"/>
          <lit v="aa"/>
        </let>
      </action>
    </rule>
    <rule comment="en prnpro prnpro ger">
      <pattern>
        <pattern-item n="enprep"/>
        <pattern-item n="prnpro"/>
        <pattern-item n="prnpro"/>
        <pattern-item n="ger"/>
      </pattern>
      <action>
        <call-macro n="f_concord1">
          <with-param pos="2"/>
        </call-macro>
        <call-macro n="f_concord1">
          <with-param pos="3"/>
        </call-macro>
        <call-macro n="tipus_verb">
          <with-param pos="4"/>
        </call-macro>
        <call-macro n="firstWord">
          <with-param pos="1"/>
        </call-macro>
        <choose>
          <when>
            <test>
              <equal caseless="yes">
                <clip pos="2" side="sl" part="lem"/>
                <lit v="en"/>
              </equal>
            </test>
            <choose>
              <when>
                <test>
                  <equal caseless="yes">
                    <clip pos="3" side="sl" part="lem"/>
                    <lit v="y"/>
                  </equal>
                </test>
                <out>
                  <chunk name="ger" case="caseFirstWord">
                    <tags>
                      <tag>
                        <lit-tag v="SV"/>
                      </tag>
                      <tag>
                        <clip pos="4" side="tl" part="a_verb"/>
                      </tag>
                      <tag>
                        <clip pos="4" side="tl" part="temps"/>
                      </tag>
                      <tag>
                        <clip pos="4" side="tl" part="pers"/>
                      </tag>
                      <tag>
                        <clip pos="4" side="tl" part="nbr"/>
                      </tag>
                      <tag>
                        <var n="tipusverb"/>
                      </tag>
                    </tags>
                    <lu>
                      <get-case-from pos="1">
                        <clip pos="4" side="tl" part="lemh"/>
                      </get-case-from>
                      <clip pos="4" side="tl" part="a_verb"/>
                      <clip pos="4" side="tl" part="temps"/>
                      <clip pos="4" side="tl" part="pers"/>
                      <clip pos="4" side="tl" part="nbr"/>
                      <clip pos="4" side="tl" part="lemq"/>
                    </lu>
                  </chunk>
                </out>
                <call-macro n="f_bcond">
                  <with-param pos="1"/>
                  <with-param pos="2"/>
                </call-macro>
                <call-macro n="f_bcond">
                  <with-param pos="2"/>
                  <with-param pos="3"/>
                </call-macro>
                <call-macro n="f_bcond">
                  <with-param pos="3"/>
                  <with-param pos="4"/>
                </call-macro>
              </when>
              <otherwise>
                <out>
                  <chunk name="ger_enc" case="caseFirstWord">
                    <tags>
                      <tag>
                        <lit-tag v="ger"/>
                      </tag>
                      <tag>
                        <clip pos="4" side="tl" part="a_verb"/>
                      </tag>
                      <tag>
                        <clip pos="4" side="tl" part="temps"/>
                      </tag>
                      <tag>
                        <clip pos="4" side="tl" part="pers"/>
                      </tag>
                      <tag>
                        <clip pos="4" side="tl" part="nbr"/>
                      </tag>
                      <tag>
                        <var n="tipusverb"/>
                      </tag>
                    </tags>
                    <mlu>
                      <lu>
                        <get-case-from pos="1">
                          <clip pos="4" side="tl" part="lemh"/>
                        </get-case-from>
                        <clip pos="4" side="tl" part="a_verb"/>
                        <clip pos="4" side="tl" part="temps"/>
                        <clip pos="4" side="tl" part="pers"/>
                        <clip pos="4" side="tl" part="nbr"/>
                      </lu>
                      <lu>
                        <clip pos="3" side="tl" part="lem"/>
                        <lit-tag v="prn.enc"/>
                        <clip pos="3" side="tl" part="tipoenc_pro"/>
                        <clip pos="4" side="tl" part="lemq"/>
                      </lu>
                    </mlu>
                  </chunk>
                </out>
                <call-macro n="f_bcond">
                  <with-param pos="1"/>
                  <with-param pos="2"/>
                </call-macro>
                <call-macro n="f_bcond">
                  <with-param pos="2"/>
                  <with-param pos="3"/>
                </call-macro>
                <call-macro n="f_bcond">
                  <with-param pos="3"/>
                  <with-param pos="4"/>
                </call-macro>
              </otherwise>
            </choose>
          </when>
          <otherwise>
            <choose>
              <when>
                <test>
                  <or>
                    <equal caseless="yes">
                      <clip pos="3" side="sl" part="lem"/>
                      <lit v="en"/>
                    </equal>
                    <equal caseless="yes">
                      <clip pos="3" side="sl" part="lem"/>
                      <lit v="y"/>
                    </equal>
                  </or>
                </test>
                <out>
                  <chunk name="ger_enc" case="caseFirstWord">
                    <tags>
                      <tag>
                        <lit-tag v="SN"/>
                      </tag>
                      <tag>
                        <clip pos="4" side="tl" part="a_verb"/>
                      </tag>
                      <tag>
                        <clip pos="4" side="tl" part="temps"/>
                      </tag>
                      <tag>
                        <clip pos="4" side="tl" part="pers"/>
                      </tag>
                      <tag>
                        <clip pos="4" side="tl" part="nbr"/>
                      </tag>
                      <tag>
                        <var n="tipusverb"/>
                      </tag>
                    </tags>
                    <mlu>
                      <lu>
                        <get-case-from pos="1">
                          <clip pos="4" side="tl" part="lemh"/>
                        </get-case-from>
                        <clip pos="4" side="tl" part="a_verb"/>
                        <clip pos="4" side="tl" part="temps"/>
                        <clip pos="4" side="tl" part="pers"/>
                        <clip pos="4" side="tl" part="nbr"/>
                      </lu>
                      <lu>
                        <clip pos="2" side="tl" part="lem"/>
                        <lit-tag v="prn.enc"/>
                        <clip pos="2" side="tl" part="tipoenc_pro"/>
                        <clip pos="4" side="tl" part="lemq"/>
                      </lu>
                    </mlu>
                  </chunk>
                </out>
                <call-macro n="f_bcond">
                  <with-param pos="1"/>
                  <with-param pos="2"/>
                </call-macro>
                <call-macro n="f_bcond">
                  <with-param pos="2"/>
                  <with-param pos="3"/>
                </call-macro>
                <call-macro n="f_bcond">
                  <with-param pos="3"/>
                  <with-param pos="4"/>
                </call-macro>
              </when>
              <otherwise>
                <out>
                  <chunk name="ger_enc_enc" case="caseFirstWord">
                    <tags>
                      <tag>
                        <lit-tag v="SN"/>
                      </tag>
                      <tag>
                        <clip pos="4" side="tl" part="a_verb"/>
                      </tag>
                      <tag>
                        <clip pos="4" side="tl" part="temps"/>
                      </tag>
                      <tag>
                        <clip pos="4" side="tl" part="pers"/>
                      </tag>
                      <tag>
                        <clip pos="4" side="tl" part="nbr"/>
                      </tag>
                      <tag>
                        <var n="tipusverb"/>
                      </tag>
                    </tags>
                    <mlu>
                      <lu>
                        <get-case-from pos="1">
                          <clip pos="4" side="tl" part="lemh"/>
                        </get-case-from>
                        <clip pos="4" side="tl" part="a_verb"/>
                        <clip pos="4" side="tl" part="temps"/>
                        <clip pos="4" side="tl" part="pers"/>
                        <clip pos="4" side="tl" part="nbr"/>
                      </lu>
                      <lu>
                        <clip pos="2" side="tl" part="lem"/>
                        <lit-tag v="prn.enc"/>
                        <clip pos="2" side="tl" part="tipoenc_pro"/>
                      </lu>
                      <lu>
                        <clip pos="3" side="tl" part="lem"/>
                        <lit-tag v="prn.enc"/>
                        <clip pos="3" side="tl" part="tipoenc_pro"/>
                        <clip pos="4" side="tl" part="lemq"/>
                      </lu>
                    </mlu>
                  </chunk>
                </out>
                <call-macro n="f_bcond">
                  <with-param pos="1"/>
                  <with-param pos="2"/>
                </call-macro>
                <call-macro n="f_bcond">
                  <with-param pos="2"/>
                  <with-param pos="3"/>
                </call-macro>
                <call-macro n="f_bcond">
                  <with-param pos="3"/>
                  <with-param pos="4"/>
                </call-macro>
              </otherwise>
            </choose>
          </otherwise>
        </choose>
        <let>
          <var n="caseFirstWord"/>
          <lit v="aa"/>
        </let>
      </action>
    </rule>
    <rule comment="imp prnenc">
      <pattern>
        <pattern-item n="imp"/>
        <pattern-item n="prnenc"/>
      </pattern>
      <action>
        <call-macro n="f_concord1">
          <with-param pos="2"/>
        </call-macro>
        <call-macro n="tipus_verb">
          <with-param pos="1"/>
        </call-macro>
        <call-macro n="firstWord">
          <with-param pos="1"/>
        </call-macro>
        <choose>
          <when>
            <test>
              <or>
                <equal caseless="yes">
                  <clip pos="2" side="sl" part="lem"/>
                  <lit v="en"/>
                </equal>
                <equal caseless="yes">
                  <clip pos="2" side="sl" part="lem"/>
                  <lit v="y"/>
                </equal>
              </or>
            </test>
            <out>
              <chunk name="imp" case="caseFirstWord">
                <tags>
                  <tag>
                    <lit-tag v="SV"/>
                  </tag>
                  <tag>
                    <clip pos="1" side="tl" part="a_verb"/>
                  </tag>
                  <tag>
                    <clip pos="1" side="tl" part="temps"/>
                  </tag>
                  <tag>
                    <clip pos="1" side="tl" part="pers"/>
                  </tag>
                  <tag>
                    <clip pos="1" side="tl" part="nbr"/>
                  </tag>
                  <tag>
                    <var n="tipusverb"/>
                  </tag>
                </tags>
                <lu>
                  <clip pos="1" side="tl" part="lemh"/>
                  <clip pos="1" side="tl" part="a_verb"/>
                  <clip pos="1" side="tl" part="temps"/>
                  <clip pos="1" side="tl" part="pers"/>
                  <clip pos="1" side="tl" part="nbr"/>
                  <clip pos="1" side="tl" part="lemq"/>
                </lu>
              </chunk>
            </out>
          </when>
          <otherwise>
            <out>
              <chunk name="imp_enc" case="caseFirstWord">
                <tags>
                  <tag>
                    <lit-tag v="SV"/>
                  </tag>
                  <tag>
                    <clip pos="1" side="tl" part="a_verb"/>
                  </tag>
                  <tag>
                    <clip pos="1" side="tl" part="temps"/>
                  </tag>
                  <tag>
                    <clip pos="1" side="tl" part="pers"/>
                  </tag>
                  <tag>
                    <clip pos="1" side="tl" part="nbr"/>
                  </tag>
                  <tag>
                    <var n="tipusverb"/>
                  </tag>
                </tags>
                <mlu>
                  <lu>
                    <clip pos="1" side="tl" part="lemh"/>
                    <clip pos="1" side="tl" part="a_verb"/>
                    <clip pos="1" side="tl" part="temps"/>
                    <clip pos="1" side="tl" part="pers"/>
                    <clip pos="1" side="tl" part="nbr"/>
                  </lu>
                  <lu>
                    <clip pos="2" side="tl" part="whole"/>
                    <clip pos="1" side="tl" part="lemq"/>
                  </lu>
                </mlu>
              </chunk>
            </out>
          </otherwise>
        </choose>
        <let>
          <var n="caseFirstWord"/>
          <lit v="aa"/>
        </let>
      </action>
    </rule>
    <rule comment="imp prnenc prnenc">
      <pattern>
        <pattern-item n="imp"/>
        <pattern-item n="prnenc"/>
        <pattern-item n="prnenc"/>
      </pattern>
      <action>
        <call-macro n="f_concord1">
          <with-param pos="2"/>
        </call-macro>
        <call-macro n="f_concord1">
          <with-param pos="3"/>
        </call-macro>
        <call-macro n="tipus_verb">
          <with-param pos="1"/>
        </call-macro>
        <call-macro n="firstWord">
          <with-param pos="1"/>
        </call-macro>
        <choose>
          <when>
            <test>
              <equal caseless="yes">
                <clip pos="2" side="sl" part="lem"/>
                <lit v="en"/>
              </equal>
            </test>
            <choose>
              <when>
                <test>
                  <equal caseless="yes">
                    <clip pos="3" side="sl" part="lem"/>
                    <lit v="y"/>
                  </equal>
                </test>
                <out>
                  <chunk name="imp" case="caseFirstWord">
                    <tags>
                      <tag>
                        <lit-tag v="SV"/>
                      </tag>
                      <tag>
                        <clip pos="1" side="tl" part="a_verb"/>
                      </tag>
                      <tag>
                        <clip pos="1" side="tl" part="temps"/>
                      </tag>
                      <tag>
                        <clip pos="1" side="tl" part="pers"/>
                      </tag>
                      <tag>
                        <clip pos="1" side="tl" part="nbr"/>
                      </tag>
                      <tag>
                        <var n="tipusverb"/>
                      </tag>
                    </tags>
                    <lu>
                      <clip pos="1" side="tl" part="lemh"/>
                      <clip pos="1" side="tl" part="a_verb"/>
                      <clip pos="1" side="tl" part="temps"/>
                      <clip pos="1" side="tl" part="pers"/>
                      <clip pos="1" side="tl" part="nbr"/>
                      <clip pos="1" side="tl" part="lemq"/>
                    </lu>
                  </chunk>
                </out>
                <call-macro n="f_bcond">
                  <with-param pos="1"/>
                  <with-param pos="2"/>
                </call-macro>
                <call-macro n="f_bcond">
                  <with-param pos="2"/>
                  <with-param pos="3"/>
                </call-macro>
              </when>
              <otherwise>
                <out>
                  <chunk name="imp_enc" case="caseFirstWord">
                    <tags>
                      <tag>
                        <lit-tag v="SV"/>
                      </tag>
                      <tag>
                        <clip pos="1" side="tl" part="a_verb"/>
                      </tag>
                      <tag>
                        <clip pos="1" side="tl" part="temps"/>
                      </tag>
                      <tag>
                        <clip pos="1" side="tl" part="pers"/>
                      </tag>
                      <tag>
                        <clip pos="1" side="tl" part="nbr"/>
                      </tag>
                      <tag>
                        <var n="tipusverb"/>
                      </tag>
                    </tags>
                    <mlu>
                      <lu>
                        <clip pos="1" side="tl" part="lemh"/>
                        <clip pos="1" side="tl" part="a_verb"/>
                        <clip pos="1" side="tl" part="temps"/>
                        <clip pos="1" side="tl" part="pers"/>
                        <clip pos="1" side="tl" part="nbr"/>
                      </lu>
                      <lu>
                        <clip pos="3" side="tl" part="lem"/>
                        <lit-tag v="prn.enc"/>
                        <clip pos="3" side="tl" part="tipoenc_pro"/>
                        <clip pos="1" side="tl" part="lemq"/>
                      </lu>
                    </mlu>
                  </chunk>
                </out>
                <call-macro n="f_bcond">
                  <with-param pos="1"/>
                  <with-param pos="2"/>
                </call-macro>
                <call-macro n="f_bcond">
                  <with-param pos="2"/>
                  <with-param pos="3"/>
                </call-macro>
              </otherwise>
            </choose>
          </when>
          <otherwise>
            <choose>
              <when>
                <test>
                  <equal caseless="yes">
                    <clip pos="3" side="sl" part="lem"/>
                    <lit v="y"/>
                  </equal>
                </test>
                <out>
                  <chunk name="imp_enc" case="caseFirstWord">
                    <tags>
                      <tag>
                        <lit-tag v="SV"/>
                      </tag>
                      <tag>
                        <clip pos="1" side="tl" part="a_verb"/>
                      </tag>
                      <tag>
                        <clip pos="1" side="tl" part="temps"/>
                      </tag>
                      <tag>
                        <clip pos="1" side="tl" part="pers"/>
                      </tag>
                      <tag>
                        <clip pos="1" side="tl" part="nbr"/>
                      </tag>
                      <tag>
                        <var n="tipusverb"/>
                      </tag>
                    </tags>
                    <mlu>
                      <lu>
                        <clip pos="1" side="tl" part="lemh"/>
                        <clip pos="1" side="tl" part="a_verb"/>
                        <clip pos="1" side="tl" part="temps"/>
                        <clip pos="1" side="tl" part="pers"/>
                        <clip pos="1" side="tl" part="nbr"/>
                      </lu>
                      <lu>
                        <clip pos="2" side="tl" part="lem"/>
                        <lit-tag v="prn.enc"/>
                        <clip pos="2" side="tl" part="tipoenc_pro"/>
                        <clip pos="1" side="tl" part="lemq"/>
                      </lu>
                    </mlu>
                  </chunk>
                </out>
                <call-macro n="f_bcond">
                  <with-param pos="1"/>
                  <with-param pos="2"/>
                </call-macro>
                <call-macro n="f_bcond">
                  <with-param pos="2"/>
                  <with-param pos="3"/>
                </call-macro>
              </when>
              <otherwise>
                <out>
                  <chunk name="inf_enc_enc" case="caseFirstWord">
                    <tags>
                      <tag>
                        <lit-tag v="SN"/>
                      </tag>
                      <tag>
                        <clip pos="1" side="tl" part="a_verb"/>
                      </tag>
                      <tag>
                        <clip pos="1" side="tl" part="temps"/>
                      </tag>
                      <tag>
                        <clip pos="1" side="tl" part="pers"/>
                      </tag>
                      <tag>
                        <clip pos="1" side="tl" part="nbr"/>
                      </tag>
                      <tag>
                        <var n="tipusverb"/>
                      </tag>
                    </tags>
                    <mlu>
                      <lu>
                        <clip pos="1" side="tl" part="lemh"/>
                        <clip pos="1" side="tl" part="a_verb"/>
                        <clip pos="1" side="tl" part="temps"/>
                        <clip pos="1" side="tl" part="pers"/>
                        <clip pos="1" side="tl" part="nbr"/>
                      </lu>
                      <lu>
                        <clip pos="2" side="tl" part="lem"/>
                        <lit-tag v="prn.enc"/>
                        <clip pos="2" side="tl" part="tipoenc_pro"/>
                      </lu>
                      <lu>
                        <clip pos="3" side="tl" part="lem"/>
                        <lit-tag v="prn.enc"/>
                        <clip pos="3" side="tl" part="tipoenc_pro"/>
                        <clip pos="1" side="tl" part="lemq"/>
                      </lu>
                    </mlu>
                  </chunk>
                </out>
                <call-macro n="f_bcond">
                  <with-param pos="1"/>
                  <with-param pos="2"/>
                </call-macro>
                <call-macro n="f_bcond">
                  <with-param pos="2"/>
                  <with-param pos="3"/>
                </call-macro>
              </otherwise>
            </choose>
          </otherwise>
        </choose>
        <let>
          <var n="caseFirstWord"/>
          <lit v="aa"/>
        </let>
      </action>
    </rule>
    <rule comment="REGLA: VERB-PRNPERSSUBJ">
      <pattern>
        <pattern-item n="verbpers"/>
        <pattern-item n="prnperssubj"/>
      </pattern>
      <action>
        <call-macro n="tipus_verb">
          <with-param pos="1"/>
        </call-macro>
        <call-macro n="f_ppres">
          <with-param pos="1"/>
        </call-macro>
        <call-macro n="firstWord">
          <with-param pos="1"/>
        </call-macro>
        <choose>
          <when>
            <test>
              <equal>
                <clip pos="2" side="sl" part="lem"/>
                <lit v="on"/>
              </equal>
            </test>
            <out>
              <chunk name="pro_verb" case="caseFirstWord">
                <tags>
                  <tag>
                    <lit-tag v="SV"/>
                  </tag>
                  <tag>
                    <clip pos="1" side="tl" part="a_verb"/>
                  </tag>
                  <tag>
                    <clip pos="1" side="tl" part="temps"/>
                  </tag>
                  <tag>
                    <clip pos="1" side="tl" part="pers"/>
                  </tag>
                  <tag>
                    <clip pos="1" side="tl" part="nbr"/>
                  </tag>
                  <tag>
                    <var n="tipusverb"/>
                  </tag>
                </tags>
                <lu>
                  <get-case-from pos="1">
                    <clip pos="2" side="tl" part="lem"/>
                  </get-case-from>
                  <lit-tag v="prn.obj"/>
                  <clip pos="2" side="tl" part="tipoenc_pro"/>
                </lu>
                <b/>
                <lu>
                  <get-case-from pos="2">
                    <clip pos="1" side="tl" part="lemh"/>
                  </get-case-from>
                  <clip pos="1" side="tl" part="a_verb"/>
                  <clip pos="1" side="tl" part="temps"/>
                  <clip pos="1" side="tl" part="pers"/>
                  <clip pos="1" side="tl" part="nbr" link-to="5"/>
                  <clip pos="1" side="tl" part="lemq"/>
                </lu>
              </chunk>
            </out>
          </when>
          <otherwise>
            <out>
              <chunk name="verb" case="caseFirstWord">
                <tags>
                  <tag>
                    <lit-tag v="SV"/>
                  </tag>
                  <tag>
                    <clip pos="1" side="tl" part="a_verb"/>
                  </tag>
                  <tag>
                    <clip pos="1" side="tl" part="temps"/>
                  </tag>
                  <tag>
                    <clip pos="2" side="tl" part="pers"/>
                  </tag>
                  <tag>
                    <clip pos="2" side="tl" part="nbr"/>
                  </tag>
                  <tag>
                    <var n="tipusverb"/>
                  </tag>
                </tags>
                <lu>
                  <clip pos="1" side="tl" part="lemh"/>
                  <clip pos="1" side="tl" part="a_verb"/>
                  <clip pos="1" side="tl" part="temps"/>
                  <clip pos="2" side="tl" part="pers"/>
                  <clip pos="1" side="tl" part="nbr"/>
                  <clip pos="1" side="tl" part="lemq"/>
                </lu>
              </chunk>
            </out>
            <call-macro n="f_bcond">
              <with-param pos="1"/>
              <with-param pos="2"/>
            </call-macro>
          </otherwise>
        </choose>
        <let>
          <var n="caseFirstWord"/>
          <lit v="aa"/>
        </let>
      </action>
    </rule>
    <rule comment="REGLA: VERB-PRNPERSSUBJ INF">
      <pattern>
        <pattern-item n="verbpers"/>
        <pattern-item n="prnperssubj"/>
        <pattern-item n="inf"/>
      </pattern>
      <action>
        <call-macro n="tipus_verb">
          <with-param pos="1"/>
        </call-macro>
        <call-macro n="f_ppres">
          <with-param pos="1"/>
        </call-macro>
        <call-macro n="firstWord">
          <with-param pos="1"/>
        </call-macro>
        <choose>
          <when>
            <test>
              <equal>
                <clip pos="2" side="sl" part="lem"/>
                <lit v="on"/>
              </equal>
            </test>
            <out>
              <chunk name="pro_verb" case="caseFirstWord">
                <tags>
                  <tag>
                    <lit-tag v="SV"/>
                  </tag>
                  <tag>
                    <clip pos="1" side="tl" part="a_verb"/>
                  </tag>
                  <tag>
                    <clip pos="1" side="tl" part="temps"/>
                  </tag>
                  <tag>
                    <clip pos="1" side="tl" part="pers"/>
                  </tag>
                  <tag>
                    <clip pos="1" side="tl" part="nbr"/>
                  </tag>
                  <tag>
                    <var n="tipusverb"/>
                  </tag>
                </tags>
                <lu>
                  <get-case-from pos="1">
                    <clip pos="2" side="tl" part="lem"/>
                  </get-case-from>
                  <lit-tag v="prn.obj"/>
                  <clip pos="2" side="tl" part="tipoenc_pro"/>
                </lu>
                <b/>
                <lu>
                  <get-case-from pos="2">
                    <clip pos="1" side="tl" part="lemh"/>
                  </get-case-from>
                  <clip pos="1" side="tl" part="a_verb"/>
                  <clip pos="1" side="tl" part="temps"/>
                  <clip pos="1" side="tl" part="pers"/>
                  <clip pos="1" side="tl" part="nbr" link-to="5"/>
                  <clip pos="1" side="tl" part="lemq"/>
                </lu>
                <b pos="2"/>
                <lu>
                  <clip pos="3" side="tl" part="whole"/>
                </lu>
              </chunk>
            </out>
          </when>
          <otherwise>
            <out>
              <chunk name="verb" case="caseFirstWord">
                <tags>
                  <tag>
                    <lit-tag v="SV"/>
                  </tag>
                  <tag>
                    <clip pos="1" side="tl" part="a_verb"/>
                  </tag>
                  <tag>
                    <clip pos="1" side="tl" part="temps"/>
                  </tag>
                  <tag>
                    <clip pos="2" side="tl" part="pers"/>
                  </tag>
                  <tag>
                    <clip pos="2" side="tl" part="nbr"/>
                  </tag>
                  <tag>
                    <var n="tipusverb"/>
                  </tag>
                </tags>
                <lu>
                  <clip pos="1" side="tl" part="lemh"/>
                  <clip pos="1" side="tl" part="a_verb"/>
                  <clip pos="1" side="tl" part="temps"/>
                  <clip pos="2" side="tl" part="pers"/>
                  <clip pos="1" side="tl" part="nbr"/>
                  <clip pos="1" side="tl" part="lemq"/>
                </lu>
                <b pos="2"/>
                <lu>
                  <clip pos="3" side="tl" part="whole"/>
                </lu>
              </chunk>
            </out>
            <call-macro n="f_bcond">
              <with-param pos="1"/>
              <with-param pos="2"/>
            </call-macro>
          </otherwise>
        </choose>
        <let>
          <var n="caseFirstWord"/>
          <lit v="aa"/>
        </let>
      </action>
    </rule>
    <rule comment="aux + pp">
      <pattern>
        <pattern-item n="aux"/>
        <pattern-item n="pp"/>
      </pattern>
      <action>
        <call-macro n="comprova_auxiliar">
          <with-param pos="1"/>
          <with-param pos="2"/>
        </call-macro>
        <call-macro n="tipus_verb">
          <with-param pos="2"/>
        </call-macro>
        <call-macro n="f_ppres">
          <with-param pos="1"/>
        </call-macro>
        <call-macro n="firstWord">
          <with-param pos="1"/>
        </call-macro>
        <out>
          <chunk name="aux_pp" case="caseFirstWord">
            <tags>
              <tag>
                <lit-tag v="SV"/>
              </tag>
              <tag>
                <clip pos="2" side="tl" part="a_verb"/>
              </tag>
              <tag>
                <clip pos="1" side="tl" part="temps"/>
              </tag>
              <tag>
                <clip pos="1" side="tl" part="pers"/>
              </tag>
              <tag>
                <clip pos="1" side="tl" part="gen"/>
              </tag>
              <tag>
                <clip pos="1" side="tl" part="nbr"/>
              </tag>
              <tag>
                <var n="tipusverb"/>
              </tag>
            </tags>
            <lu>
              <clip pos="1" side="tl" part="lemh"/>
              <clip pos="1" side="tl" part="a_verb"/>
              <clip pos="1" side="tl" part="temps"/>
              <clip pos="1" side="tl" part="pers"/>
              <clip pos="1" side="tl" part="gen"/>
              <clip pos="1" side="tl" part="nbr" link-to="5"/>
              <clip pos="1" side="tl" part="lemq"/>
            </lu>
            <b pos="1"/>
            <lu>
              <clip pos="2" side="tl" part="lemh"/>
              <clip pos="2" side="tl" part="a_pp"/>
              <clip pos="2" side="tl" part="lemq"/>
            </lu>
          </chunk>
        </out>
        <let>
          <var n="caseFirstWord"/>
          <lit v="aa"/>
        </let>
      </action>
    </rule>
    <rule comment="aux-subj + pp">
      <pattern>
        <pattern-item n="aux"/>
        <pattern-item n="prnperssubj"/>
        <pattern-item n="pp"/>
      </pattern>
      <action>
        <call-macro n="comprova_auxiliar">
          <with-param pos="1"/>
          <with-param pos="3"/>
        </call-macro>
        <call-macro n="tipus_verb">
          <with-param pos="3"/>
        </call-macro>
        <call-macro n="f_ppres">
          <with-param pos="1"/>
        </call-macro>
        <call-macro n="firstWord">
          <with-param pos="1"/>
        </call-macro>
        <choose>
          <when>
            <test>
              <equal>
                <clip pos="2" side="sl" part="lem"/>
                <lit v="on"/>
              </equal>
            </test>
            <out>
              <chunk name="pro_aux_pp" case="caseFirstWord">
                <tags>
                  <tag>
                    <lit-tag v="SV"/>
                  </tag>
                  <tag>
                    <clip pos="3" side="tl" part="a_verb"/>
                  </tag>
                  <tag>
                    <clip pos="1" side="tl" part="temps"/>
                  </tag>
                  <tag>
                    <clip pos="1" side="tl" part="pers"/>
                  </tag>
                  <tag>
                    <clip pos="1" side="tl" part="gen"/>
                  </tag>
                  <tag>
                    <clip pos="1" side="tl" part="nbr"/>
                  </tag>
                  <tag>
                    <var n="tipusverb"/>
                  </tag>
                </tags>
                <lu>
                  <get-case-from pos="1">
                    <clip pos="2" side="tl" part="lem"/>
                  </get-case-from>
                  <lit-tag v="prn.obj"/>
                  <clip pos="2" side="tl" part="tipoenc_pro"/>
                </lu>
                <b/>
                <lu>
                  <get-case-from pos="2">
                    <clip pos="1" side="tl" part="lemh"/>
                  </get-case-from>
                  <clip pos="1" side="tl" part="a_verb"/>
                  <clip pos="1" side="tl" part="temps"/>
                  <clip pos="1" side="tl" part="pers"/>
                  <clip pos="1" side="tl" part="gen"/>
                  <clip pos="1" side="tl" part="nbr" link-to="5"/>
                  <clip pos="1" side="tl" part="lemq"/>
                </lu>
                <b pos="2"/>
                <lu>
                  <clip pos="3" side="tl" part="lemh"/>
                  <clip pos="3" side="tl" part="a_pp"/>
                  <clip pos="3" side="tl" part="lemq"/>
                </lu>
              </chunk>
            </out>
          </when>
          <otherwise>
            <out>
              <chunk name="aux_pp" case="caseFirstWord">
                <tags>
                  <tag>
                    <lit-tag v="SV"/>
                  </tag>
                  <tag>
                    <clip pos="3" side="tl" part="a_verb"/>
                  </tag>
                  <tag>
                    <clip pos="1" side="tl" part="temps"/>
                  </tag>
                  <tag>
                    <clip pos="1" side="tl" part="pers"/>
                  </tag>
                  <tag>
                    <clip pos="1" side="tl" part="gen"/>
                  </tag>
                  <tag>
                    <clip pos="1" side="tl" part="nbr"/>
                  </tag>
                  <tag>
                    <var n="tipusverb"/>
                  </tag>
                </tags>
                <lu>
                  <clip pos="1" side="tl" part="lemh"/>
                  <clip pos="1" side="tl" part="a_verb"/>
                  <clip pos="1" side="tl" part="temps"/>
                  <clip pos="1" side="tl" part="pers"/>
                  <clip pos="1" side="tl" part="gen"/>
                  <clip pos="1" side="tl" part="nbr" link-to="5"/>
                  <clip pos="1" side="tl" part="lemq"/>
                </lu>
                <b pos="2"/>
                <lu>
                  <clip pos="3" side="tl" part="lemh"/>
                  <clip pos="3" side="tl" part="a_pp"/>
                  <clip pos="3" side="tl" part="lemq"/>
                </lu>
              </chunk>
            </out>
          </otherwise>
        </choose>
        <let>
          <var n="caseFirstWord"/>
          <lit v="aa"/>
        </let>
      </action>
    </rule>
    <rule comment="aux adv pp -&gt; aux pp adv">
      <pattern>
        <pattern-item n="aux"/>
        <pattern-item n="adv"/>
        <pattern-item n="pp"/>
      </pattern>
      <action>
        <call-macro n="comprova_auxiliar">
          <with-param pos="1"/>
          <with-param pos="3"/>
        </call-macro>
        <call-macro n="tipus_verb">
          <with-param pos="3"/>
        </call-macro>
        <call-macro n="f_ppres">
          <with-param pos="1"/>
        </call-macro>
        <call-macro n="firstWord">
          <with-param pos="1"/>
        </call-macro>
        <choose>
          <when>
            <test>
              <equal caseless="yes">
                <clip pos="2" side="sl" part="lem"/>
                <lit v="pas"/>
              </equal>
            </test>
            <out>
              <chunk name="aux_pp" case="caseFirstWord">
                <tags>
                  <tag>
                    <lit-tag v="SV"/>
                  </tag>
                  <tag>
                    <clip pos="3" side="tl" part="a_verb"/>
                  </tag>
                  <tag>
                    <clip pos="1" side="tl" part="temps"/>
                  </tag>
                  <tag>
                    <clip pos="1" side="tl" part="pers"/>
                  </tag>
                  <tag>
                    <clip pos="1" side="tl" part="gen"/>
                  </tag>
                  <tag>
                    <clip pos="1" side="tl" part="nbr"/>
                  </tag>
                  <tag>
                    <var n="tipusverb"/>
                  </tag>
                </tags>
                <lu>
                  <clip pos="1" side="tl" part="lem"/>
                  <clip pos="1" side="tl" part="a_verb"/>
                  <clip pos="1" side="tl" part="temps"/>
                  <clip pos="1" side="tl" part="pers"/>
                  <clip pos="1" side="tl" part="gen"/>
                  <clip pos="1" side="tl" part="nbr" link-to="5"/>
                  <clip pos="1" side="tl" part="lemq"/>
                </lu>
                <b pos="1"/>
                <lu>
                  <clip pos="3" side="tl" part="lemh"/>
                  <clip pos="3" side="tl" part="a_pp"/>
                  <clip pos="3" side="tl" part="lemq"/>
                </lu>
              </chunk>
            </out>
            <call-macro n="f_bcond">
              <with-param pos="1"/>
              <with-param pos="2"/>
            </call-macro>
          </when>
          <otherwise>
            <out>
              <chunk name="aux_pp" case="caseFirstWord">
                <tags>
                  <tag>
                    <lit-tag v="SV"/>
                  </tag>
                  <tag>
                    <clip pos="3" side="tl" part="a_verb"/>
                  </tag>
                  <tag>
                    <clip pos="1" side="tl" part="temps"/>
                  </tag>
                  <tag>
                    <clip pos="1" side="tl" part="pers"/>
                  </tag>
                  <tag>
                    <clip pos="1" side="tl" part="gen"/>
                  </tag>
                  <tag>
                    <clip pos="1" side="tl" part="nbr"/>
                  </tag>
                  <tag>
                    <var n="tipusverb"/>
                  </tag>
                </tags>
                <lu>
                  <clip pos="1" side="tl" part="lem"/>
                  <clip pos="1" side="tl" part="a_verb"/>
                  <clip pos="1" side="tl" part="temps"/>
                  <clip pos="1" side="tl" part="pers"/>
                  <clip pos="1" side="tl" part="gen"/>
                  <clip pos="1" side="tl" part="nbr" link-to="5"/>
                </lu>
                <b pos="1"/>
                <lu>
                  <clip pos="3" side="tl" part="lemh"/>
                  <clip pos="3" side="tl" part="a_pp"/>
                  <clip pos="3" side="tl" part="lemq"/>
                </lu>
              </chunk>
              <b pos="2"/>
              <chunk name="adv">
                <tags>
                  <tag>
                    <clip pos="2" side="tl" part="a_adv"/>
                  </tag>
                  <tag>
                    <clip pos="2" side="tl" part="neg"/>
                  </tag>
                </tags>
                <lu>
                  <clip pos="2" side="tl" part="lem"/>
                  <clip pos="2" side="tl" part="a_adv"/>
                </lu>
              </chunk>
            </out>
          </otherwise>
        </choose>
        <let>
          <var n="caseFirstWord"/>
          <lit v="aa"/>
        </let>
      </action>
    </rule>
    <rule comment="aux-subj adv pp -&gt; aux pp adv">
      <pattern>
        <pattern-item n="aux"/>
        <pattern-item n="prnperssubj"/>
        <pattern-item n="adv"/>
        <pattern-item n="pp"/>
      </pattern>
      <action>
        <call-macro n="firstWord">
          <with-param pos="1"/>
        </call-macro>
        <call-macro n="comprova_auxiliar">
          <with-param pos="1"/>
          <with-param pos="4"/>
        </call-macro>
        <call-macro n="tipus_verb">
          <with-param pos="4"/>
        </call-macro>
        <call-macro n="f_ppres">
          <with-param pos="1"/>
        </call-macro>
        <choose>
          <when>
            <test>
              <equal>
                <clip pos="2" side="sl" part="lem"/>
                <lit v="on"/>
              </equal>
            </test>
            <out>
              <chunk name="pro_aux_pp" case="caseFirstWord">
                <tags>
                  <tag>
                    <lit-tag v="SV"/>
                  </tag>
                  <tag>
                    <clip pos="4" side="tl" part="a_verb"/>
                  </tag>
                  <tag>
                    <clip pos="1" side="tl" part="temps"/>
                  </tag>
                  <tag>
                    <clip pos="1" side="tl" part="pers"/>
                  </tag>
                  <tag>
                    <clip pos="1" side="tl" part="gen"/>
                  </tag>
                  <tag>
                    <clip pos="1" side="tl" part="nbr"/>
                  </tag>
                  <tag>
                    <var n="tipusverb"/>
                  </tag>
                </tags>
                <lu>
                  <get-case-from pos="1">
                    <clip pos="2" side="tl" part="lem"/>
                  </get-case-from>
                  <lit-tag v="prn.obj"/>
                  <clip pos="2" side="tl" part="tipoenc_pro"/>
                </lu>
                <b/>
                <lu>
                  <get-case-from pos="2">
                    <clip pos="1" side="tl" part="lem"/>
                  </get-case-from>
                  <clip pos="1" side="tl" part="a_verb"/>
                  <clip pos="1" side="tl" part="temps"/>
                  <clip pos="1" side="tl" part="pers"/>
                  <clip pos="1" side="tl" part="gen"/>
                  <clip pos="1" side="tl" part="nbr" link-to="5"/>
                  <clip pos="1" side="tl" part="lemq"/>
                </lu>
                <b pos="2"/>
                <lu>
                  <clip pos="4" side="tl" part="lemh"/>
                  <clip pos="4" side="tl" part="a_pp"/>
                  <clip pos="4" side="tl" part="lemq"/>
                </lu>
              </chunk>
            </out>
          </when>
          <otherwise>
            <out>
              <chunk name="aux_pp" case="caseFirstWord">
                <tags>
                  <tag>
                    <lit-tag v="SV"/>
                  </tag>
                  <tag>
                    <clip pos="4" side="tl" part="a_verb"/>
                  </tag>
                  <tag>
                    <clip pos="1" side="tl" part="temps"/>
                  </tag>
                  <tag>
                    <clip pos="1" side="tl" part="pers"/>
                  </tag>
                  <tag>
                    <clip pos="1" side="tl" part="gen"/>
                  </tag>
                  <tag>
                    <clip pos="1" side="tl" part="nbr"/>
                  </tag>
                  <tag>
                    <var n="tipusverb"/>
                  </tag>
                </tags>
                <lu>
                  <clip pos="1" side="tl" part="lem"/>
                  <clip pos="1" side="tl" part="a_verb"/>
                  <clip pos="1" side="tl" part="temps"/>
                  <clip pos="1" side="tl" part="pers"/>
                  <clip pos="1" side="tl" part="gen"/>
                  <clip pos="1" side="tl" part="nbr" link-to="5"/>
                  <clip pos="1" side="tl" part="lemq"/>
                </lu>
                <b pos="2"/>
                <lu>
                  <clip pos="4" side="tl" part="lemh"/>
                  <clip pos="4" side="tl" part="a_pp"/>
                  <clip pos="4" side="tl" part="lemq"/>
                </lu>
              </chunk>
            </out>
          </otherwise>
        </choose>
        <choose>
          <when>
            <test>
              <equal caseless="yes">
                <clip pos="3" side="sl" part="lem"/>
                <lit v="pas"/>
              </equal>
            </test>
            <call-macro n="f_bcond">
              <with-param pos="3"/>
              <with-param pos="4"/>
            </call-macro>
          </when>
          <otherwise>
            <out>
              <b pos="3"/>
              <chunk name="adv">
                <tags>
                  <tag>
                    <clip pos="3" side="tl" part="a_adv"/>
                  </tag>
                  <tag>
                    <clip pos="3" side="tl" part="neg"/>
                  </tag>
                </tags>
                <lu>
                  <clip pos="3" side="tl" part="lem"/>
                  <clip pos="3" side="tl" part="a_adv"/>
                </lu>
              </chunk>
            </out>
          </otherwise>
        </choose>
        <let>
          <var n="caseFirstWord"/>
          <lit v="aa"/>
        </let>
      </action>
    </rule>
    <rule comment="prnpro auxpers + pp">
      <pattern>
        <pattern-item n="prnpro"/>
        <pattern-item n="auxpers"/>
        <pattern-item n="pp"/>
      </pattern>
      <action>
        <call-macro n="f_concord1">
          <with-param pos="1"/>
        </call-macro>
        <call-macro n="comprova_auxiliar_ref">
          <with-param pos="2"/>
          <with-param pos="3"/>
          <with-param pos="1"/>
        </call-macro>
        <call-macro n="tipus_verb">
          <with-param pos="3"/>
        </call-macro>
        <call-macro n="f_ppres">
          <with-param pos="2"/>
        </call-macro>
        <call-macro n="firstWord">
          <with-param pos="1"/>
        </call-macro>
        <choose>
          <when>
            <test>
              <or>
                <equal caseless="yes">
                  <clip pos="1" side="sl" part="lem"/>
                  <lit v="en"/>
                </equal>
                <equal caseless="yes">
                  <clip pos="1" side="sl" part="lem"/>
                  <lit v="y"/>
                </equal>
              </or>
            </test>
            <out>
              <chunk name="aux_pp" case="caseFirstWord">
                <tags>
                  <tag>
                    <lit-tag v="SV"/>
                  </tag>
                  <tag>
                    <clip pos="3" side="tl" part="a_verb"/>
                  </tag>
                  <tag>
                    <clip pos="2" side="tl" part="temps"/>
                  </tag>
                  <tag>
                    <clip pos="2" side="tl" part="pers"/>
                  </tag>
                  <tag>
                    <clip pos="2" side="tl" part="gen"/>
                  </tag>
                  <tag>
                    <clip pos="2" side="tl" part="nbr"/>
                  </tag>
                  <tag>
                    <var n="tipusverb"/>
                  </tag>
                </tags>
                <lu>
                  <clip pos="2" side="tl" part="lem"/>
                  <clip pos="2" side="tl" part="a_verb"/>
                  <clip pos="2" side="tl" part="temps"/>
                  <clip pos="2" side="tl" part="pers"/>
                  <clip pos="2" side="tl" part="gen"/>
                  <clip pos="2" side="tl" part="nbr"/>
                  <clip pos="2" side="tl" part="lemq"/>
                </lu>
                <b pos="2"/>
                <lu>
                  <clip pos="3" side="tl" part="lemh"/>
                  <clip pos="3" side="tl" part="a_pp"/>
                  <clip pos="3" side="tl" part="lemq"/>
                </lu>
              </chunk>
            </out>
          </when>
          <otherwise>
            <out>
              <chunk name="pro_aux_pp" case="caseFirstWord">
                <tags>
                  <tag>
                    <lit-tag v="SV"/>
                  </tag>
                  <tag>
                    <clip pos="3" side="tl" part="a_verb"/>
                  </tag>
                  <tag>
                    <clip pos="2" side="tl" part="temps"/>
                  </tag>
                  <tag>
                    <clip pos="2" side="tl" part="pers"/>
                  </tag>
                  <tag>
                    <clip pos="2" side="tl" part="nbr"/>
                  </tag>
                  <tag>
                    <var n="tipusverb"/>
                  </tag>
                </tags>
                <lu>
                  <clip pos="1" side="tl" part="whole"/>
                </lu>
                <b pos="1"/>
                <lu>
                  <clip pos="2" side="tl" part="lem"/>
                  <clip pos="2" side="tl" part="a_verb"/>
                  <clip pos="2" side="tl" part="temps"/>
                  <clip pos="2" side="tl" part="pers"/>
                  <clip pos="2" side="tl" part="gen"/>
                  <clip pos="2" side="tl" part="nbr"/>
                  <clip pos="2" side="tl" part="lemq"/>
                </lu>
                <b pos="2"/>
                <lu>
                  <clip pos="3" side="tl" part="lemh"/>
                  <clip pos="3" side="tl" part="a_pp"/>
                  <clip pos="3" side="tl" part="lemq"/>
                </lu>
              </chunk>
            </out>
          </otherwise>
        </choose>
        <let>
          <var n="caseFirstWord"/>
          <lit v="aa"/>
        </let>
      </action>
    </rule>
    <rule comment="prnpro auxpers-subj + pp">
      <pattern>
        <pattern-item n="prnpro"/>
        <pattern-item n="auxpers"/>
        <pattern-item n="prnperssubj"/>
        <pattern-item n="pp"/>
      </pattern>
      <action>
        <call-macro n="f_concord1">
          <with-param pos="1"/>
        </call-macro>
        <call-macro n="comprova_auxiliar_ref">
          <with-param pos="2"/>
          <with-param pos="4"/>
          <with-param pos="1"/>
        </call-macro>
        <call-macro n="tipus_verb">
          <with-param pos="4"/>
        </call-macro>
        <call-macro n="f_ppres">
          <with-param pos="2"/>
        </call-macro>
        <call-macro n="firstWord">
          <with-param pos="1"/>
        </call-macro>
        <choose>
          <when>
            <test>
              <and>
                <equal>
                  <clip pos="3" side="sl" part="lem"/>
                  <lit v="on"/>
                </equal>
                <not>
                  <equal>
                    <clip pos="1" side="sl" part="lem"/>
                    <lit v="se"/>
                  </equal>
                </not>
              </and>
            </test>
            <choose>
              <when>
                <test>
                  <or>
                    <equal caseless="yes">
                      <clip pos="1" side="sl" part="lem"/>
                      <lit v="en"/>
                    </equal>
                    <equal caseless="yes">
                      <clip pos="1" side="sl" part="lem"/>
                      <lit v="y"/>
                    </equal>
                  </or>
                </test>
                <out>
                  <chunk name="pro_aux_pp" case="caseFirstWord">
                    <tags>
                      <tag>
                        <lit-tag v="SV"/>
                      </tag>
                      <tag>
                        <clip pos="4" side="tl" part="a_verb"/>
                      </tag>
                      <tag>
                        <clip pos="2" side="tl" part="temps"/>
                      </tag>
                      <tag>
                        <clip pos="2" side="tl" part="pers"/>
                      </tag>
                      <tag>
                        <clip pos="2" side="tl" part="gen"/>
                      </tag>
                      <tag>
                        <clip pos="2" side="tl" part="nbr"/>
                      </tag>
                      <tag>
                        <var n="tipusverb"/>
                      </tag>
                    </tags>
                    <lu>
                      <get-case-from pos="1">
                        <clip pos="3" side="tl" part="lem"/>
                      </get-case-from>
                      <lit-tag v="prn.obj"/>
                      <clip pos="3" side="tl" part="tipoenc_pro"/>
                    </lu>
                    <b pos="1"/>
                    <lu>
                      <clip pos="2" side="tl" part="lem"/>
                      <clip pos="2" side="tl" part="a_verb"/>
                      <clip pos="2" side="tl" part="temps"/>
                      <clip pos="2" side="tl" part="pers"/>
                      <clip pos="2" side="tl" part="gen"/>
                      <clip pos="2" side="tl" part="nbr"/>
                      <clip pos="2" side="tl" part="lemq"/>
                    </lu>
                    <b pos="3"/>
                    <lu>
                      <clip pos="4" side="tl" part="lemh"/>
                      <clip pos="4" side="tl" part="a_pp"/>
                      <clip pos="4" side="tl" part="lemq"/>
                    </lu>
                  </chunk>
                </out>
              </when>
              <otherwise>
                <out>
                  <chunk name="pro_pro_aux_pp" case="caseFirstWord">
                    <tags>
                      <tag>
                        <lit-tag v="SV"/>
                      </tag>
                      <tag>
                        <clip pos="4" side="tl" part="a_verb"/>
                      </tag>
                      <tag>
                        <clip pos="2" side="tl" part="temps"/>
                      </tag>
                      <tag>
                        <clip pos="2" side="tl" part="pers"/>
                      </tag>
                      <tag>
                        <clip pos="2" side="tl" part="nbr"/>
                      </tag>
                      <tag>
                        <var n="tipusverb"/>
                      </tag>
                    </tags>
                    <lu>
                      <get-case-from pos="1">
                        <clip pos="3" side="tl" part="lem"/>
                      </get-case-from>
                      <lit-tag v="prn.obj"/>
                      <clip pos="3" side="tl" part="tipoenc_pro"/>
                    </lu>
                    <b pos="1"/>
                    <lu>
                      <get-case-from pos="2">
                        <clip pos="1" side="tl" part="lem"/>
                      </get-case-from>
                      <lit-tag v="prn.obj"/>
                      <clip pos="1" side="tl" part="tipoenc_pro"/>
                    </lu>
                    <b pos="3"/>
                    <lu>
                      <clip pos="2" side="tl" part="lem"/>
                      <clip pos="2" side="tl" part="a_verb"/>
                      <clip pos="2" side="tl" part="temps"/>
                      <clip pos="2" side="tl" part="pers"/>
                      <clip pos="2" side="tl" part="gen"/>
                      <clip pos="2" side="tl" part="nbr"/>
                      <clip pos="2" side="tl" part="lemq"/>
                    </lu>
                    <b pos="3"/>
                    <lu>
                      <clip pos="4" side="tl" part="lemh"/>
                      <clip pos="4" side="tl" part="a_pp"/>
                      <clip pos="4" side="tl" part="lemq"/>
                    </lu>
                  </chunk>
                </out>
              </otherwise>
            </choose>
          </when>
          <otherwise>
            <choose>
              <when>
                <test>
                  <or>
                    <equal caseless="yes">
                      <clip pos="1" side="sl" part="lem"/>
                      <lit v="en"/>
                    </equal>
                    <equal caseless="yes">
                      <clip pos="1" side="sl" part="lem"/>
                      <lit v="y"/>
                    </equal>
                  </or>
                </test>
                <out>
                  <chunk name="aux_pp" case="caseFirstWord">
                    <tags>
                      <tag>
                        <lit-tag v="SV"/>
                      </tag>
                      <tag>
                        <clip pos="4" side="tl" part="a_verb"/>
                      </tag>
                      <tag>
                        <clip pos="2" side="tl" part="temps"/>
                      </tag>
                      <tag>
                        <clip pos="2" side="tl" part="pers"/>
                      </tag>
                      <tag>
                        <clip pos="2" side="tl" part="gen"/>
                      </tag>
                      <tag>
                        <clip pos="2" side="tl" part="nbr"/>
                      </tag>
                      <tag>
                        <var n="tipusverb"/>
                      </tag>
                    </tags>
                    <lu>
                      <clip pos="2" side="tl" part="lem"/>
                      <clip pos="2" side="tl" part="a_verb"/>
                      <clip pos="2" side="tl" part="temps"/>
                      <clip pos="2" side="tl" part="pers"/>
                      <clip pos="2" side="tl" part="gen"/>
                      <clip pos="2" side="tl" part="nbr"/>
                      <clip pos="2" side="tl" part="lemq"/>
                    </lu>
                    <b pos="3"/>
                    <lu>
                      <clip pos="4" side="tl" part="lemh"/>
                      <clip pos="4" side="tl" part="a_pp"/>
                      <clip pos="4" side="tl" part="lemq"/>
                    </lu>
                  </chunk>
                </out>
              </when>
              <otherwise>
                <out>
                  <chunk name="pro_aux_pp" case="caseFirstWord">
                    <tags>
                      <tag>
                        <lit-tag v="SV"/>
                      </tag>
                      <tag>
                        <clip pos="4" side="tl" part="a_verb"/>
                      </tag>
                      <tag>
                        <clip pos="2" side="tl" part="temps"/>
                      </tag>
                      <tag>
                        <clip pos="2" side="tl" part="pers"/>
                      </tag>
                      <tag>
                        <clip pos="2" side="tl" part="nbr"/>
                      </tag>
                      <tag>
                        <var n="tipusverb"/>
                      </tag>
                    </tags>
                    <lu>
                      <clip pos="1" side="tl" part="whole"/>
                    </lu>
                    <b pos="1"/>
                    <lu>
                      <clip pos="2" side="tl" part="lem"/>
                      <clip pos="2" side="tl" part="a_verb"/>
                      <clip pos="2" side="tl" part="temps"/>
                      <clip pos="2" side="tl" part="pers"/>
                      <clip pos="2" side="tl" part="gen"/>
                      <clip pos="2" side="tl" part="nbr"/>
                      <clip pos="2" side="tl" part="lemq"/>
                    </lu>
                    <b pos="3"/>
                    <lu>
                      <clip pos="4" side="tl" part="lemh"/>
                      <clip pos="4" side="tl" part="a_pp"/>
                      <clip pos="4" side="tl" part="lemq"/>
                    </lu>
                  </chunk>
                </out>
              </otherwise>
            </choose>
          </otherwise>
        </choose>
        <let>
          <var n="caseFirstWord"/>
          <lit v="aa"/>
        </let>
      </action>
    </rule>
    <rule comment="prnpro auxpers adv pp">
      <pattern>
        <pattern-item n="prnpro"/>
        <pattern-item n="auxpers"/>
        <pattern-item n="adv"/>
        <pattern-item n="pp"/>
      </pattern>
      <action>
        <call-macro n="f_concord1">
          <with-param pos="1"/>
        </call-macro>
        <call-macro n="comprova_auxiliar_ref">
          <with-param pos="2"/>
          <with-param pos="4"/>
          <with-param pos="1"/>
        </call-macro>
        <call-macro n="tipus_verb">
          <with-param pos="4"/>
        </call-macro>
        <call-macro n="f_ppres">
          <with-param pos="2"/>
        </call-macro>
        <call-macro n="firstWord">
          <with-param pos="1"/>
        </call-macro>
        <choose>
          <when>
            <test>
              <or>
                <equal caseless="yes">
                  <clip pos="1" side="sl" part="lem"/>
                  <lit v="en"/>
                </equal>
                <equal caseless="yes">
                  <clip pos="1" side="sl" part="lem"/>
                  <lit v="y"/>
                </equal>
              </or>
            </test>
            <out>
              <chunk name="aux_pp" case="caseFirstWord">
                <tags>
                  <tag>
                    <lit-tag v="SV"/>
                  </tag>
                  <tag>
                    <clip pos="4" side="tl" part="a_verb"/>
                  </tag>
                  <tag>
                    <clip pos="2" side="tl" part="temps"/>
                  </tag>
                  <tag>
                    <clip pos="2" side="tl" part="pers"/>
                  </tag>
                  <tag>
                    <clip pos="2" side="tl" part="gen"/>
                  </tag>
                  <tag>
                    <clip pos="2" side="tl" part="nbr"/>
                  </tag>
                  <tag>
                    <var n="tipusverb"/>
                  </tag>
                </tags>
                <lu>
                  <clip pos="2" side="tl" part="lem"/>
                  <clip pos="2" side="tl" part="a_verb"/>
                  <clip pos="2" side="tl" part="temps"/>
                  <clip pos="2" side="tl" part="pers"/>
                  <clip pos="2" side="tl" part="gen"/>
                  <clip pos="2" side="tl" part="nbr" link-to="5"/>
                </lu>
                <b pos="2"/>
                <lu>
                  <clip pos="4" side="tl" part="lemh"/>
                  <clip pos="4" side="tl" part="a_pp"/>
                  <clip pos="4" side="tl" part="lemq"/>
                </lu>
              </chunk>
            </out>
          </when>
          <otherwise>
            <out>
              <chunk name="pro_aux_pp" case="caseFirstWord">
                <tags>
                  <tag>
                    <lit-tag v="SV"/>
                  </tag>
                  <tag>
                    <clip pos="4" side="tl" part="a_verb"/>
                  </tag>
                  <tag>
                    <clip pos="2" side="tl" part="temps"/>
                  </tag>
                  <tag>
                    <clip pos="2" side="tl" part="pers"/>
                  </tag>
                  <tag>
                    <clip pos="2" side="tl" part="nbr"/>
                  </tag>
                  <tag>
                    <var n="tipusverb"/>
                  </tag>
                </tags>
                <lu>
                  <clip pos="1" side="tl" part="whole"/>
                </lu>
                <b pos="1"/>
                <lu>
                  <clip pos="2" side="tl" part="lem"/>
                  <clip pos="2" side="tl" part="a_verb"/>
                  <clip pos="2" side="tl" part="temps"/>
                  <clip pos="2" side="tl" part="pers"/>
                  <clip pos="2" side="tl" part="gen"/>
                  <clip pos="2" side="tl" part="nbr" link-to="5"/>
                </lu>
                <b pos="2"/>
                <lu>
                  <clip pos="4" side="tl" part="lemh"/>
                  <clip pos="4" side="tl" part="a_pp"/>
                  <clip pos="4" side="tl" part="lemq"/>
                </lu>
              </chunk>
            </out>
          </otherwise>
        </choose>
        <choose>
          <when>
            <test>
              <not>
                <equal caseless="yes">
                  <clip pos="3" side="sl" part="lem"/>
                  <lit v="pas"/>
                </equal>
              </not>
            </test>
            <out>
              <b pos="3"/>
              <chunk name="adv">
                <tags>
                  <tag>
                    <clip pos="3" side="tl" part="a_adv"/>
                  </tag>
                  <tag>
                    <clip pos="3" side="tl" part="neg"/>
                  </tag>
                </tags>
                <lu>
                  <clip pos="3" side="tl" part="lem"/>
                  <clip pos="3" side="tl" part="a_adv"/>
                </lu>
              </chunk>
            </out>
          </when>
        </choose>
        <let>
          <var n="caseFirstWord"/>
          <lit v="aa"/>
        </let>
      </action>
    </rule>
    <rule comment="prnpro auxpers-subj adv pp">
      <pattern>
        <pattern-item n="prnpro"/>
        <pattern-item n="auxpers"/>
        <pattern-item n="prnperssubj"/>
        <pattern-item n="adv"/>
        <pattern-item n="pp"/>
      </pattern>
      <action>
        <call-macro n="f_concord1">
          <with-param pos="1"/>
        </call-macro>
        <call-macro n="comprova_auxiliar_ref">
          <with-param pos="2"/>
          <with-param pos="5"/>
          <with-param pos="1"/>
        </call-macro>
        <call-macro n="tipus_verb">
          <with-param pos="5"/>
        </call-macro>
        <call-macro n="f_ppres">
          <with-param pos="2"/>
        </call-macro>
        <call-macro n="firstWord">
          <with-param pos="1"/>
        </call-macro>
        <choose>
          <when>
            <test>
              <and>
                <equal>
                  <clip pos="3" side="sl" part="lem"/>
                  <lit v="on"/>
                </equal>
                <not>
                  <equal>
                    <clip pos="1" side="sl" part="lem"/>
                    <lit v="se"/>
                  </equal>
                </not>
              </and>
            </test>
            <choose>
              <when>
                <test>
                  <or>
                    <equal caseless="yes">
                      <clip pos="1" side="sl" part="lem"/>
                      <lit v="en"/>
                    </equal>
                    <equal caseless="yes">
                      <clip pos="1" side="sl" part="lem"/>
                      <lit v="y"/>
                    </equal>
                  </or>
                </test>
                <out>
                  <chunk name="pro_aux_pp" case="caseFirstWord">
                    <tags>
                      <tag>
                        <lit-tag v="SV"/>
                      </tag>
                      <tag>
                        <clip pos="5" side="tl" part="a_verb"/>
                      </tag>
                      <tag>
                        <clip pos="2" side="tl" part="temps"/>
                      </tag>
                      <tag>
                        <clip pos="2" side="tl" part="pers"/>
                      </tag>
                      <tag>
                        <clip pos="2" side="tl" part="gen"/>
                      </tag>
                      <tag>
                        <clip pos="2" side="tl" part="nbr"/>
                      </tag>
                      <tag>
                        <var n="tipusverb"/>
                      </tag>
                    </tags>
                    <lu>
                      <get-case-from pos="1">
                        <clip pos="3" side="tl" part="lem"/>
                      </get-case-from>
                      <lit-tag v="prn.obj"/>
                      <clip pos="3" side="tl" part="tipoenc_pro"/>
                    </lu>
                    <b/>
                    <lu>
                      <clip pos="2" side="tl" part="lem"/>
                      <clip pos="2" side="tl" part="a_verb"/>
                      <clip pos="2" side="tl" part="temps"/>
                      <clip pos="2" side="tl" part="pers"/>
                      <clip pos="2" side="tl" part="gen"/>
                      <clip pos="2" side="tl" part="nbr" link-to="5"/>
                    </lu>
                    <b pos="3"/>
                    <lu>
                      <clip pos="5" side="tl" part="lemh"/>
                      <clip pos="5" side="tl" part="a_pp"/>
                      <clip pos="5" side="tl" part="lemq"/>
                    </lu>
                  </chunk>
                </out>
              </when>
              <otherwise>
                <out>
                  <chunk name="pro_pro_aux_pp" case="caseFirstWord">
                    <tags>
                      <tag>
                        <lit-tag v="SV"/>
                      </tag>
                      <tag>
                        <clip pos="5" side="tl" part="a_verb"/>
                      </tag>
                      <tag>
                        <clip pos="2" side="tl" part="temps"/>
                      </tag>
                      <tag>
                        <clip pos="2" side="tl" part="pers"/>
                      </tag>
                      <tag>
                        <clip pos="2" side="tl" part="nbr"/>
                      </tag>
                      <tag>
                        <var n="tipusverb"/>
                      </tag>
                    </tags>
                    <lu>
                      <get-case-from pos="1">
                        <clip pos="3" side="tl" part="lem"/>
                      </get-case-from>
                      <lit-tag v="prn.obj"/>
                      <clip pos="3" side="tl" part="tipoenc_pro"/>
                    </lu>
                    <b/>
                    <lu>
                      <get-case-from pos="2">
                        <clip pos="1" side="tl" part="lem"/>
                      </get-case-from>
                      <lit-tag v="prn.obj"/>
                      <clip pos="1" side="tl" part="tipoenc_pro"/>
                    </lu>
                    <b pos="1"/>
                    <lu>
                      <clip pos="2" side="tl" part="lem"/>
                      <clip pos="2" side="tl" part="a_verb"/>
                      <clip pos="2" side="tl" part="temps"/>
                      <clip pos="2" side="tl" part="pers"/>
                      <clip pos="2" side="tl" part="gen"/>
                      <clip pos="2" side="tl" part="nbr" link-to="5"/>
                    </lu>
                    <b pos="3"/>
                    <lu>
                      <clip pos="5" side="tl" part="lemh"/>
                      <clip pos="5" side="tl" part="a_pp"/>
                      <clip pos="5" side="tl" part="lemq"/>
                    </lu>
                  </chunk>
                </out>
              </otherwise>
            </choose>
          </when>
          <otherwise>
            <choose>
              <when>
                <test>
                  <or>
                    <equal caseless="yes">
                      <clip pos="1" side="sl" part="lem"/>
                      <lit v="en"/>
                    </equal>
                    <equal caseless="yes">
                      <clip pos="1" side="sl" part="lem"/>
                      <lit v="y"/>
                    </equal>
                  </or>
                </test>
                <out>
                  <chunk name="aux_pp" case="caseFirstWord">
                    <tags>
                      <tag>
                        <lit-tag v="SV"/>
                      </tag>
                      <tag>
                        <clip pos="5" side="tl" part="a_verb"/>
                      </tag>
                      <tag>
                        <clip pos="2" side="tl" part="temps"/>
                      </tag>
                      <tag>
                        <clip pos="2" side="tl" part="pers"/>
                      </tag>
                      <tag>
                        <clip pos="2" side="tl" part="gen"/>
                      </tag>
                      <tag>
                        <clip pos="2" side="tl" part="nbr"/>
                      </tag>
                      <tag>
                        <var n="tipusverb"/>
                      </tag>
                    </tags>
                    <lu>
                      <clip pos="2" side="tl" part="lem"/>
                      <clip pos="2" side="tl" part="a_verb"/>
                      <clip pos="2" side="tl" part="temps"/>
                      <clip pos="2" side="tl" part="pers"/>
                      <clip pos="2" side="tl" part="gen"/>
                      <clip pos="2" side="tl" part="nbr" link-to="5"/>
                    </lu>
                    <b pos="3"/>
                    <lu>
                      <clip pos="5" side="tl" part="lemh"/>
                      <clip pos="5" side="tl" part="a_pp"/>
                      <clip pos="5" side="tl" part="lemq"/>
                    </lu>
                  </chunk>
                </out>
              </when>
              <otherwise>
                <out>
                  <chunk name="pro_aux_pp" case="caseFirstWord">
                    <tags>
                      <tag>
                        <lit-tag v="SV"/>
                      </tag>
                      <tag>
                        <clip pos="5" side="tl" part="a_verb"/>
                      </tag>
                      <tag>
                        <clip pos="2" side="tl" part="temps"/>
                      </tag>
                      <tag>
                        <clip pos="2" side="tl" part="pers"/>
                      </tag>
                      <tag>
                        <clip pos="2" side="tl" part="nbr"/>
                      </tag>
                      <tag>
                        <var n="tipusverb"/>
                      </tag>
                    </tags>
                    <lu>
                      <clip pos="1" side="tl" part="whole"/>
                    </lu>
                    <b pos="1"/>
                    <lu>
                      <clip pos="2" side="tl" part="lem"/>
                      <clip pos="2" side="tl" part="a_verb"/>
                      <clip pos="2" side="tl" part="temps"/>
                      <clip pos="2" side="tl" part="pers"/>
                      <clip pos="2" side="tl" part="gen"/>
                      <clip pos="2" side="tl" part="nbr" link-to="5"/>
                    </lu>
                    <b pos="3"/>
                    <lu>
                      <clip pos="5" side="tl" part="lemh"/>
                      <clip pos="5" side="tl" part="a_pp"/>
                      <clip pos="5" side="tl" part="lemq"/>
                    </lu>
                  </chunk>
                </out>
              </otherwise>
            </choose>
          </otherwise>
        </choose>
        <choose>
          <when>
            <test>
              <not>
                <equal caseless="yes">
                  <clip pos="4" side="sl" part="lem"/>
                  <lit v="pas"/>
                </equal>
              </not>
            </test>
            <out>
              <b pos="4"/>
              <chunk name="adv">
                <tags>
                  <tag>
                    <clip pos="4" side="tl" part="a_adv"/>
                  </tag>
                  <tag>
                    <clip pos="4" side="tl" part="neg"/>
                  </tag>
                </tags>
                <lu>
                  <clip pos="4" side="tl" part="lem"/>
                  <clip pos="4" side="tl" part="a_adv"/>
                </lu>
              </chunk>
            </out>
          </when>
        </choose>
        <let>
          <var n="caseFirstWord"/>
          <lit v="aa"/>
        </let>
      </action>
    </rule>
    <rule comment="prnpro prnpro auxpers pp">
      <pattern>
        <pattern-item n="prnpro"/>
        <pattern-item n="prnpro"/>
        <pattern-item n="auxpers"/>
        <pattern-item n="pp"/>
      </pattern>
      <action>
        <call-macro n="f_concord1">
          <with-param pos="1"/>
        </call-macro>
        <call-macro n="f_concord1">
          <with-param pos="2"/>
        </call-macro>
        <call-macro n="comprova_auxiliar_ref">
          <with-param pos="3"/>
          <with-param pos="4"/>
          <with-param pos="1"/>
        </call-macro>
        <call-macro n="tipus_verb">
          <with-param pos="4"/>
        </call-macro>
        <call-macro n="f_ppres">
          <with-param pos="3"/>
        </call-macro>
        <call-macro n="firstWord">
          <with-param pos="1"/>
        </call-macro>
        <choose>
          <when>
            <test>
              <equal caseless="yes">
                <clip pos="1" side="sl" part="lem"/>
                <lit v="en"/>
              </equal>
            </test>
            <choose>
              <when>
                <test>
                  <equal caseless="yes">
                    <clip pos="2" side="sl" part="lem"/>
                    <lit v="y"/>
                  </equal>
                </test>
                <out>
                  <chunk name="aux_pp" case="caseFirstWord">
                    <tags>
                      <tag>
                        <lit-tag v="SV"/>
                      </tag>
                      <tag>
                        <clip pos="4" side="tl" part="a_verb"/>
                      </tag>
                      <tag>
                        <clip pos="3" side="tl" part="temps"/>
                      </tag>
                      <tag>
                        <clip pos="3" side="tl" part="pers"/>
                      </tag>
                      <tag>
                        <clip pos="3" side="tl" part="gen"/>
                      </tag>
                      <tag>
                        <clip pos="3" side="tl" part="nbr"/>
                      </tag>
                      <tag>
                        <var n="tipusverb"/>
                      </tag>
                    </tags>
                    <lu>
                      <clip pos="3" side="tl" part="lem"/>
                      <clip pos="3" side="tl" part="a_verb"/>
                      <clip pos="3" side="tl" part="temps"/>
                      <clip pos="3" side="tl" part="pers"/>
                      <clip pos="3" side="tl" part="gen"/>
                      <clip pos="3" side="tl" part="nbr"/>
                    </lu>
                    <b pos="3"/>
                    <lu>
                      <clip pos="4" side="tl" part="lemh"/>
                      <clip pos="4" side="tl" part="a_pp"/>
                      <clip pos="4" side="tl" part="lemq"/>
                    </lu>
                  </chunk>
                </out>
                <call-macro n="f_bcond">
                  <with-param pos="1"/>
                  <with-param pos="2"/>
                </call-macro>
                <call-macro n="f_bcond">
                  <with-param pos="2"/>
                  <with-param pos="3"/>
                </call-macro>
              </when>
              <otherwise>
                <out>
                  <chunk name="pro_aux_pp" case="caseFirstWord">
                    <tags>
                      <tag>
                        <lit-tag v="SV"/>
                      </tag>
                      <tag>
                        <clip pos="4" side="tl" part="a_verb"/>
                      </tag>
                      <tag>
                        <clip pos="3" side="tl" part="temps"/>
                      </tag>
                      <tag>
                        <clip pos="3" side="tl" part="pers"/>
                      </tag>
                      <tag>
                        <clip pos="3" side="tl" part="nbr"/>
                      </tag>
                      <tag>
                        <var n="tipusverb"/>
                      </tag>
                    </tags>
                    <lu>
                      <clip pos="2" side="tl" part="whole"/>
                    </lu>
                    <b pos="1"/>
                    <lu>
                      <clip pos="3" side="tl" part="lem"/>
                      <clip pos="3" side="tl" part="a_verb"/>
                      <clip pos="3" side="tl" part="temps"/>
                      <clip pos="3" side="tl" part="pers"/>
                      <clip pos="3" side="tl" part="gen"/>
                      <clip pos="3" side="tl" part="nbr"/>
                      <clip pos="3" side="tl" part="lemq"/>
                    </lu>
                    <b pos="3"/>
                    <lu>
                      <clip pos="4" side="tl" part="lemh"/>
                      <clip pos="4" side="tl" part="a_pp"/>
                      <clip pos="4" side="tl" part="lemq"/>
                    </lu>
                  </chunk>
                </out>
              </otherwise>
            </choose>
          </when>
          <otherwise>
            <choose>
              <when>
                <test>
                  <or>
                    <equal caseless="yes">
                      <clip pos="2" side="sl" part="lem"/>
                      <lit v="en"/>
                    </equal>
                    <equal caseless="yes">
                      <clip pos="2" side="sl" part="lem"/>
                      <lit v="y"/>
                    </equal>
                  </or>
                </test>
                <out>
                  <chunk name="pro_aux_pp" case="caseFirstWord">
                    <tags>
                      <tag>
                        <lit-tag v="SV"/>
                      </tag>
                      <tag>
                        <clip pos="4" side="tl" part="a_verb"/>
                      </tag>
                      <tag>
                        <clip pos="3" side="tl" part="temps"/>
                      </tag>
                      <tag>
                        <clip pos="3" side="tl" part="pers"/>
                      </tag>
                      <tag>
                        <clip pos="3" side="tl" part="nbr"/>
                      </tag>
                      <tag>
                        <var n="tipusverb"/>
                      </tag>
                    </tags>
                    <lu>
                      <clip pos="1" side="tl" part="whole"/>
                    </lu>
                    <b pos="1"/>
                    <lu>
                      <clip pos="3" side="tl" part="lem"/>
                      <clip pos="3" side="tl" part="a_verb"/>
                      <clip pos="3" side="tl" part="temps"/>
                      <clip pos="3" side="tl" part="pers"/>
                      <clip pos="3" side="tl" part="gen"/>
                      <clip pos="3" side="tl" part="nbr"/>
                      <clip pos="3" side="tl" part="lemq"/>
                    </lu>
                    <b pos="3"/>
                    <lu>
                      <clip pos="4" side="tl" part="lemh"/>
                      <clip pos="4" side="tl" part="a_pp"/>
                      <clip pos="4" side="tl" part="lemq"/>
                    </lu>
                  </chunk>
                </out>
              </when>
              <otherwise>
                <out>
                  <chunk name="pro_pro_verb" case="caseFirstWord">
                    <tags>
                      <tag>
                        <lit-tag v="SV"/>
                      </tag>
                      <tag>
                        <clip pos="4" side="tl" part="a_verb"/>
                      </tag>
                      <tag>
                        <clip pos="3" side="tl" part="temps"/>
                      </tag>
                      <tag>
                        <clip pos="3" side="tl" part="pers"/>
                      </tag>
                      <tag>
                        <clip pos="3" side="tl" part="nbr"/>
                      </tag>
                      <tag>
                        <var n="tipusverb"/>
                      </tag>
                    </tags>
                    <lu>
                      <clip pos="1" side="tl" part="whole"/>
                    </lu>
                    <b pos="1"/>
                    <lu>
                      <clip pos="2" side="tl" part="whole"/>
                    </lu>
                    <b pos="2"/>
                    <lu>
                      <clip pos="3" side="tl" part="lem"/>
                      <clip pos="3" side="tl" part="a_verb"/>
                      <clip pos="3" side="tl" part="temps"/>
                      <clip pos="3" side="tl" part="pers"/>
                      <clip pos="3" side="tl" part="gen"/>
                      <clip pos="3" side="tl" part="nbr" link-to="5"/>
                      <clip pos="3" side="tl" part="lemq"/>
                    </lu>
                    <b pos="3"/>
                    <lu>
                      <clip pos="4" side="tl" part="lemh"/>
                      <clip pos="4" side="tl" part="a_pp"/>
                      <clip pos="4" side="tl" part="lemq"/>
                    </lu>
                  </chunk>
                </out>
              </otherwise>
            </choose>
          </otherwise>
        </choose>
        <let>
          <var n="caseFirstWord"/>
          <lit v="aa"/>
        </let>
      </action>
    </rule>
    <rule comment="prnpro prnpro auxpers-subj pp">
      <!--no hi ha tema "on"-->
      <pattern>
        <pattern-item n="prnpro"/>
        <pattern-item n="prnpro"/>
        <pattern-item n="auxpers"/>
        <pattern-item n="prnperssubj"/>
        <pattern-item n="pp"/>
      </pattern>
      <action>
        <call-macro n="f_concord1">
          <with-param pos="1"/>
        </call-macro>
        <call-macro n="f_concord1">
          <with-param pos="2"/>
        </call-macro>
        <call-macro n="comprova_auxiliar_ref">
          <with-param pos="3"/>
          <with-param pos="5"/>
          <with-param pos="1"/>
        </call-macro>
        <call-macro n="tipus_verb">
          <with-param pos="5"/>
        </call-macro>
        <call-macro n="f_ppres">
          <with-param pos="3"/>
        </call-macro>
        <call-macro n="firstWord">
          <with-param pos="1"/>
        </call-macro>
        <choose>
          <when>
            <test>
              <equal caseless="yes">
                <clip pos="1" side="sl" part="lem"/>
                <lit v="en"/>
              </equal>
            </test>
            <choose>
              <when>
                <test>
                  <equal caseless="yes">
                    <clip pos="2" side="sl" part="lem"/>
                    <lit v="y"/>
                  </equal>
                </test>
                <out>
                  <chunk name="aux_pp" case="caseFirstWord">
                    <tags>
                      <tag>
                        <lit-tag v="SV"/>
                      </tag>
                      <tag>
                        <clip pos="5" side="tl" part="a_verb"/>
                      </tag>
                      <tag>
                        <clip pos="3" side="tl" part="temps"/>
                      </tag>
                      <tag>
                        <clip pos="3" side="tl" part="pers"/>
                      </tag>
                      <tag>
                        <clip pos="3" side="tl" part="gen"/>
                      </tag>
                      <tag>
                        <clip pos="3" side="tl" part="nbr"/>
                      </tag>
                      <tag>
                        <var n="tipusverb"/>
                      </tag>
                    </tags>
                    <lu>
                      <clip pos="3" side="tl" part="lem"/>
                      <clip pos="3" side="tl" part="a_verb"/>
                      <clip pos="3" side="tl" part="temps"/>
                      <clip pos="3" side="tl" part="pers"/>
                      <clip pos="3" side="tl" part="gen"/>
                      <clip pos="3" side="tl" part="nbr"/>
                    </lu>
                    <b pos="4"/>
                    <lu>
                      <clip pos="5" side="tl" part="lemh"/>
                      <clip pos="5" side="tl" part="a_pp"/>
                      <clip pos="5" side="tl" part="lemq"/>
                    </lu>
                  </chunk>
                </out>
                <call-macro n="f_bcond">
                  <with-param pos="1"/>
                  <with-param pos="2"/>
                </call-macro>
                <call-macro n="f_bcond">
                  <with-param pos="2"/>
                  <with-param pos="3"/>
                </call-macro>
              </when>
              <otherwise>
                <out>
                  <chunk name="pro_aux_pp" case="caseFirstWord">
                    <tags>
                      <tag>
                        <lit-tag v="SV"/>
                      </tag>
                      <tag>
                        <clip pos="5" side="tl" part="a_verb"/>
                      </tag>
                      <tag>
                        <clip pos="3" side="tl" part="temps"/>
                      </tag>
                      <tag>
                        <clip pos="3" side="tl" part="pers"/>
                      </tag>
                      <tag>
                        <clip pos="3" side="tl" part="nbr"/>
                      </tag>
                      <tag>
                        <var n="tipusverb"/>
                      </tag>
                    </tags>
                    <lu>
                      <clip pos="2" side="tl" part="whole"/>
                    </lu>
                    <b pos="1"/>
                    <lu>
                      <clip pos="3" side="tl" part="lem"/>
                      <clip pos="3" side="tl" part="a_verb"/>
                      <clip pos="3" side="tl" part="temps"/>
                      <clip pos="3" side="tl" part="pers"/>
                      <clip pos="3" side="tl" part="gen"/>
                      <clip pos="3" side="tl" part="nbr"/>
                      <clip pos="3" side="tl" part="lemq"/>
                    </lu>
                    <b pos="4"/>
                    <lu>
                      <clip pos="5" side="tl" part="lemh"/>
                      <clip pos="5" side="tl" part="a_pp"/>
                      <clip pos="5" side="tl" part="lemq"/>
                    </lu>
                  </chunk>
                </out>
              </otherwise>
            </choose>
          </when>
          <otherwise>
            <choose>
              <when>
                <test>
                  <or>
                    <equal caseless="yes">
                      <clip pos="2" side="sl" part="lem"/>
                      <lit v="en"/>
                    </equal>
                    <equal caseless="yes">
                      <clip pos="2" side="sl" part="lem"/>
                      <lit v="y"/>
                    </equal>
                  </or>
                </test>
                <out>
                  <chunk name="pro_aux_pp" case="caseFirstWord">
                    <tags>
                      <tag>
                        <lit-tag v="SV"/>
                      </tag>
                      <tag>
                        <clip pos="5" side="tl" part="a_verb"/>
                      </tag>
                      <tag>
                        <clip pos="3" side="tl" part="temps"/>
                      </tag>
                      <tag>
                        <clip pos="3" side="tl" part="pers"/>
                      </tag>
                      <tag>
                        <clip pos="3" side="tl" part="nbr"/>
                      </tag>
                      <tag>
                        <var n="tipusverb"/>
                      </tag>
                    </tags>
                    <lu>
                      <clip pos="1" side="tl" part="whole"/>
                    </lu>
                    <b pos="1"/>
                    <lu>
                      <clip pos="3" side="tl" part="lem"/>
                      <clip pos="3" side="tl" part="a_verb"/>
                      <clip pos="3" side="tl" part="temps"/>
                      <clip pos="3" side="tl" part="pers"/>
                      <clip pos="3" side="tl" part="gen"/>
                      <clip pos="3" side="tl" part="nbr"/>
                      <clip pos="3" side="tl" part="lemq"/>
                    </lu>
                    <b pos="4"/>
                    <lu>
                      <clip pos="5" side="tl" part="lemh"/>
                      <clip pos="5" side="tl" part="a_pp"/>
                      <clip pos="5" side="tl" part="lemq"/>
                    </lu>
                  </chunk>
                </out>
              </when>
              <otherwise>
                <out>
                  <chunk name="pro_pro_verb" case="caseFirstWord">
                    <tags>
                      <tag>
                        <lit-tag v="SV"/>
                      </tag>
                      <tag>
                        <clip pos="5" side="tl" part="a_verb"/>
                      </tag>
                      <tag>
                        <clip pos="3" side="tl" part="temps"/>
                      </tag>
                      <tag>
                        <clip pos="3" side="tl" part="pers"/>
                      </tag>
                      <tag>
                        <clip pos="3" side="tl" part="nbr"/>
                      </tag>
                      <tag>
                        <var n="tipusverb"/>
                      </tag>
                    </tags>
                    <lu>
                      <clip pos="1" side="tl" part="whole"/>
                    </lu>
                    <b pos="1"/>
                    <lu>
                      <clip pos="2" side="tl" part="whole"/>
                    </lu>
                    <b pos="2"/>
                    <lu>
                      <clip pos="3" side="tl" part="lem"/>
                      <clip pos="3" side="tl" part="a_verb"/>
                      <clip pos="3" side="tl" part="temps"/>
                      <clip pos="3" side="tl" part="pers"/>
                      <clip pos="3" side="tl" part="gen"/>
                      <clip pos="3" side="tl" part="nbr" link-to="5"/>
                      <clip pos="3" side="tl" part="lemq"/>
                    </lu>
                    <b pos="4"/>
                    <lu>
                      <clip pos="5" side="tl" part="lemh"/>
                      <clip pos="5" side="tl" part="a_pp"/>
                      <clip pos="5" side="tl" part="lemq"/>
                    </lu>
                  </chunk>
                </out>
              </otherwise>
            </choose>
          </otherwise>
        </choose>
        <let>
          <var n="caseFirstWord"/>
          <lit v="aa"/>
        </let>
      </action>
    </rule>
    <rule comment="prnpro prnpro auxpers adv pp">
      <pattern>
        <pattern-item n="prnpro"/>
        <pattern-item n="prnpro"/>
        <pattern-item n="auxpers"/>
        <pattern-item n="adv"/>
        <pattern-item n="pp"/>
      </pattern>
      <action>
        <call-macro n="f_concord1">
          <with-param pos="1"/>
        </call-macro>
        <call-macro n="f_concord1">
          <with-param pos="2"/>
        </call-macro>
        <call-macro n="comprova_auxiliar_ref">
          <with-param pos="3"/>
          <with-param pos="5"/>
          <with-param pos="1"/>
        </call-macro>
        <call-macro n="tipus_verb">
          <with-param pos="5"/>
        </call-macro>
        <call-macro n="f_ppres">
          <with-param pos="3"/>
        </call-macro>
        <call-macro n="firstWord">
          <with-param pos="1"/>
        </call-macro>
        <choose>
          <when>
            <test>
              <equal caseless="yes">
                <clip pos="1" side="sl" part="lem"/>
                <lit v="en"/>
              </equal>
            </test>
            <choose>
              <when>
                <test>
                  <equal caseless="yes">
                    <clip pos="2" side="sl" part="lem"/>
                    <lit v="y"/>
                  </equal>
                </test>
                <out>
                  <chunk name="aux_pp" case="caseFirstWord">
                    <tags>
                      <tag>
                        <lit-tag v="SV"/>
                      </tag>
                      <tag>
                        <clip pos="5" side="tl" part="a_verb"/>
                      </tag>
                      <tag>
                        <clip pos="3" side="tl" part="temps"/>
                      </tag>
                      <tag>
                        <clip pos="3" side="tl" part="pers"/>
                      </tag>
                      <tag>
                        <clip pos="2" side="tl" part="gen"/>
                      </tag>
                      <tag>
                        <clip pos="3" side="tl" part="nbr"/>
                      </tag>
                      <tag>
                        <var n="tipusverb"/>
                      </tag>
                    </tags>
                    <lu>
                      <clip pos="3" side="tl" part="lem"/>
                      <clip pos="3" side="tl" part="a_verb"/>
                      <clip pos="3" side="tl" part="temps"/>
                      <clip pos="3" side="tl" part="pers"/>
                      <clip pos="3" side="tl" part="gen"/>
                      <clip pos="3" side="tl" part="nbr" link-to="5"/>
                    </lu>
                    <b pos="3"/>
                    <lu>
                      <clip pos="5" side="tl" part="lemh"/>
                      <clip pos="5" side="tl" part="a_pp"/>
                      <clip pos="5" side="tl" part="lemq"/>
                    </lu>
                  </chunk>
                </out>
                <call-macro n="f_bcond">
                  <with-param pos="1"/>
                  <with-param pos="2"/>
                </call-macro>
                <call-macro n="f_bcond">
                  <with-param pos="2"/>
                  <with-param pos="3"/>
                </call-macro>
              </when>
              <otherwise>
                <out>
                  <chunk name="pro_aux_pp" case="caseFirstWord">
                    <tags>
                      <tag>
                        <lit-tag v="SV"/>
                      </tag>
                      <tag>
                        <clip pos="4" side="tl" part="a_verb"/>
                      </tag>
                      <tag>
                        <clip pos="3" side="tl" part="temps"/>
                      </tag>
                      <tag>
                        <clip pos="3" side="tl" part="pers"/>
                      </tag>
                      <tag>
                        <clip pos="3" side="tl" part="nbr"/>
                      </tag>
                      <tag>
                        <var n="tipusverb"/>
                      </tag>
                    </tags>
                    <lu>
                      <clip pos="2" side="tl" part="whole"/>
                    </lu>
                    <b pos="1"/>
                    <lu>
                      <clip pos="3" side="tl" part="lem"/>
                      <clip pos="3" side="tl" part="a_verb"/>
                      <clip pos="3" side="tl" part="temps"/>
                      <clip pos="3" side="tl" part="pers"/>
                      <clip pos="3" side="tl" part="gen"/>
                      <clip pos="3" side="tl" part="nbr" link-to="5"/>
                    </lu>
                    <b pos="3"/>
                    <lu>
                      <clip pos="5" side="tl" part="lemh"/>
                      <clip pos="5" side="tl" part="a_pp"/>
                      <clip pos="5" side="tl" part="lemq"/>
                    </lu>
                  </chunk>
                </out>
              </otherwise>
            </choose>
          </when>
          <otherwise>
            <choose>
              <when>
                <test>
                  <or>
                    <equal caseless="yes">
                      <clip pos="2" side="sl" part="lem"/>
                      <lit v="en"/>
                    </equal>
                    <equal caseless="yes">
                      <clip pos="2" side="sl" part="lem"/>
                      <lit v="y"/>
                    </equal>
                  </or>
                </test>
                <out>
                  <chunk name="pro_aux_pp" case="caseFirstWord">
                    <tags>
                      <tag>
                        <lit-tag v="SV"/>
                      </tag>
                      <tag>
                        <clip pos="5" side="tl" part="a_verb"/>
                      </tag>
                      <tag>
                        <clip pos="3" side="tl" part="temps"/>
                      </tag>
                      <tag>
                        <clip pos="3" side="tl" part="pers"/>
                      </tag>
                      <tag>
                        <clip pos="3" side="tl" part="nbr"/>
                      </tag>
                      <tag>
                        <var n="tipusverb"/>
                      </tag>
                    </tags>
                    <lu>
                      <clip pos="1" side="tl" part="whole"/>
                    </lu>
                    <b pos="1"/>
                    <lu>
                      <clip pos="3" side="tl" part="lem"/>
                      <clip pos="3" side="tl" part="a_verb"/>
                      <clip pos="3" side="tl" part="temps"/>
                      <clip pos="3" side="tl" part="pers"/>
                      <clip pos="3" side="tl" part="gen"/>
                      <clip pos="3" side="tl" part="nbr" link-to="5"/>
                    </lu>
                    <b pos="3"/>
                    <lu>
                      <clip pos="5" side="tl" part="lemh"/>
                      <clip pos="5" side="tl" part="a_pp"/>
                      <clip pos="5" side="tl" part="lemq"/>
                    </lu>
                  </chunk>
                </out>
              </when>
              <otherwise>
                <out>
                  <chunk name="pro_pro_aux_pp" case="caseFirstWord">
                    <tags>
                      <tag>
                        <lit-tag v="SV"/>
                      </tag>
                      <tag>
                        <clip pos="5" side="tl" part="a_verb"/>
                      </tag>
                      <tag>
                        <clip pos="3" side="tl" part="temps"/>
                      </tag>
                      <tag>
                        <clip pos="3" side="tl" part="pers"/>
                      </tag>
                      <tag>
                        <clip pos="3" side="tl" part="nbr"/>
                      </tag>
                      <tag>
                        <var n="tipusverb"/>
                      </tag>
                    </tags>
                    <lu>
                      <clip pos="1" side="tl" part="whole"/>
                    </lu>
                    <b pos="1"/>
                    <lu>
                      <clip pos="2" side="tl" part="whole"/>
                    </lu>
                    <b pos="2"/>
                    <lu>
                      <clip pos="3" side="tl" part="lem"/>
                      <clip pos="3" side="tl" part="a_verb"/>
                      <clip pos="3" side="tl" part="temps"/>
                      <clip pos="3" side="tl" part="pers"/>
                      <clip pos="3" side="tl" part="gen"/>
                      <clip pos="3" side="tl" part="nbr" link-to="5"/>
                    </lu>
                    <b pos="3"/>
                    <lu>
                      <clip pos="5" side="tl" part="lemh"/>
                      <clip pos="5" side="tl" part="a_pp"/>
                      <clip pos="5" side="tl" part="lemq"/>
                    </lu>
                  </chunk>
                </out>
              </otherwise>
            </choose>
          </otherwise>
        </choose>
        <choose>
          <when>
            <test>
              <not>
                <equal caseless="yes">
                  <clip pos="4" side="sl" part="lem"/>
                  <lit v="pas"/>
                </equal>
              </not>
            </test>
            <out>
              <b pos="4"/>
              <chunk name="adv">
                <tags>
                  <tag>
                    <clip pos="4" side="tl" part="a_adv"/>
                  </tag>
                  <tag>
                    <clip pos="4" side="tl" part="neg"/>
                  </tag>
                </tags>
                <lu>
                  <clip pos="4" side="tl" part="lem"/>
                  <clip pos="4" side="tl" part="a_adv"/>
                </lu>
              </chunk>
            </out>
          </when>
        </choose>
        <let>
          <var n="caseFirstWord"/>
          <lit v="aa"/>
        </let>
      </action>
    </rule>
    <rule comment="prnpro prnpro auxpers-subj adv pp">
      <!--tbé falta l'"on"-->
      <pattern>
        <pattern-item n="prnpro"/>
        <pattern-item n="prnpro"/>
        <pattern-item n="auxpers"/>
        <pattern-item n="prnperssubj"/>
        <pattern-item n="adv"/>
        <pattern-item n="pp"/>
      </pattern>
      <action>
        <call-macro n="f_concord1">
          <with-param pos="1"/>
        </call-macro>
        <call-macro n="f_concord1">
          <with-param pos="2"/>
        </call-macro>
        <call-macro n="comprova_auxiliar_ref">
          <with-param pos="3"/>
          <with-param pos="6"/>
          <with-param pos="1"/>
        </call-macro>
        <call-macro n="tipus_verb">
          <with-param pos="6"/>
        </call-macro>
        <call-macro n="f_ppres">
          <with-param pos="3"/>
        </call-macro>
        <call-macro n="firstWord">
          <with-param pos="1"/>
        </call-macro>
        <choose>
          <when>
            <test>
              <equal caseless="yes">
                <clip pos="1" side="sl" part="lem"/>
                <lit v="en"/>
              </equal>
            </test>
            <choose>
              <when>
                <test>
                  <equal caseless="yes">
                    <clip pos="2" side="sl" part="lem"/>
                    <lit v="y"/>
                  </equal>
                </test>
                <out>
                  <chunk name="aux_pp" case="caseFirstWord">
                    <tags>
                      <tag>
                        <lit-tag v="SV"/>
                      </tag>
                      <tag>
                        <clip pos="5" side="tl" part="a_verb"/>
                      </tag>
                      <tag>
                        <clip pos="3" side="tl" part="temps"/>
                      </tag>
                      <tag>
                        <clip pos="3" side="tl" part="pers"/>
                      </tag>
                      <tag>
                        <clip pos="2" side="tl" part="gen"/>
                      </tag>
                      <tag>
                        <clip pos="3" side="tl" part="nbr"/>
                      </tag>
                      <tag>
                        <var n="tipusverb"/>
                      </tag>
                    </tags>
                    <lu>
                      <clip pos="3" side="tl" part="lem"/>
                      <clip pos="3" side="tl" part="a_verb"/>
                      <clip pos="3" side="tl" part="temps"/>
                      <clip pos="3" side="tl" part="pers"/>
                      <clip pos="3" side="tl" part="gen"/>
                      <clip pos="3" side="tl" part="nbr" link-to="5"/>
                    </lu>
                    <b pos="4"/>
                    <lu>
                      <clip pos="6" side="tl" part="lemh"/>
                      <clip pos="6" side="tl" part="a_pp"/>
                      <clip pos="6" side="tl" part="lemq"/>
                    </lu>
                  </chunk>
                </out>
                <call-macro n="f_bcond">
                  <with-param pos="1"/>
                  <with-param pos="2"/>
                </call-macro>
                <call-macro n="f_bcond">
                  <with-param pos="2"/>
                  <with-param pos="3"/>
                </call-macro>
              </when>
              <otherwise>
                <out>
                  <chunk name="pro_aux_pp" case="caseFirstWord">
                    <tags>
                      <tag>
                        <lit-tag v="SV"/>
                      </tag>
                      <tag>
                        <clip pos="6" side="tl" part="a_verb"/>
                      </tag>
                      <tag>
                        <clip pos="3" side="tl" part="temps"/>
                      </tag>
                      <tag>
                        <clip pos="3" side="tl" part="pers"/>
                      </tag>
                      <tag>
                        <clip pos="3" side="tl" part="nbr"/>
                      </tag>
                      <tag>
                        <var n="tipusverb"/>
                      </tag>
                    </tags>
                    <lu>
                      <clip pos="2" side="tl" part="whole"/>
                    </lu>
                    <b pos="1"/>
                    <lu>
                      <clip pos="3" side="tl" part="lem"/>
                      <clip pos="3" side="tl" part="a_verb"/>
                      <clip pos="3" side="tl" part="temps"/>
                      <clip pos="3" side="tl" part="pers"/>
                      <clip pos="3" side="tl" part="gen"/>
                      <clip pos="3" side="tl" part="nbr" link-to="5"/>
                    </lu>
                    <b pos="4"/>
                    <lu>
                      <clip pos="6" side="tl" part="lemh"/>
                      <clip pos="6" side="tl" part="a_pp"/>
                      <clip pos="6" side="tl" part="lemq"/>
                    </lu>
                  </chunk>
                </out>
              </otherwise>
            </choose>
          </when>
          <otherwise>
            <choose>
              <when>
                <test>
                  <or>
                    <equal caseless="yes">
                      <clip pos="2" side="sl" part="lem"/>
                      <lit v="en"/>
                    </equal>
                    <equal caseless="yes">
                      <clip pos="2" side="sl" part="lem"/>
                      <lit v="y"/>
                    </equal>
                  </or>
                </test>
                <out>
                  <chunk name="pro_aux_pp" case="caseFirstWord">
                    <tags>
                      <tag>
                        <lit-tag v="SV"/>
                      </tag>
                      <tag>
                        <clip pos="6" side="tl" part="a_verb"/>
                      </tag>
                      <tag>
                        <clip pos="3" side="tl" part="temps"/>
                      </tag>
                      <tag>
                        <clip pos="3" side="tl" part="pers"/>
                      </tag>
                      <tag>
                        <clip pos="3" side="tl" part="nbr"/>
                      </tag>
                      <tag>
                        <var n="tipusverb"/>
                      </tag>
                    </tags>
                    <lu>
                      <clip pos="1" side="tl" part="whole"/>
                    </lu>
                    <b pos="1"/>
                    <lu>
                      <clip pos="3" side="tl" part="lem"/>
                      <clip pos="3" side="tl" part="a_verb"/>
                      <clip pos="3" side="tl" part="temps"/>
                      <clip pos="3" side="tl" part="pers"/>
                      <clip pos="3" side="tl" part="gen"/>
                      <clip pos="3" side="tl" part="nbr" link-to="5"/>
                    </lu>
                    <b pos="4"/>
                    <lu>
                      <clip pos="6" side="tl" part="lemh"/>
                      <clip pos="6" side="tl" part="a_pp"/>
                      <clip pos="6" side="tl" part="lemq"/>
                    </lu>
                  </chunk>
                </out>
              </when>
              <otherwise>
                <out>
                  <chunk name="pro_pro_aux_pp" case="caseFirstWord">
                    <tags>
                      <tag>
                        <lit-tag v="SV"/>
                      </tag>
                      <tag>
                        <clip pos="6" side="tl" part="a_verb"/>
                      </tag>
                      <tag>
                        <clip pos="3" side="tl" part="temps"/>
                      </tag>
                      <tag>
                        <clip pos="3" side="tl" part="pers"/>
                      </tag>
                      <tag>
                        <clip pos="3" side="tl" part="nbr"/>
                      </tag>
                      <tag>
                        <var n="tipusverb"/>
                      </tag>
                    </tags>
                    <lu>
                      <clip pos="1" side="tl" part="whole"/>
                    </lu>
                    <b pos="1"/>
                    <lu>
                      <clip pos="2" side="tl" part="whole"/>
                    </lu>
                    <b pos="2"/>
                    <lu>
                      <clip pos="3" side="tl" part="lem"/>
                      <clip pos="3" side="tl" part="a_verb"/>
                      <clip pos="3" side="tl" part="temps"/>
                      <clip pos="3" side="tl" part="pers"/>
                      <clip pos="3" side="tl" part="gen"/>
                      <clip pos="3" side="tl" part="nbr" link-to="5"/>
                    </lu>
                    <b pos="4"/>
                    <lu>
                      <clip pos="6" side="tl" part="lemh"/>
                      <clip pos="6" side="tl" part="a_pp"/>
                      <clip pos="6" side="tl" part="lemq"/>
                    </lu>
                  </chunk>
                </out>
              </otherwise>
            </choose>
          </otherwise>
        </choose>
        <choose>
          <when>
            <test>
              <not>
                <equal caseless="yes">
                  <clip pos="5" side="sl" part="lem"/>
                  <lit v="pas"/>
                </equal>
              </not>
            </test>
            <out>
              <b pos="5"/>
              <chunk name="adv">
                <tags>
                  <tag>
                    <clip pos="5" side="tl" part="a_adv"/>
                  </tag>
                  <tag>
                    <clip pos="5" side="tl" part="neg"/>
                  </tag>
                </tags>
                <lu>
                  <clip pos="5" side="tl" part="lem"/>
                  <clip pos="5" side="tl" part="a_adv"/>
                </lu>
              </chunk>
            </out>
          </when>
        </choose>
        <let>
          <var n="caseFirstWord"/>
          <lit v="aa"/>
        </let>
      </action>
    </rule>
    <rule comment="prnpro auxinf pp">
      <pattern>
        <pattern-item n="prnpro"/>
        <pattern-item n="auxinf"/>
        <pattern-item n="pp"/>
      </pattern>
      <action>
        <call-macro n="f_concord1">
          <with-param pos="1"/>
        </call-macro>
        <call-macro n="tipus_verb">
          <with-param pos="3"/>
        </call-macro>
        <call-macro n="firstWord">
          <with-param pos="1"/>
        </call-macro>
        <choose>
          <when>
            <test>
              <or>
                <equal caseless="yes">
                  <clip pos="1" side="sl" part="lem"/>
                  <lit v="en"/>
                </equal>
                <equal caseless="yes">
                  <clip pos="1" side="sl" part="lem"/>
                  <lit v="y"/>
                </equal>
              </or>
            </test>
            <out>
              <chunk name="auxinf_pp" case="caseFirstWord">
                <tags>
                  <tag>
                    <lit-tag v="SN"/>
                  </tag>
                  <tag>
                    <clip pos="3" side="tl" part="a_verb"/>
                  </tag>
                  <tag>
                    <clip pos="2" side="tl" part="temps"/>
                  </tag>
                  <tag>
                    <clip pos="2" side="tl" part="pers"/>
                  </tag>
                  <tag>
                    <clip pos="2" side="tl" part="nbr"/>
                  </tag>
                  <tag>
                    <var n="tipusverb"/>
                  </tag>
                </tags>
                <lu>
                  <clip pos="2" side="tl" part="lem"/>
                  <clip pos="2" side="tl" part="a_verb"/>
                  <clip pos="2" side="tl" part="temps"/>
                  <clip pos="2" side="tl" part="pers"/>
                  <clip pos="2" side="tl" part="nbr"/>
                </lu>
                <b pos="1"/>
                <lu>
                  <clip pos="3" side="tl" part="lemh"/>
                  <clip pos="3" side="tl" part="a_pp"/>
                  <clip pos="3" side="tl" part="lemq"/>
                </lu>
              </chunk>
            </out>
            <call-macro n="f_bcond">
              <with-param pos="1"/>
              <with-param pos="2"/>
            </call-macro>
          </when>
          <otherwise>
            <out>
              <chunk name="auxinf_enc_pp" case="caseFirstWord">
                <tags>
                  <tag>
                    <lit-tag v="SN"/>
                  </tag>
                  <tag>
                    <clip pos="3" side="tl" part="a_verb"/>
                  </tag>
                  <tag>
                    <clip pos="2" side="tl" part="temps"/>
                  </tag>
                  <tag>
                    <clip pos="2" side="tl" part="pers"/>
                  </tag>
                  <tag>
                    <clip pos="2" side="tl" part="nbr"/>
                  </tag>
                  <tag>
                    <var n="tipusverb"/>
                  </tag>
                </tags>
                <mlu>
                  <lu>
                    <clip pos="2" side="tl" part="lem"/>
                    <clip pos="2" side="tl" part="a_verb"/>
                    <clip pos="2" side="tl" part="temps"/>
                    <clip pos="2" side="tl" part="pers"/>
                    <clip pos="2" side="tl" part="nbr"/>
                    <clip pos="2" side="tl" part="lemq"/>
                  </lu>
                  <lu>
                    <clip pos="1" side="tl" part="lem"/>
                    <lit-tag v="prn.enc"/>
                    <clip pos="1" side="tl" part="tipoenc_pro"/>
                  </lu>
                </mlu>
                <b pos="1"/>
                <lu>
                  <clip pos="3" side="tl" part="lemh"/>
                  <clip pos="3" side="tl" part="a_pp"/>
                  <clip pos="3" side="tl" part="lemq"/>
                </lu>
              </chunk>
            </out>
            <call-macro n="f_bcond">
              <with-param pos="2"/>
              <with-param pos="3"/>
            </call-macro>
          </otherwise>
        </choose>
        <let>
          <var n="caseFirstWord"/>
          <lit v="aa"/>
        </let>
      </action>
    </rule>
    <rule comment="prnpro auxinf adv pp">
      <pattern>
        <pattern-item n="prnpro"/>
        <pattern-item n="auxinf"/>
        <pattern-item n="adv"/>
        <pattern-item n="pp"/>
      </pattern>
      <action>
        <call-macro n="f_concord1">
          <with-param pos="1"/>
        </call-macro>
        <call-macro n="tipus_verb">
          <with-param pos="4"/>
        </call-macro>
        <call-macro n="firstWord">
          <with-param pos="1"/>
        </call-macro>
        <choose>
          <when>
            <test>
              <or>
                <equal caseless="yes">
                  <clip pos="1" side="sl" part="lem"/>
                  <lit v="en"/>
                </equal>
                <equal caseless="yes">
                  <clip pos="1" side="sl" part="lem"/>
                  <lit v="y"/>
                </equal>
              </or>
            </test>
            <out>
              <chunk name="auxinf_pp" case="caseFirstWord">
                <tags>
                  <tag>
                    <lit-tag v="SN"/>
                  </tag>
                  <tag>
                    <clip pos="4" side="tl" part="a_verb"/>
                  </tag>
                  <tag>
                    <clip pos="2" side="tl" part="temps"/>
                  </tag>
                  <tag>
                    <clip pos="2" side="tl" part="pers"/>
                  </tag>
                  <tag>
                    <clip pos="2" side="tl" part="nbr"/>
                  </tag>
                  <tag>
                    <var n="tipusverb"/>
                  </tag>
                </tags>
                <lu>
                  <clip pos="2" side="tl" part="lem"/>
                  <clip pos="2" side="tl" part="a_verb"/>
                  <clip pos="2" side="tl" part="temps"/>
                  <clip pos="2" side="tl" part="pers"/>
                  <clip pos="2" side="tl" part="nbr"/>
                </lu>
                <b pos="1"/>
                <lu>
                  <clip pos="4" side="tl" part="lemh"/>
                  <clip pos="4" side="tl" part="a_pp"/>
                  <clip pos="4" side="tl" part="lemq"/>
                </lu>
              </chunk>
            </out>
            <call-macro n="f_bcond">
              <with-param pos="1"/>
              <with-param pos="2"/>
            </call-macro>
          </when>
          <otherwise>
            <out>
              <chunk name="auxinf_enc_pp" case="caseFirstWord">
                <tags>
                  <tag>
                    <lit-tag v="SN"/>
                  </tag>
                  <tag>
                    <clip pos="4" side="tl" part="a_verb"/>
                  </tag>
                  <tag>
                    <clip pos="2" side="tl" part="temps"/>
                  </tag>
                  <tag>
                    <clip pos="2" side="tl" part="pers"/>
                  </tag>
                  <tag>
                    <clip pos="2" side="tl" part="nbr"/>
                  </tag>
                  <tag>
                    <var n="tipusverb"/>
                  </tag>
                </tags>
                <mlu>
                  <lu>
                    <clip pos="2" side="tl" part="lem"/>
                    <clip pos="2" side="tl" part="a_verb"/>
                    <clip pos="2" side="tl" part="temps"/>
                    <clip pos="2" side="tl" part="pers"/>
                    <clip pos="2" side="tl" part="nbr"/>
                  </lu>
                  <lu>
                    <clip pos="1" side="tl" part="lem"/>
                    <lit-tag v="prn.enc"/>
                    <clip pos="1" side="tl" part="tipoenc_pro"/>
                  </lu>
                </mlu>
                <b pos="1"/>
                <lu>
                  <clip pos="4" side="tl" part="lemh"/>
                  <clip pos="4" side="tl" part="a_pp"/>
                  <clip pos="4" side="tl" part="lemq"/>
                </lu>
              </chunk>
            </out>
            <call-macro n="f_bcond">
              <with-param pos="2"/>
              <with-param pos="3"/>
            </call-macro>
          </otherwise>
        </choose>
        <choose>
          <when>
            <test>
              <not>
                <equal caseless="yes">
                  <clip pos="3" side="sl" part="lem"/>
                  <lit v="pas"/>
                </equal>
              </not>
            </test>
            <out>
              <b pos="3"/>
              <chunk name="adv">
                <tags>
                  <tag>
                    <clip pos="3" side="tl" part="a_adv"/>
                  </tag>
                  <tag>
                    <clip pos="3" side="tl" part="neg"/>
                  </tag>
                </tags>
                <lu>
                  <clip pos="3" side="tl" part="lem"/>
                  <clip pos="3" side="tl" part="a_adv"/>
                </lu>
              </chunk>
            </out>
          </when>
        </choose>
        <let>
          <var n="caseFirstWord"/>
          <lit v="aa"/>
        </let>
      </action>
    </rule>
    <rule comment="prnpro prnpro auxinf pp">
      <pattern>
        <pattern-item n="prnpro"/>
        <pattern-item n="prnpro"/>
        <pattern-item n="auxinf"/>
        <pattern-item n="pp"/>
      </pattern>
      <action>
        <call-macro n="f_concord1">
          <with-param pos="1"/>
        </call-macro>
        <call-macro n="f_concord1">
          <with-param pos="2"/>
        </call-macro>
        <call-macro n="tipus_verb">
          <with-param pos="4"/>
        </call-macro>
        <call-macro n="firstWord">
          <with-param pos="1"/>
        </call-macro>
        <choose>
          <when>
            <test>
              <equal caseless="yes">
                <clip pos="1" side="sl" part="lem"/>
                <lit v="en"/>
              </equal>
            </test>
            <choose>
              <when>
                <test>
                  <equal caseless="yes">
                    <clip pos="2" side="sl" part="lem"/>
                    <lit v="y"/>
                  </equal>
                </test>
                <out>
                  <chunk name="infaux_pp" case="caseFirstWord">
                    <tags>
                      <tag><lit-tag v="SN"/></tag>
                      <tag><clip pos="4" side="tl" part="a_verb"/></tag>
                      <tag><clip pos="3" side="tl" part="temps"/></tag>
                      <tag><clip pos="3" side="tl" part="pers"/></tag>
                      <tag><clip pos="3" side="tl" part="nbr"/></tag>
                      <tag><var n="tipusverb"/></tag>
                    </tags>
                    <lu>
                      <clip pos="3" side="tl" part="lem"/>
                      <clip pos="3" side="tl" part="a_verb"/>
                      <clip pos="3" side="tl" part="temps"/>
                      <clip pos="3" side="tl" part="pers"/>
                      <clip pos="3" side="tl" part="nbr"/>
                    </lu>
                    <b pos="1"/>
                    <lu>
                      <clip pos="4" side="tl" part="lemh"/>
                      <clip pos="4" side="tl" part="a_pp"/>
                      <clip pos="4" side="tl" part="lemq"/>
                    </lu>
                  </chunk>
                </out>
                <call-macro n="f_bcond">
                  <with-param pos="2"/>
                  <with-param pos="3"/>
                </call-macro>
                <call-macro n="f_bcond">
                  <with-param pos="3"/>
                  <with-param pos="4"/>
                </call-macro>
              </when>
              <otherwise>
                <out>
                  <chunk name="infaux_enc_pp" case="caseFirstWord">
                    <tags>
                      <tag><lit-tag v="SN"/></tag>
                      <tag><clip pos="4" side="tl" part="a_verb"/></tag>
                      <tag><clip pos="3" side="tl" part="temps"/></tag>
                      <tag><clip pos="3" side="tl" part="pers"/></tag>
                      <tag><clip pos="3" side="tl" part="nbr"/></tag>
                      <tag>
                        <var n="tipusverb"/>
                      </tag>
                    </tags>
                    <mlu>
                      <lu>
                        <clip pos="3" side="tl" part="lem"/>
                        <clip pos="3" side="tl" part="a_verb"/>
                        <clip pos="3" side="tl" part="temps"/>
                        <clip pos="3" side="tl" part="pers"/>
                        <clip pos="3" side="tl" part="nbr"/>
                        <clip pos="3" side="tl" part="lemq"/>
                      </lu>
                      <lu>
                        <clip pos="2" side="tl" part="lem"/>
                        <lit-tag v="prn.enc"/>
                        <clip pos="2" side="tl" part="tipoenc_pro"/>
                      </lu>
                    </mlu>
                    <b pos="1"/>
                    <lu>
                      <clip pos="4" side="tl" part="lemh"/>
                      <clip pos="4" side="tl" part="a_pp"/>
                      <clip pos="4" side="tl" part="lemq"/>
                    </lu>
                  </chunk>
                </out>
                <call-macro n="f_bcond">
                  <with-param pos="2"/>
                  <with-param pos="3"/>
                </call-macro>
                <call-macro n="f_bcond">
                  <with-param pos="3"/>
                  <with-param pos="4"/>
                </call-macro>
              </otherwise>
            </choose>
          </when>
          <otherwise>
            <choose>
              <when>
                <test>
                  <or>
                    <equal caseless="yes">
                      <clip pos="2" side="sl" part="lem"/>
                      <lit v="en"/>
                    </equal>
                    <equal caseless="yes">
                      <clip pos="2" side="sl" part="lem"/>
                      <lit v="y"/>
                    </equal>
                  </or>
                </test>
                <out>
                  <chunk name="auxinf_enc_pp" case="caseFirstWord">
                    <tags>
                      <tag><lit-tag v="SN"/></tag>
                      <tag><clip pos="4" side="tl" part="a_verb"/></tag>
                      <tag><clip pos="3" side="tl" part="temps"/></tag>
                      <tag><clip pos="3" side="tl" part="pers"/></tag>
                      <tag><clip pos="3" side="tl" part="nbr"/></tag>
                      <tag>
                        <var n="tipusverb"/>
                      </tag>
                    </tags>
                    <mlu>
                      <lu>
                        <clip pos="3" side="tl" part="lem"/>
                        <clip pos="3" side="tl" part="a_verb"/>
                        <clip pos="3" side="tl" part="temps"/>
                        <clip pos="3" side="tl" part="pers"/>
                        <clip pos="3" side="tl" part="nbr"/>
                        <clip pos="3" side="tl" part="lemq"/>
                      </lu>
                      <lu>
                        <clip pos="1" side="tl" part="lem"/>
                        <lit-tag v="prn.enc"/>
                        <clip pos="1" side="tl" part="tipoenc_pro"/>
                      </lu>
                    </mlu>
                    <b pos="1"/>
                    <lu>
                      <clip pos="4" side="tl" part="lemh"/>
                      <clip pos="4" side="tl" part="a_pp"/>
                      <clip pos="4" side="tl" part="lemq"/>
                    </lu>
                  </chunk>
                </out>
                <call-macro n="f_bcond">
                  <with-param pos="2"/>
                  <with-param pos="3"/>
                </call-macro>
                <call-macro n="f_bcond">
                  <with-param pos="3"/>
                  <with-param pos="4"/>
                </call-macro>
              </when>
              <otherwise>
                <out>
                  <chunk name="auxinf_enc_enc_pp" case="caseFirstWord">
                    <tags>
                      <tag><lit-tag v="SN"/></tag>
                      <tag><clip pos="4" side="tl" part="a_verb"/></tag>
                      <tag><clip pos="3" side="tl" part="temps"/></tag>
                      <tag><clip pos="3" side="tl" part="pers"/></tag>
                      <tag><clip pos="3" side="tl" part="nbr"/></tag>
                      <tag><var n="tipusverb"/></tag>
                    </tags>
                    <mlu>
                      <lu>
                        <clip pos="3" side="tl" part="lem"/>
                        <clip pos="3" side="tl" part="a_verb"/>
                        <clip pos="3" side="tl" part="temps"/>
                        <clip pos="3" side="tl" part="pers"/>
                        <clip pos="3" side="tl" part="nbr"/>
                        <clip pos="3" side="tl" part="lemq"/>
                      </lu>
                      <lu>
                        <clip pos="1" side="tl" part="lem"/>
                        <lit-tag v="prn.enc"/>
                        <clip pos="1" side="tl" part="tipoenc_pro"/>
                      </lu>
                      <lu>
                        <clip pos="2" side="tl" part="lem"/>
                        <lit-tag v="prn.enc"/>
                        <clip pos="2" side="tl" part="tipoenc_pro"/>
                      </lu>
                    </mlu>
                    <b pos="1"/>
                    <lu>
                      <clip pos="4" side="tl" part="lemh"/>
                      <clip pos="4" side="tl" part="a_pp"/>
                      <clip pos="4" side="tl" part="lemq"/>
                    </lu>
                  </chunk>
                </out>
                <call-macro n="f_bcond">
                  <with-param pos="2"/>
                  <with-param pos="3"/>
                </call-macro>
                <call-macro n="f_bcond">
                  <with-param pos="3"/>
                  <with-param pos="4"/>
                </call-macro>
              </otherwise>
            </choose>
          </otherwise>
        </choose>
        <let>
          <var n="caseFirstWord"/>
          <lit v="aa"/>
        </let>
      </action>
    </rule>
    <rule comment="prnpro prnpro auxinf adv pp">
      <pattern>
        <pattern-item n="prnpro"/>
        <pattern-item n="prnpro"/>
        <pattern-item n="auxinf"/>
        <pattern-item n="adv"/>
        <pattern-item n="pp"/>
      </pattern>
      <action>
        <call-macro n="f_concord1">
          <with-param pos="1"/>
        </call-macro>
        <call-macro n="f_concord1">
          <with-param pos="2"/>
        </call-macro>
        <call-macro n="tipus_verb">
          <with-param pos="5"/>
        </call-macro>
        <call-macro n="firstWord">
          <with-param pos="1"/>
        </call-macro>
        <choose>
          <when>
            <test>
              <equal caseless="yes">
                <clip pos="1" side="sl" part="lem"/>
                <lit v="en"/>
              </equal>
            </test>
            <choose>
              <when>
                <test>
                  <equal caseless="yes">
                    <clip pos="2" side="sl" part="lem"/>
                    <lit v="y"/>
                  </equal>
                </test>
                <out>
                  <chunk name="infaux_pp" case="caseFirstWord">
                    <tags>
                      <tag>
                        <lit-tag v="SN"/>
                      </tag>
                      <tag>
                        <clip pos="5" side="tl" part="a_verb"/>
                      </tag>
                      <tag>
                        <clip pos="3" side="tl" part="temps"/>
                      </tag>
                      <tag>
                        <clip pos="3" side="tl" part="pers"/>
                      </tag>
                      <tag>
                        <clip pos="3" side="tl" part="nbr"/>
                      </tag>
                      <tag>
                        <var n="tipusverb"/>
                      </tag>
                    </tags>
                    <lu>
                      <clip pos="3" side="tl" part="lem"/>
                      <clip pos="3" side="tl" part="a_verb"/>
                      <clip pos="3" side="tl" part="temps"/>
                      <clip pos="3" side="tl" part="pers"/>
                      <clip pos="3" side="tl" part="nbr"/>
                      <clip pos="3" side="tl" part="lemq"/>
                    </lu>
                    <b pos="1"/>
                    <lu>
                      <clip pos="5" side="tl" part="lemh"/>
                      <clip pos="5" side="tl" part="a_pp"/>
                      <clip pos="5" side="tl" part="lemq"/>
                    </lu>
                  </chunk>
                </out>
                <call-macro n="f_bcond">
                  <with-param pos="2"/>
                  <with-param pos="3"/>
                </call-macro>
                <call-macro n="f_bcond">
                  <with-param pos="3"/>
                  <with-param pos="4"/>
                </call-macro>
              </when>
              <otherwise>
                <out>
                  <chunk name="infaux_enc_pp" case="caseFirstWord">
                    <tags>
                      <tag>
                        <lit-tag v="SN"/>
                      </tag>
                      <tag>
                        <clip pos="5" side="tl" part="a_verb"/>
                      </tag>
                      <tag>
                        <clip pos="3" side="tl" part="temps"/>
                      </tag>
                      <tag>
                        <clip pos="3" side="tl" part="pers"/>
                      </tag>
                      <tag>
                        <clip pos="3" side="tl" part="nbr"/>
                      </tag>
                      <tag>
                        <var n="tipusverb"/>
                      </tag>
                    </tags>
                    <mlu>
                      <lu>
                        <clip pos="3" side="tl" part="lem"/>
                        <clip pos="3" side="tl" part="a_verb"/>
                        <clip pos="3" side="tl" part="temps"/>
                        <clip pos="3" side="tl" part="pers"/>
                        <clip pos="3" side="tl" part="nbr"/>
                      </lu>
                      <lu>
                        <clip pos="2" side="tl" part="lem"/>
                        <lit-tag v="prn.enc"/>
                        <clip pos="2" side="tl" part="tipoenc_pro"/>
                      </lu>
                    </mlu>
                    <b pos="1"/>
                    <lu>
                      <clip pos="5" side="tl" part="lemh"/>
                      <clip pos="5" side="tl" part="a_pp"/>
                      <clip pos="5" side="tl" part="lemq"/>
                    </lu>
                  </chunk>
                </out>
                <call-macro n="f_bcond">
                  <with-param pos="2"/>
                  <with-param pos="3"/>
                </call-macro>
                <call-macro n="f_bcond">
                  <with-param pos="3"/>
                  <with-param pos="4"/>
                </call-macro>
              </otherwise>
            </choose>
          </when>
          <otherwise>
            <choose>
              <when>
                <test>
                  <or>
                    <equal caseless="yes">
                      <clip pos="2" side="sl" part="lem"/>
                      <lit v="en"/>
                    </equal>
                    <equal caseless="yes">
                      <clip pos="2" side="sl" part="lem"/>
                      <lit v="y"/>
                    </equal>
                  </or>
                </test>
                <out>
                  <chunk name="auxinf_enc_pp" case="caseFirstWord">
                    <tags>
                      <tag><lit-tag v="SN"/></tag>
                      <tag><clip pos="5" side="tl" part="a_verb"/></tag>
                      <tag><clip pos="3" side="tl" part="temps"/></tag>
                      <tag><clip pos="3" side="tl" part="pers"/></tag>
                      <tag><clip pos="3" side="tl" part="nbr"/></tag>
                      <tag><var n="tipusverb"/></tag>
                    </tags>
                    <mlu>
                      <lu>
                        <clip pos="3" side="tl" part="lem"/>
                        <clip pos="3" side="tl" part="a_verb"/>
                        <clip pos="3" side="tl" part="temps"/>
                        <clip pos="3" side="tl" part="pers"/>
                        <clip pos="3" side="tl" part="nbr"/>
                      </lu>
                      <lu>
                        <clip pos="1" side="tl" part="lem"/>
                        <lit-tag v="prn.enc"/>
                        <clip pos="1" side="tl" part="tipoenc_pro"/>
                      </lu>
                    </mlu>
                    <b pos="1"/>
                    <lu>
                      <clip pos="5" side="tl" part="lemh"/>
                      <clip pos="5" side="tl" part="a_pp"/>
                      <clip pos="5" side="tl" part="lemq"/>
                    </lu>
                  </chunk>
                </out>
                <call-macro n="f_bcond">
                  <with-param pos="2"/>
                  <with-param pos="3"/>
                </call-macro>
                <call-macro n="f_bcond">
                  <with-param pos="3"/>
                  <with-param pos="4"/>
                </call-macro>
              </when>
              <otherwise>
                <out>
                  <chunk name="auxinf_enc_enc_pp" case="caseFirstWord">
                    <tags>
                      <tag><lit-tag v="SN"/></tag>
                      <tag><clip pos="5" side="tl" part="a_verb"/></tag>
                      <tag><clip pos="3" side="tl" part="temps"/></tag>
                      <tag><clip pos="3" side="tl" part="pers"/></tag>
                      <tag><clip pos="3" side="tl" part="nbr"/></tag>
                      <tag><var n="tipusverb"/></tag>
                    </tags>
                    <mlu>
                      <lu>
                        <clip pos="3" side="tl" part="lem"/>
                        <clip pos="3" side="tl" part="a_verb"/>
                        <clip pos="3" side="tl" part="temps"/>
                        <clip pos="3" side="tl" part="pers"/>
                        <clip pos="3" side="tl" part="nbr"/>
                      </lu>
                      <lu>
                        <clip pos="1" side="tl" part="lem"/>
                        <lit-tag v="prn.enc"/>
                        <clip pos="1" side="tl" part="tipoenc_pro"/>
                      </lu>
                      <lu>
                        <clip pos="2" side="tl" part="lem"/>
                        <lit-tag v="prn.enc"/>
                        <clip pos="2" side="tl" part="tipoenc_pro"/>
                      </lu>
                    </mlu>
                    <b pos="1"/>
                    <lu>
                      <clip pos="5" side="tl" part="lemh"/>
                      <clip pos="5" side="tl" part="a_pp"/>
                      <clip pos="5" side="tl" part="lemq"/>
                    </lu>
                  </chunk>
                </out>
                <call-macro n="f_bcond">
                  <with-param pos="2"/>
                  <with-param pos="3"/>
                </call-macro>
                <call-macro n="f_bcond">
                  <with-param pos="3"/>
                  <with-param pos="4"/>
                </call-macro>
              </otherwise>
            </choose>
          </otherwise>
        </choose>
        <choose>
          <when>
            <test>
              <not>
                <equal caseless="yes">
                  <clip pos="4" side="sl" part="lem"/>
                  <lit v="pas"/>
                </equal>
              </not>
            </test>
            <out>
              <b pos="4"/>
              <chunk name="adv">
                <tags>
                  <tag>
                    <clip pos="4" side="tl" part="a_adv"/>
                  </tag>
                  <tag>
                    <clip pos="4" side="tl" part="neg"/>
                  </tag>
                </tags>
                <lu>
                  <clip pos="4" side="tl" part="lem"/>
                  <clip pos="4" side="tl" part="a_adv"/>
                </lu>
              </chunk>
            </out>
          </when>
        </choose>
        <let>
          <var n="caseFirstWord"/>
          <lit v="aa"/>
        </let>
      </action>
    </rule>
    <!--************************************ ALTRES ************************************************ -->
    <rule comment="ADV">
      <pattern>
        <pattern-item n="adv"/>
      </pattern>
      <action>
        <call-macro n="firstWord">
          <with-param pos="1"/>
        </call-macro>
        <choose>
          <when>
            <test>
              <equal caseless="no">
                <clip pos="1" side="sl" part="lem"/>
                <lit v="pas"/>
              </equal>
            </test>
	    <!--  <call-macro n="f_bcondfirst">
		 <with-param pos="1"/>
		 </call-macro>-->
          </when>
          <when>
            <test>
              <equal caseless="no">
                <clip pos="1" side="sl" part="lem"/>
                <lit v="Pas"/>
              </equal>
            </test>
            <out>
              <chunk name="prn" case="caseFirstWord">
                <tags>
                  <tag><lit-tag v="SN"/></tag>
                  <tag><lit-tag v="tn"/></tag>
                  <tag><lit-tag v="nt"/></tag>
                  <tag><lit-tag v="sg"/></tag>
                </tags>
                <lu>
                  <lit v="none"/>
                  <lit-tag v="prn"/>
                  <lit-tag v="tn"/>
                  <lit-tag v="nt"/>
                  <lit-tag v="sg"/>
                </lu>
              </chunk>
            </out>
          </when>
          <otherwise>
            <choose>
              <when>
                <test>
                  <equal caseless="yes">
                    <clip pos="1" side="sl" part="lem"/>
                    <lit v="ne"/>
                  </equal>
                </test>
                <out>
                  <chunk name="ne" case="caseFirstWord">
                    <tags>
                      <tag>
                        <clip pos="1" side="tl" part="a_adv"/>
                      </tag>
                    </tags>
                    <lu>
                      <clip pos="1" side="tl" part="lem"/>
                      <clip pos="1" side="tl" part="a_adv"/>
                    </lu>
                  </chunk>
                </out>
              </when>
              <otherwise>
                <out>
                  <chunk name="adv" case="caseFirstWord">
                    <tags>
                      <tag>
                        <clip pos="1" side="tl" part="a_adv"/>
                      </tag>
                    </tags>
                    <lu>
                      <clip pos="1" side="tl" part="lem"/>
                      <clip pos="1" side="tl" part="a_adv"/>
                    </lu>
                  </chunk>
                </out>
              </otherwise>
            </choose>
          </otherwise>
        </choose>
        <let>
          <var n="caseFirstWord"/>
          <lit v="aa"/>
        </let>
      </action>
    </rule>
    <rule comment="PRN personal que pot ser subjecte">
      <pattern>
        <pattern-item n="prnperssubj"/>
      </pattern>
      <action>
        <call-macro n="f_concord1">
          <with-param pos="1"/>
        </call-macro>
        <call-macro n="firstWord">
          <with-param pos="1"/>
        </call-macro>
        <out>
          <chunk name="prnperssubj" case="caseFirstWord">
            <tags>
              <tag><lit-tag v="SN"/></tag>
              <tag><clip pos="1" side="sl" part="tipus_prn"/></tag>
              <tag><clip pos="1" side="tl" part="pers"/></tag>
              <tag><clip pos="1" side="tl" part="gen"/></tag>
              <tag><clip pos="1" side="tl" part="nbr"/></tag>
            </tags>
            <lu>
              <clip pos="1" side="tl" part="lem"/>
              <clip pos="1" side="tl" part="a_prn"/>
              <clip pos="1" side="tl" part="tipus_prn"/>
              <clip pos="1" side="tl" part="pers"/>
              <clip pos="1" side="tl" part="gen" link-to="4"/>
              <clip pos="1" side="tl" part="nbr" link-to="5"/>
            </lu>
          </chunk>
        </out>
        <let>
          <var n="caseFirstWord"/>
          <lit v="aa"/>
        </let>
      </action>
    </rule>
    <rule comment="PRN no personal que pot ser subjecte">
      <pattern>
        <pattern-item n="prnsubj"/>
      </pattern>
      <action>
        <call-macro n="f_concord1">
          <with-param pos="1"/>
        </call-macro>
        <call-macro n="firstWord">
          <with-param pos="1"/>
        </call-macro>
        <out>
          <chunk name="prnsubj" case="caseFirstWord">
            <tags>
              <tag><lit-tag v="SN"/></tag>
              <tag><clip pos="1" side="tl" part="tipus_prn"/></tag>
              <tag><clip pos="1" side="tl" part="pers"/></tag>
              <tag><clip pos="1" side="tl" part="gen"/></tag>
              <tag><clip pos="1" side="tl" part="nbr"/></tag>
            </tags>
            <lu>
              <clip pos="1" side="tl" part="lem"/>
              <clip pos="1" side="tl" part="a_prn"/>
              <clip pos="1" side="tl" part="tipus_prn"/>
              <clip pos="1" side="tl" part="pers"/>
              <clip pos="1" side="tl" part="gen"/>
              <clip pos="1" side="tl" part="nbr"/>
            </lu>
          </chunk>
        </out>
        <let>
          <var n="caseFirstWord"/>
          <lit v="aa"/>
        </let>
      </action>
    </rule>
    <rule comment="PRNITG">
      <pattern>
        <pattern-item n="prnitg"/>
      </pattern>
      <action>
        <call-macro n="f_concord1">
          <with-param pos="1"/>
        </call-macro>
        <call-macro n="firstWord">
          <with-param pos="1"/>
        </call-macro>
        <out>
          <chunk name="prnitg" case="caseFirstWord">
            <tags>
              <tag><lit-tag v="SN"/></tag>
              <tag><clip pos="1" side="tl" part="tipus_prn"/></tag>
              <tag><clip pos="1" side="sl" part="gen"/></tag>
              <tag><clip pos="1" side="tl" part="nbr"/></tag>
            </tags>
            <lu>
              <clip pos="1" side="tl" part="lem"/>
              <clip pos="1" side="tl" part="a_prn"/>
              <clip pos="1" side="tl" part="tipus_prn"/>
              <clip pos="1" side="tl" part="nbr"/>
            </lu>
          </chunk>
        </out>
        <let>
          <var n="caseFirstWord"/>
          <lit v="aa"/>
        </let>
      </action>
    </rule>
    <rule comment="PRNREL">
      <pattern>
        <pattern-item n="rel"/>
      </pattern>
      <action>
        <call-macro n="f_concord1">
          <with-param pos="1"/>
        </call-macro>
        <call-macro n="firstWord">
          <with-param pos="1"/>
        </call-macro>
        <out>
          <chunk name="rel" case="caseFirstWord">
            <tags>
              <tag><lit-tag v="SN"/></tag>
              <tag><clip pos="1" side="tl" part="tipus_prn"/></tag>
              <tag><clip pos="1" side="sl" part="gen"/></tag>
              <tag><clip pos="1" side="tl" part="nbr"/></tag>
            </tags>
            <lu>
              <clip pos="1" side="tl" part="lem"/>
              <clip pos="1" side="tl" part="a_prn"/>
              <clip pos="1" side="tl" part="tipus_prn"/>
              <clip pos="1" side="tl" part="nbr"/>
            </lu>
          </chunk>
        </out>
        <let>
          <var n="caseFirstWord"/>
          <lit v="aa"/>
        </let>
      </action>
    </rule>
    <rule comment="REGLA: dont det NOM">
      <pattern>
        <pattern-item n="dont"/>
        <pattern-item n="detdef"/>
        <pattern-item n="nom"/>
      </pattern>
      <action>
        <call-macro n="tipus_nom">
          <with-param pos="3"/>
        </call-macro>
        <call-macro n="f_concord2">
          <with-param pos="3"/>
          <with-param pos="1"/>
        </call-macro>
        <call-macro n="firstWord">
          <with-param pos="1"/>
        </call-macro>
        <out>
          <chunk name="rel" case="caseFirstWord">
            <tags>
              <tag><lit-tag v="SN"/></tag>
              <tag><clip pos="1" side="tl" part="tipus_prn"/></tag>
              <tag><clip pos="1" side="sl" part="gen"/></tag>
              <tag><clip pos="1" side="tl" part="nbr"/></tag>
            </tags>
            <lu>
              <clip pos="1" side="tl" part="lem"/>
              <clip pos="1" side="tl" part="a_prn"/>
              <clip pos="1" side="tl" part="tipus_prn"/>
              <clip pos="1" side="tl" part="nbr"/>
            </lu>
          </chunk>
          <b pos="1"/>
          <chunk name="nom">
            <tags>
              <tag><lit-tag v="SN"/></tag>
              <tag><var n="genero"/></tag>
              <tag><var n="numero"/></tag>
              <tag><var n="tipusnom"/></tag>
            </tags>
            <lu>
              <clip pos="3" side="tl" part="lemh"/>
              <clip pos="3" side="tl" part="a_nom"/>
              <clip pos="3" side="tl" part="nbr_sense_sp" link-to="3"/>
              <clip pos="3" side="tl" part="nbr_sp"/>
              <clip pos="3" side="tl" part="lemq"/>
            </lu>
          </chunk>
        </out>
        <call-macro n="f_bcond">
          <with-param pos="2"/>
          <with-param pos="3"/>
        </call-macro>
        <let>
          <var n="caseFirstWord"/>
          <lit v="aa"/>
        </let>
      </action>
    </rule>
    <rule comment="REGLA: dont det NOM ADJ">
      <pattern>
        <pattern-item n="dont"/>
        <pattern-item n="detdef"/>
        <pattern-item n="nom"/>
        <pattern-item n="adj"/>
      </pattern>
      <action>
        <call-macro n="tipus_nom">
          <with-param pos="3"/>
        </call-macro>
        <call-macro n="f_concord3">
          <with-param pos="3"/>
          <with-param pos="4"/>
          <with-param pos="1"/>
        </call-macro>
        <call-macro n="firstWord">
          <with-param pos="1"/>
        </call-macro>
        <out>
          <chunk name="rel" case="caseFirstWord">
            <tags>
              <tag><lit-tag v="SN"/></tag>
              <tag><clip pos="1" side="tl" part="tipus_prn"/></tag>
              <tag><clip pos="1" side="sl" part="gen"/></tag>
              <tag><clip pos="1" side="tl" part="nbr"/></tag>
            </tags>
            <lu>
              <clip pos="1" side="tl" part="lem"/>
              <clip pos="1" side="tl" part="a_prn"/>
              <clip pos="1" side="tl" part="tipus_prn"/>
              <clip pos="1" side="tl" part="nbr"/>
            </lu>
          </chunk>
          <b pos="1"/>
          <chunk name="adj_nom">
            <tags>
              <tag><lit-tag v="SN"/></tag>
              <tag><var n="genero"/></tag>
              <tag><var n="numero"/></tag>
              <tag><var n="tipusnom"/></tag>
            </tags>
            <lu>
              <clip pos="4" side="tl" part="lemh"/>
              <clip pos="4" side="tl" part="a_adj"/>
              <clip pos="4" side="tl" part="lemq"/>
            </lu>
            <b pos="2"/>
            <lu>
              <clip pos="3" side="tl" part="lemh"/>
              <clip pos="3" side="tl" part="a_nom"/>
              <clip pos="3" side="tl" part="nbr_sense_sp" link-to="3"/>
              <clip pos="3" side="tl" part="nbr_sp"/>
              <clip pos="3" side="tl" part="lemq"/>
            </lu>
          </chunk>
        </out>
        <call-macro n="f_bcond">
          <with-param pos="3"/>
          <with-param pos="4"/>
        </call-macro>
        <let>
          <var n="caseFirstWord"/>
          <lit v="aa"/>
        </let>
      </action>
    </rule>
    <rule comment="REGLA: dont det adj NOM">
      <pattern>
        <pattern-item n="dont"/>
        <pattern-item n="detdef"/>
        <pattern-item n="adj"/>
        <pattern-item n="nom"/>
      </pattern>
      <action>
        <call-macro n="tipus_nom">
          <with-param pos="3"/>
        </call-macro>
        <call-macro n="f_concord3">
          <with-param pos="4"/>
          <with-param pos="3"/>
          <with-param pos="1"/>
        </call-macro>
        <call-macro n="firstWord">
          <with-param pos="1"/>
        </call-macro>
        <out>
          <chunk name="rel" case="caseFirstWord">
            <tags>
              <tag><lit-tag v="SN"/></tag>
              <tag><clip pos="1" side="tl" part="tipus_prn"/></tag>
              <tag><clip pos="1" side="sl" part="gen"/></tag>
              <tag><clip pos="1" side="tl" part="nbr"/></tag>
            </tags>
            <lu>
              <clip pos="1" side="tl" part="lem"/>
              <clip pos="1" side="tl" part="a_prn"/>
              <clip pos="1" side="tl" part="tipus_prn"/>
              <clip pos="1" side="tl" part="nbr"/>
            </lu>
          </chunk>
          <b pos="1"/>
          <chunk name="adj_nom">
            <tags>
              <tag><lit-tag v="SN"/></tag>
              <tag><clip pos="4" side="sl" part="gen"/></tag>
              <tag><clip pos="4" side="tl" part="nbr"/></tag>
              <tag><var n="tipusnom"/></tag>
            </tags>
            <lu>
              <clip pos="3" side="tl" part="lemh"/>
              <clip pos="3" side="tl" part="a_adj"/>
              <clip pos="3" side="tl" part="lemq"/>
            </lu>
            <b pos="2"/>
            <lu>
              <clip pos="4" side="tl" part="lemh"/>
              <clip pos="4" side="tl" part="a_nom"/>
              <clip pos="4" side="tl" part="nbr_sense_sp" link-to="3"/>
              <clip pos="4" side="tl" part="nbr_sp"/>
              <clip pos="4" side="tl" part="lemq"/>
            </lu>
          </chunk>
        </out>
        <call-macro n="f_bcond">
          <with-param pos="3"/>
          <with-param pos="4"/>
        </call-macro>
        <let>
          <var n="caseFirstWord"/>
          <lit v="aa"/>
        </let>
      </action>
    </rule>
    <rule comment="cnjcoo">
      <pattern>
        <pattern-item n="cnjcoo"/>
      </pattern>
      <action>
        <call-macro n="firstWord">
          <with-param pos="1"/>
        </call-macro>
        <out>
          <chunk name="cnjcoo" case="caseFirstWord">
            <tags>
              <tag>
                <clip pos="1" side="tl" part="tags"/>
              </tag>
            </tags>
            <lu>
              <clip pos="1" side="tl" part="whole"/>
            </lu>
          </chunk>
        </out>
        <let>
          <var n="caseFirstWord"/>
          <lit v="aa"/>
        </let>
      </action>
    </rule>
    <rule comment="CNJ">
      <pattern>
        <pattern-item n="cnjsub"/>
      </pattern>
      <action>
        <call-macro n="firstWord">
          <with-param pos="1"/>
        </call-macro>
        <out>
          <chunk name="cnjsub" case="caseFirstWord">
            <tags>
              <tag>
                <clip pos="1" side="tl" part="tags"/>
              </tag>
            </tags>
            <lu>
              <clip pos="1" side="tl" part="whole"/>
            </lu>
          </chunk>
        </out>
        <let>
          <var n="caseFirstWord"/>
          <lit v="aa"/>
        </let>
      </action>
    </rule>
    <rule comment="CNJ">
      <pattern>
        <pattern-item n="cnjadv"/>
      </pattern>
      <action>
        <call-macro n="firstWord">
          <with-param pos="1"/>
        </call-macro>
        <out>
          <chunk name="cnjadv" case="caseFirstWord">
            <tags>
              <tag><clip pos="1" side="tl" part="tags"/></tag>
            </tags>
            <lu>
              <clip pos="1" side="tl" part="whole"/>
            </lu>
          </chunk>
        </out>
        <let>
          <var n="caseFirstWord"/>
          <lit v="aa"/>
        </let>
      </action>
    </rule>
    <rule comment="PREP">
      <pattern>
        <pattern-item n="prep"/>
      </pattern>
      <action>
        <call-macro n="firstWord">
          <with-param pos="1"/>
        </call-macro>
        <call-macro n="f_prep">
          <with-param pos="1"/>
        </call-macro>
        <out>
          <chunk name="pr" case="caseFirstWord">
            <tags>
              <tag><lit-tag v="PREP"/></tag>
              <tag><var n="tipusprep"/></tag>
            </tags>
            <lu>
              <clip pos="1" side="tl" part="whole"/>
            </lu>
          </chunk>
        </out>
        <let>
          <var n="caseFirstWord"/>
          <lit v="aa"/>
        </let>
      </action>
    </rule>
    <rule comment="NUMERAL">
      <pattern>
        <pattern-item n="num"/>
      </pattern>
      <action>
        <call-macro n="f_concord1">
          <with-param pos="1"/>
        </call-macro>
        <call-macro n="firstWord">
          <with-param pos="1"/>
        </call-macro>
        <out>
          <chunk name="num" case="caseFirstWord">
            <tags>
              <tag><clip pos="1" side="sl" part="gen"/></tag>
              <tag><clip pos="1" side="tl" part="nbr"/></tag>
            </tags>
            <lu>
              <clip pos="1" side="tl" part="whole"/>
            </lu>
          </chunk>
        </out>
        <let>
          <var n="caseFirstWord"/>
          <lit v="aa"/>
        </let>
      </action>
    </rule>
    <rule>
      <!-- REGLA: coma-->
      <pattern>
        <pattern-item n="coma"/>
      </pattern>
      <action>
        <call-macro n="firstWord">
          <with-param pos="1"/>
        </call-macro>
        <out>
          <chunk name="coma" case="caseFirstWord">
            <tags>
              <tag>
                <lit-tag v="cm"/>
              </tag>
            </tags>
            <lu>
              <clip pos="1" side="tl" part="whole"/>
            </lu>
          </chunk>
        </out>
      </action>
    </rule>
    <rule>
      <!-- REGLA: reset variables-->
      <pattern>
        <pattern-item n="sent"/>
      </pattern>
      <action>
        <let>
          <clip pos="1" side="sl" part="nbr"/>
          <lit-tag v="sg"/>
        </let>
        <let>
          <var n="genero"/>
          <lit-tag v="m"/>
        </let>
        <let>
          <var n="tipusverb"/>
          <lit-tag v="nodef"/>
        </let>
        <choose>
          <when>
            <test>
              <not>
                <or>
                  <equal>
                    <clip pos="1" side="sl" part="lem"/>
                    <lit v=";"/>
                  </equal>
                  <equal>
                    <clip pos="1" side="sl" part="lem"/>
                    <lit v=":"/>
                  </equal>
                </or>
              </not>
            </test>
            <let>
              <var n="EOS"/>
              <lit v="true"/>
            </let>
          </when>
        </choose>
        <out>
          <chunk name="punt">
            <tags>
              <tag>
                <lit-tag v="sent"/>
              </tag>
            </tags>
            <lu>
              <clip pos="1" side="tl" part="whole"/>
            </lu>
          </chunk>
        </out>
      </action>
    </rule>
  </section-rules>
</transfer>

<!--
    Resources:
    http://wiki.apertium.org/wiki/Chunking:_A_full_example
    http://wiki.apertium.org/wiki/Chunking
    http://wiki.apertium.org/wiki/Apertium_New_Language_Pair_HOWTO#Transfer_rules
    http://wiki.apertium.org/wiki/A_long_introduction_to_transfer_rules
    http://wiki.apertium.org/wiki/Transfer#Adding_structural_transfer_.28grammar.29_rules
-->
